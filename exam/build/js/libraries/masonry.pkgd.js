"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(i){return e(t,i)}):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e(t,require("jquery")):t.jQueryBridget=e(t,t.jQuery)}(window,function(t,e){function i(i,r,a){function h(t,e,n){var o,r="$()."+i+'("'+e+'")';return t.each(function(t,h){var u=a.data(h,i);if(u){var d=u[e];if(d&&"_"!=e.charAt(0)){var l=d.apply(u,n);o=void 0===o?l:o}else s(r+" is not a valid method")}else s(i+" not initialized. Cannot call methods, i.e. "+r)}),void 0!==o?o:t}function u(t,e){t.each(function(t,n){var o=a.data(n,i);o?(o.option(e),o._init()):(o=new r(n,e),a.data(n,i,o))})}(a=a||e||t.jQuery)&&(r.prototype.option||(r.prototype.option=function(t){a.isPlainObject(t)&&(this.options=a.extend(!0,this.options,t))}),a.fn[i]=function(t){return"string"==typeof t?h(this,t,o.call(arguments,1)):(u(this,t),this)},n(a))}function n(t){!t||t&&t.bridget||(t.bridget=i)}var o=Array.prototype.slice,r=t.console,s=void 0===r?function(){}:function(t){r.error(t)};return n(e||t.jQuery),i}),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:void 0,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return-1==n.indexOf(e)&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{};return(i[t]=i[t]||{})[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return-1!=n&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=0,o=i[n];e=e||[];for(var r=this._onceEvents&&this._onceEvents[t];o;){var s=r&&r[o];s&&(this.off(t,o),delete r[o]),o.apply(this,e),o=i[n+=s?0:1]}return this}},t}),function(t,e){"function"==typeof define&&define.amd?define("get-size/get-size",[],function(){return e()}):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e():t.getSize=e()}(window,function(){function t(t){var e=parseFloat(t);return-1==t.indexOf("%")&&!isNaN(e)&&e}function e(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;e<h;e++)t[a[e]]=0;return t}function i(t){var e=getComputedStyle(t);return e||s("Style returned "+e+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),e}function n(){if(!u){u=!0;var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style.boxSizing="border-box";var n=document.body||document.documentElement;n.appendChild(e);var s=i(e);o.isBoxSizeOuter=r=200==t(s.width),n.removeChild(e)}}function o(o){if(n(),"string"==typeof o&&(o=document.querySelector(o)),o&&"object"==(void 0===o?"undefined":_typeof(o))&&o.nodeType){var s=i(o);if("none"==s.display)return e();var u={};u.width=o.offsetWidth,u.height=o.offsetHeight;for(var d=u.isBorderBox="border-box"==s.boxSizing,l=0;l<h;l++){var f=a[l],c=s[f],m=parseFloat(c);u[f]=isNaN(m)?0:m}var p=u.paddingLeft+u.paddingRight,g=u.paddingTop+u.paddingBottom,y=u.marginLeft+u.marginRight,v=u.marginTop+u.marginBottom,_=u.borderLeftWidth+u.borderRightWidth,z=u.borderTopWidth+u.borderBottomWidth,b=d&&r,E=t(s.width);!1!==E&&(u.width=E+(b?0:p+_));var x=t(s.height);return!1!==x&&(u.height=x+(b?0:g+z)),u.innerWidth=u.width-(p+_),u.innerHeight=u.height-(g+z),u.outerWidth=u.width+y,u.outerHeight=u.height+v,u}}var r,s="undefined"==typeof console?function(){}:function(t){console.error(t)},a=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],h=a.length,u=!1;return o}),function(t,e){"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",e):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e():t.matchesSelector=e()}(window,function(){var t=function(){var t=window.Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0;i<e.length;i++){var n=e[i]+"MatchesSelector";if(t[n])return n}}();return function(e,i){return e[t](i)}}),function(t,e){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(i){return e(t,i)}):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e(t,require("desandro-matches-selector")):t.fizzyUIUtils=e(t,t.matchesSelector)}(window,function(t,e){var i={};i.extend=function(t,e){for(var i in e)t[i]=e[i];return t},i.modulo=function(t,e){return(t%e+e)%e},i.makeArray=function(t){var e=[];if(Array.isArray(t))e=t;else if(t&&"object"==(void 0===t?"undefined":_typeof(t))&&"number"==typeof t.length)for(var i=0;i<t.length;i++)e.push(t[i]);else e.push(t);return e},i.removeFrom=function(t,e){var i=t.indexOf(e);-1!=i&&t.splice(i,1)},i.getParent=function(t,i){for(;t!=document.body;)if(t=t.parentNode,e(t,i))return t},i.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},i.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},i.filterFindElements=function(t,n){var o=[];return(t=i.makeArray(t)).forEach(function(t){if(t instanceof HTMLElement)if(n){e(t,n)&&o.push(t);for(var i=t.querySelectorAll(n),r=0;r<i.length;r++)o.push(i[r])}else o.push(t)}),o},i.debounceMethod=function(t,e,i){var n=t.prototype[e],o=e+"Timeout";t.prototype[e]=function(){var t=this[o];t&&clearTimeout(t);var e=arguments,r=this;this[o]=setTimeout(function(){n.apply(r,e),delete r[o]},i||100)}},i.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?setTimeout(t):document.addEventListener("DOMContentLoaded",t)},i.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()};var n=t.console;return i.htmlInit=function(e,o){i.docReady(function(){var r=i.toDashed(o),s="data-"+r,a=document.querySelectorAll("["+s+"]"),h=document.querySelectorAll(".js-"+r),u=i.makeArray(a).concat(i.makeArray(h)),d=s+"-options",l=t.jQuery;u.forEach(function(t){var i,r=t.getAttribute(s)||t.getAttribute(d);try{i=r&&JSON.parse(r)}catch(e){return void(n&&n.error("Error parsing "+s+" on "+t.className+": "+e))}var a=new e(t,i);l&&l.data(t,o,a)})})},i}),function(t,e){"function"==typeof define&&define.amd?define("outlayer/item",["ev-emitter/ev-emitter","get-size/get-size"],e):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e(require("ev-emitter"),require("get-size")):(t.Outlayer={},t.Outlayer.Item=e(t.EvEmitter,t.getSize))}(window,function(t,e){function i(t){for(var e in t)return!1;return null,!0}function n(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}var o=document.documentElement.style,r="string"==typeof o.transition?"transition":"WebkitTransition",s="string"==typeof o.transform?"transform":"WebkitTransform",a={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[r],h={transform:s,transition:r,transitionDuration:r+"Duration",transitionProperty:r+"Property",transitionDelay:r+"Delay"},u=n.prototype=Object.create(t.prototype);u.constructor=n,u._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},u.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},u.getSize=function(){this.size=e(this.element)},u.css=function(t){var e=this.element.style;for(var i in t)e[h[i]||i]=t[i]},u.getPosition=function(){var t=getComputedStyle(this.element),e=this.layout._getOption("originLeft"),i=this.layout._getOption("originTop"),n=t[e?"left":"right"],o=t[i?"top":"bottom"],r=this.layout.size,s=-1!=n.indexOf("%")?parseFloat(n)/100*r.width:parseInt(n,10),a=-1!=o.indexOf("%")?parseFloat(o)/100*r.height:parseInt(o,10);s=isNaN(s)?0:s,a=isNaN(a)?0:a,s-=e?r.paddingLeft:r.paddingRight,a-=i?r.paddingTop:r.paddingBottom,this.position.x=s,this.position.y=a},u.layoutPosition=function(){var t=this.layout.size,e={},i=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop"),o=i?"paddingLeft":"paddingRight",r=i?"left":"right",s=i?"right":"left",a=this.position.x+t[o];e[r]=this.getXValue(a),e[s]="";var h=n?"paddingTop":"paddingBottom",u=n?"top":"bottom",d=n?"bottom":"top",l=this.position.y+t[h];e[u]=this.getYValue(l),e[d]="",this.css(e),this.emitEvent("layout",[this])},u.getXValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!e?t/this.layout.size.width*100+"%":t+"px"},u.getYValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&e?t/this.layout.size.height*100+"%":t+"px"},u._transitionTo=function(t,e){this.getPosition();var i=this.position.x,n=this.position.y,o=parseInt(t,10),r=parseInt(e,10),s=o===this.position.x&&r===this.position.y;if(this.setPosition(t,e),!s||this.isTransitioning){var a=t-i,h=e-n,u={};u.transform=this.getTranslate(a,h),this.transition({to:u,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})}else this.layoutPosition()},u.getTranslate=function(t,e){var i=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop");return t=i?t:-t,e=n?e:-e,"translate3d("+t+"px, "+e+"px, 0)"},u.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},u.moveTo=u._transitionTo,u.setPosition=function(t,e){this.position.x=parseInt(t,10),this.position.y=parseInt(e,10)},u._nonTransition=function(t){this.css(t.to),t.isCleaning&&this._removeStyles(t.to);for(var e in t.onTransitionEnd)t.onTransitionEnd[e].call(this)},u.transition=function(t){if(parseFloat(this.layout.options.transitionDuration)){var e=this._transn;for(var i in t.onTransitionEnd)e.onEnd[i]=t.onTransitionEnd[i];for(i in t.to)e.ingProperties[i]=!0,t.isCleaning&&(e.clean[i]=!0);if(t.from){this.css(t.from);this.element.offsetHeight;null}this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0}else this._nonTransition(t)};var d="opacity,"+function(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}(s);u.enableTransition=function(){if(!this.isTransitioning){var t=this.layout.options.transitionDuration;t="number"==typeof t?t+"ms":t,this.css({transitionProperty:d,transitionDuration:t,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(a,this,!1)}},u.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},u.onotransitionend=function(t){this.ontransitionend(t)};var l={"-webkit-transform":"transform"};u.ontransitionend=function(t){if(t.target===this.element){var e=this._transn,n=l[t.propertyName]||t.propertyName;delete e.ingProperties[n],i(e.ingProperties)&&this.disableTransition(),n in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[n]),n in e.onEnd&&(e.onEnd[n].call(this),delete e.onEnd[n]),this.emitEvent("transitionEnd",[this])}},u.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(a,this,!1),this.isTransitioning=!1},u._removeStyles=function(t){var e={};for(var i in t)e[i]="";this.css(e)};var f={transitionProperty:"",transitionDuration:"",transitionDelay:""};return u.removeTransitionStyles=function(){this.css(f)},u.stagger=function(t){t=isNaN(t)?0:t,this.staggerDelay=t+"ms"},u.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},u.remove=function(){r&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",function(){this.removeElem()}),this.hide()):this.removeElem()},u.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options,e={};e[this.getHideRevealTransitionEndProperty("visibleStyle")]=this.onRevealTransitionEnd,this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0,onTransitionEnd:e})},u.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},u.getHideRevealTransitionEndProperty=function(t){var e=this.layout.options[t];if(e.opacity)return"opacity";for(var i in e)return i},u.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options,e={};e[this.getHideRevealTransitionEndProperty("hiddenStyle")]=this.onHideTransitionEnd,this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:e})},u.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},u.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},n}),function(t,e){"function"==typeof define&&define.amd?define("outlayer/outlayer",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(i,n,o,r){return e(t,i,n,o,r)}):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e(t,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):t.Outlayer=e(t,t.EvEmitter,t.getSize,t.fizzyUIUtils,t.Outlayer.Item)}(window,function(t,e,i,n,o){function r(t,e){var i=n.getQueryElement(t);if(i){this.element=i,u&&(this.$element=u(this.element)),this.options=n.extend({},this.constructor.defaults),this.option(e);var o=++l;this.element.outlayerGUID=o,f[o]=this,this._create(),this._getOption("initLayout")&&this.layout()}else h&&h.error("Bad element for "+this.constructor.namespace+": "+(i||t))}function s(t){function e(){t.apply(this,arguments)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e}function a(t){if("number"==typeof t)return t;var e=t.match(/(^\d*\.?\d*)(\w*)/),i=e&&e[1],n=e&&e[2];return i.length?(i=parseFloat(i))*(m[n]||1):0}var h=t.console,u=t.jQuery,d=function(){},l=0,f={};r.namespace="outlayer",r.Item=o,r.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var c=r.prototype;n.extend(c,e.prototype),c.option=function(t){n.extend(this.options,t)},c._getOption=function(t){var e=this.constructor.compatOptions[t];return e&&void 0!==this.options[e]?this.options[e]:this.options[t]},r.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},c._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),n.extend(this.element.style,this.options.containerStyle),this._getOption("resize")&&this.bindResize()},c.reloadItems=function(){this.items=this._itemize(this.element.children)},c._itemize=function(t){for(var e=this._filterFindItemElements(t),i=this.constructor.Item,n=[],o=0;o<e.length;o++){var r=new i(e[o],this);n.push(r)}return n},c._filterFindItemElements=function(t){return n.filterFindElements(t,this.options.itemSelector)},c.getItemElements=function(){return this.items.map(function(t){return t.element})},c.layout=function(){this._resetLayout(),this._manageStamps();var t=this._getOption("layoutInstant"),e=void 0!==t?t:!this._isLayoutInited;this.layoutItems(this.items,e),this._isLayoutInited=!0},c._init=c.layout,c._resetLayout=function(){this.getSize()},c.getSize=function(){this.size=i(this.element)},c._getMeasurement=function(t,e){var n,o=this.options[t];o?("string"==typeof o?n=this.element.querySelector(o):o instanceof HTMLElement&&(n=o),this[t]=n?i(n)[e]:o):this[t]=0},c.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},c._getItemsForLayout=function(t){return t.filter(function(t){return!t.isIgnored})},c._layoutItems=function(t,e){if(this._emitCompleteOnItems("layout",t),t&&t.length){var i=[];t.forEach(function(t){var n=this._getItemLayoutPosition(t);n.item=t,n.isInstant=e||t.isLayoutInstant,i.push(n)},this),this._processLayoutQueue(i)}},c._getItemLayoutPosition=function(){return{x:0,y:0}},c._processLayoutQueue=function(t){this.updateStagger(),t.forEach(function(t,e){this._positionItem(t.item,t.x,t.y,t.isInstant,e)},this)},c.updateStagger=function(){var t=this.options.stagger;{if(null!==t&&void 0!==t)return this.stagger=a(t),this.stagger;this.stagger=0}},c._positionItem=function(t,e,i,n,o){n?t.goTo(e,i):(t.stagger(o*this.stagger),t.moveTo(e,i))},c._postLayout=function(){this.resizeContainer()},c.resizeContainer=function(){if(this._getOption("resizeContainer")){var t=this._getContainerSize();t&&(this._setContainerMeasure(t.width,!0),this._setContainerMeasure(t.height,!1))}},c._getContainerSize=d,c._setContainerMeasure=function(t,e){if(void 0!==t){var i=this.size;i.isBorderBox&&(t+=e?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},c._emitCompleteOnItems=function(t,e){function i(){o.dispatchEvent(t+"Complete",null,[e])}function n(){++s==r&&i()}var o=this,r=e.length;if(e&&r){var s=0;e.forEach(function(e){e.once(t,n)})}else i()},c.dispatchEvent=function(t,e,i){var n=e?[e].concat(i):i;if(this.emitEvent(t,n),u)if(this.$element=this.$element||u(this.element),e){var o=u.Event(e);o.type=t,this.$element.trigger(o,i)}else this.$element.trigger(t,i)},c.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},c.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},c.stamp=function(t){(t=this._find(t))&&(this.stamps=this.stamps.concat(t),t.forEach(this.ignore,this))},c.unstamp=function(t){(t=this._find(t))&&t.forEach(function(t){n.removeFrom(this.stamps,t),this.unignore(t)},this)},c._find=function(t){if(t)return"string"==typeof t&&(t=this.element.querySelectorAll(t)),t=n.makeArray(t)},c._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},c._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},c._manageStamp=d,c._getElementOffset=function(t){var e=t.getBoundingClientRect(),n=this._boundingRect,o=i(t);return{left:e.left-n.left-o.marginLeft,top:e.top-n.top-o.marginTop,right:n.right-e.right-o.marginRight,bottom:n.bottom-e.bottom-o.marginBottom}},c.handleEvent=n.handleEvent,c.bindResize=function(){t.addEventListener("resize",this),this.isResizeBound=!0},c.unbindResize=function(){t.removeEventListener("resize",this),this.isResizeBound=!1},c.onresize=function(){this.resize()},n.debounceMethod(r,"onresize",100),c.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},c.needsResizeLayout=function(){var t=i(this.element);return this.size&&t&&t.innerWidth!==this.size.innerWidth},c.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},c.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},c.prepended=function(t){var e=this._itemize(t);if(e.length){var i=this.items.slice(0);this.items=e.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(i)}},c.reveal=function(t){if(this._emitCompleteOnItems("reveal",t),t&&t.length){var e=this.updateStagger();t.forEach(function(t,i){t.stagger(i*e),t.reveal()})}},c.hide=function(t){if(this._emitCompleteOnItems("hide",t),t&&t.length){var e=this.updateStagger();t.forEach(function(t,i){t.stagger(i*e),t.hide()})}},c.revealItemElements=function(t){var e=this.getItems(t);this.reveal(e)},c.hideItemElements=function(t){var e=this.getItems(t);this.hide(e)},c.getItem=function(t){for(var e=0;e<this.items.length;e++){var i=this.items[e];if(i.element==t)return i}},c.getItems=function(t){var e=[];return(t=n.makeArray(t)).forEach(function(t){var i=this.getItem(t);i&&e.push(i)},this),e},c.remove=function(t){var e=this.getItems(t);this._emitCompleteOnItems("remove",e),e&&e.length&&e.forEach(function(t){t.remove(),n.removeFrom(this.items,t)},this)},c.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="",this.items.forEach(function(t){t.destroy()}),this.unbindResize();var e=this.element.outlayerGUID;delete f[e],delete this.element.outlayerGUID,u&&u.removeData(this.element,this.constructor.namespace)},r.data=function(t){var e=(t=n.getQueryElement(t))&&t.outlayerGUID;return e&&f[e]},r.create=function(t,e){var i=s(r);return i.defaults=n.extend({},r.defaults),n.extend(i.defaults,e),i.compatOptions=n.extend({},r.compatOptions),i.namespace=t,i.data=r.data,i.Item=s(o),n.htmlInit(i,t),u&&u.bridget&&u.bridget(t,i),i};var m={ms:1,s:1e3};return r.Item=o,r}),function(t,e){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],e):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e(require("outlayer"),require("get-size")):t.Masonry=e(t.Outlayer,t.getSize)}(window,function(t,e){var i=t.create("masonry");i.compatOptions.fitWidth="isFitWidth";var n=i.prototype;return n._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var t=0;t<this.cols;t++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},n.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var t=this.items[0],i=t&&t.element;this.columnWidth=i&&e(i).outerWidth||this.containerWidth}var n=this.columnWidth+=this.gutter,o=this.containerWidth+this.gutter,r=o/n,s=n-o%n,a=s&&s<1?"round":"floor";r=Math[a](r),this.cols=Math.max(r,1)},n.getContainerWidth=function(){var t=this._getOption("fitWidth")?this.element.parentNode:this.element,i=e(t);this.containerWidth=i&&i.innerWidth},n._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth%this.columnWidth,i=e&&e<1?"round":"ceil",n=Math[i](t.size.outerWidth/this.columnWidth);n=Math.min(n,this.cols);for(var o=this[this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition"](n,t),r={x:this.columnWidth*o.col,y:o.y},s=o.y+t.size.outerHeight,a=n+o.col,h=o.col;h<a;h++)this.colYs[h]=s;return r},n._getTopColPosition=function(t){var e=this._getTopColGroup(t),i=Math.min.apply(Math,e);return{col:e.indexOf(i),y:i}},n._getTopColGroup=function(t){if(t<2)return this.colYs;for(var e=[],i=this.cols+1-t,n=0;n<i;n++)e[n]=this._getColGroupY(n,t);return e},n._getColGroupY=function(t,e){if(e<2)return this.colYs[t];var i=this.colYs.slice(t,t+e);return Math.max.apply(Math,i)},n._getHorizontalColPosition=function(t,e){var i=this.horizontalColIndex%this.cols;i=t>1&&i+t>this.cols?0:i;var n=e.size.outerWidth&&e.size.outerHeight;return this.horizontalColIndex=n?i+t:this.horizontalColIndex,{col:i,y:this._getColGroupY(i,t)}},n._manageStamp=function(t){var i=e(t),n=this._getElementOffset(t),o=this._getOption("originLeft")?n.left:n.right,r=o+i.outerWidth,s=Math.floor(o/this.columnWidth);s=Math.max(0,s);var a=Math.floor(r/this.columnWidth);a-=r%this.columnWidth?0:1,a=Math.min(this.cols-1,a);for(var h=(this._getOption("originTop")?n.top:n.bottom)+i.outerHeight,u=s;u<=a;u++)this.colYs[u]=Math.max(h,this.colYs[u])},n._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this._getOption("fitWidth")&&(t.width=this._getContainerFitWidth()),t},n._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},n.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!=this.containerWidth},i});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYnJhcmllcy9tYXNvbnJ5LnBrZ2QuanMiXSwibmFtZXMiOlsid2luZG93IiwiZmFjdG9yeSIsImRlZmluZSIsImFtZCIsImpRdWVyeSIsIm1vZHVsZSIsIl90eXBlb2YiLCJleHBvcnRzIiwicmVxdWlyZSIsImpRdWVyeUJyaWRnZXQiLCJuYW1lc3BhY2UiLCJQbHVnaW5DbGFzcyIsIiQiLCIkZWxlbXMiLCJtZXRob2ROYW1lIiwiYXJncyIsInJldHVyblZhbHVlIiwicGx1Z2luTWV0aG9kU3RyIiwiZGF0YSIsImxvZ0Vycm9yIiwiaW5zdGFuY2UiLCJlbGVtIiwibWV0aG9kIiwiY2hhckF0IiwidW5kZWZpbmVkIiwidmFsdWUiLCJvcHRpb25zIiwiX2luaXQiLCJ1cGRhdGVKUXVlcnkiLCJpc1BsYWluT2JqZWN0IiwicHJvdG90eXBlIiwib3B0aW9uIiwib3B0cyIsInRoaXMiLCJleHRlbmQiLCJmbiIsImFycmF5U2xpY2UiLCJtZXRob2RDYWxsIiwiYXJnMCIsImNhbGwiLCJhcmd1bWVudHMiLCJwbGFpbkNhbGwiLCJicmlkZ2V0IiwiQXJyYXkiLCJzbGljZSIsImNvbnNvbGUiLCJtZXNzYWdlIiwiZXJyb3IiLCJnbG9iYWwiLCJFdkVtaXR0ZXIiLCJwcm90byIsImxpc3RlbmVycyIsInB1c2giLCJsaXN0ZW5lciIsImV2ZW50TmFtZSIsImV2ZW50cyIsIl9ldmVudHMiLCJpbmRleE9mIiwib25jZSIsIm9uY2VMaXN0ZW5lcnMiLCJvbmNlRXZlbnRzIiwib24iLCJvZmYiLCJsZW5ndGgiLCJpbmRleCIsInNwbGljZSIsImVtaXRFdmVudCIsImkiLCJfb25jZUV2ZW50cyIsImFwcGx5IiwiaXNPbmNlIiwiZ2V0U2l6ZSIsImdldFN0eWxlU2l6ZSIsIm51bSIsInBhcnNlRmxvYXQiLCJtZWFzdXJlbWVudHMiLCJpc05hTiIsImlzQm94U2l6ZU91dGVyIiwic2l6ZSIsIndpZHRoIiwic3R5bGUiLCJoZWlnaHQiLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJvdXRlcldpZHRoIiwiaXNTZXR1cCIsIm1lYXN1cmVtZW50c0xlbmd0aCIsImdldFN0eWxlIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImRpdiIsInNldHVwIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwicGFkZGluZyIsImJvcmRlcldpZHRoIiwiYm94U2l6aW5nIiwiYm9keSIsImdldFplcm9TaXplIiwiZG9jdW1lbnRFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJvZmZzZXRXaWR0aCIsIm1lYXN1cmVtZW50IiwicXVlcnlTZWxlY3RvciIsIm1hcmdpbldpZHRoIiwibWFyZ2luTGVmdCIsIm1hcmdpblJpZ2h0IiwiZGlzcGxheSIsInN0eWxlV2lkdGgiLCJpc0JvcmRlckJveFNpemVPdXRlciIsIm9mZnNldEhlaWdodCIsInN0eWxlSGVpZ2h0IiwicGFkZGluZ0hlaWdodCIsIm1hcmdpbkhlaWdodCIsInBhZGRpbmdUb3AiLCJwYWRkaW5nQm90dG9tIiwibWFyZ2luVG9wIiwibWFyZ2luQm90dG9tIiwiYm9yZGVyTGVmdFdpZHRoIiwiYm9yZGVyUmlnaHRXaWR0aCIsImJvcmRlclRvcFdpZHRoIiwiYm9yZGVyQm90dG9tV2lkdGgiLCJpc0JvcmRlckJveCIsInBhZGRpbmdXaWR0aCIsImJvcmRlckhlaWdodCIsIm91dGVySGVpZ2h0IiwicHJlZml4ZXMiLCJwcmVmaXgiLCJtYXRjaGVzTWV0aG9kIiwiRWxlbVByb3RvIiwiRWxlbWVudCIsIm1hdGNoZXMiLCJtYXRjaGVzU2VsZWN0b3IiLCJzZWxlY3RvciIsIm1ha2VBcnJheSIsImlzQXJyYXkiLCJhcnkiLCJmaXp6eVVJVXRpbHMiLCJ1dGlscyIsImEiLCJiIiwicHJvcCIsIm1vZHVsbyIsIm9iaiIsImhhbmRsZUV2ZW50IiwiZWxlbXMiLCJmZkVsZW1zIiwiZm9yRWFjaCIsImdldFBhcmVudCIsInBhcmVudE5vZGUiLCJnZXRRdWVyeUVsZW1lbnQiLCJjaGlsZEVsZW1zIiwiZGVib3VuY2VNZXRob2QiLCJldmVudCIsInR5cGUiLCJ0aW1lb3V0TmFtZSIsImZpbHRlckZpbmRFbGVtZW50cyIsIl90aGlzIiwidGhyZXNob2xkIiwiSFRNTEVsZW1lbnQiLCJzZXRUaW1lb3V0IiwicXVlcnlTZWxlY3RvckFsbCIsIl9jbGFzcyIsImh0bWxJbml0IiwiV2lkZ2V0Q2xhc3MiLCJkb2NSZWFkeSIsImRhc2hlZE5hbWVzcGFjZSIsImRhdGFBdHRyIiwidGltZW91dCIsImpzRGFzaEVsZW1zIiwiZGF0YU9wdGlvbnNBdHRyIiwicmVhZHlTdGF0ZSIsImNhbGxiYWNrIiwidG9EYXNoZWQiLCJzdHIiLCJyZXBsYWNlIiwibWF0Y2giLCIkMSIsIiQyIiwidG9Mb3dlckNhc2UiLCJkYXRhQXR0ckVsZW1zIiwiY29uY2F0IiwiT3V0bGF5ZXIiLCJJdGVtIiwiZ2V0QXR0cmlidXRlIiwiYXR0ciIsIkpTT04iLCJwYXJzZSIsImNsYXNzTmFtZSIsInRyYW5zaXRpb25Qcm9wZXJ0eSIsInRyYW5zaXRpb25EZWxheSIsImVsZW1lbnQiLCJsYXlvdXQiLCJ4IiwieSIsImNvbnN0cnVjdG9yIiwiaXNFbXB0eU9iaiIsImNzcyIsInBvc2l0aW9uIiwiaXNPcmlnaW5MZWZ0IiwieFZhbHVlIiwiX2NyZWF0ZSIsImRvY0VsZW1TdHlsZSIsInRyYW5zaXRpb24iLCJ0cmFuc2Zvcm1Qcm9wZXJ0eSIsInRyYW5zZm9ybSIsInRyYW5zaXRpb25FbmRFdmVudCIsIldlYmtpdFRyYW5zaXRpb24iLCJ2ZW5kb3JQcm9wZXJ0aWVzIiwidHJhbnNpdGlvbkR1cmF0aW9uIiwic3VwcG9ydGVkUHJvcCIsImVsZW1TdHlsZSIsIk9iamVjdCIsImNyZWF0ZSIsImxheW91dFBvc2l0aW9uIiwibGF5b3V0U2l6ZSIsInhQYWRkaW5nIiwieFByb3BlcnR5IiwiZ2V0WFZhbHVlIiwieFJlc2V0UHJvcGVydHkiLCJ5UHJvcGVydHkiLCJ5UmVzZXRQcm9wZXJ0eSIsImlzT3JpZ2luVG9wIiwiaXNIb3Jpem9udGFsIiwiX2dldE9wdGlvbiIsImdldFBvc2l0aW9uIiwicGVyY2VudFBvc2l0aW9uIiwiX3RyYW5zaXRpb25UbyIsInlWYWx1ZSIsImN1clgiLCJjdXJZIiwicGFyc2VJbnQiLCJjb21wYXJlWCIsImNvbXBhcmVZIiwic2V0UG9zaXRpb24iLCJwYWRkaW5nTGVmdCIsInBhZGRpbmdSaWdodCIsImRpZE5vdE1vdmUiLCJpc1RyYW5zaXRpb25pbmciLCJ0cmFuc2l0aW9uU3R5bGUiLCJ0byIsImlzQ2xlYW5pbmciLCJ5UGFkZGluZyIsImdvVG8iLCJnZXRZVmFsdWUiLCJvblRyYW5zaXRpb25FbmQiLCJ0cmFuc1giLCJfbm9uVHJhbnNpdGlvbiIsInRyYW5zWSIsImdldFRyYW5zbGF0ZSIsIl90cmFuc2l0aW9uIiwiaCIsIm1vdmVUbyIsImVuYWJsZVRyYW5zaXRpb24iLCJkdXJhdGlvbiIsIl90cmFuc24iLCJvbkVuZCIsIm9ud2Via2l0VHJhbnNpdGlvbkVuZCIsIm9udHJhbnNpdGlvbmVuZCIsIm9ub3RyYW5zaXRpb25lbmQiLCJjbGVhbiIsImRhc2hlZFZlbmRvclByb3BlcnRpZXMiLCJmcm9tIiwidHJhbnNpdGlvblByb3BzIiwiZGlzYWJsZVRyYW5zaXRpb24iLCJwcm9wZXJ0eU5hbWUiLCJfcmVtb3ZlU3R5bGVzIiwiY2xlYW5TdHlsZSIsInN0YWdnZXJEZWxheSIsInJlbW92ZVRyYW5zaXRpb25TdHlsZXMiLCItd2Via2l0LXRyYW5zZm9ybSIsImRlbGF5IiwidGFyZ2V0IiwiaW5nUHJvcGVydGllcyIsInRyYW5zaXRpb25FbmRQcm9wZXJ0eSIsIm9uUmV2ZWFsVHJhbnNpdGlvbkVuZCIsImNsZWFuVHJhbnNpdGlvblN0eWxlIiwiZ2V0SGlkZVJldmVhbFRyYW5zaXRpb25FbmRQcm9wZXJ0eSIsInN0YWdnZXIiLCJvcHRpb25TdHlsZSIsInJlbW92ZUVsZW0iLCJpc0hpZGRlbiIsInJlbW92ZUNoaWxkIiwicmVtb3ZlIiwib25IaWRlVHJhbnNpdGlvbkVuZCIsImhpZGUiLCJyZXZlYWwiLCJsZWZ0IiwicmlnaHQiLCJoaWRkZW5TdHlsZSIsInRvcCIsInZpc2libGVTdHlsZSIsImJvdHRvbSIsInN0eWxlUHJvcGVydHkiLCJvcGFjaXR5Iiwibm9vcCIsImluc3RhbmNlcyIsInF1ZXJ5RWxlbWVudCIsImRlc3Ryb3kiLCIkZWxlbWVudCIsImRlZmF1bHRzIiwiY29udGFpbmVyU3R5bGUiLCJpbml0TGF5b3V0Iiwib3JpZ2luTGVmdCIsInJlc2l6ZUNvbnRhaW5lciIsImNhbkJpbmRSZXNpemUiLCJpZCIsIkdVSUQiLCJpdGVtcyIsIm91dGxheWVyR1VJRCIsIl9pdGVtaXplIiwicmVsb2FkSXRlbXMiLCJzdWJjbGFzcyIsImZpcnN0SXRlbSIsImZpcnN0SXRlbUVsZW0iLCJQYXJlbnQiLCJTdWJDbGFzcyIsImNvbnRhaW5lcldpZHRoIiwiY29sdW1uV2lkdGgiLCJnZXRDb250YWluZXJXaWR0aCIsInRpbWUiLCJpc0ZpdFdpZHRoIiwiY29udGFpbmVyIiwiX2dldEl0ZW1MYXlvdXRQb3NpdGlvbiIsInVuaXQiLCJvcmlnaW5Ub3AiLCJyZXNpemUiLCJfZmlsdGVyRmluZEl0ZW1FbGVtZW50cyIsImxheW91dEluc3RhbnQiLCJpc0luc3RhbnQiLCJsYXlvdXRJdGVtcyIsIm9sZE9wdGlvbiIsImNvbXBhdE9wdGlvbnMiLCJzdGFtcHMiLCJzdGFtcCIsImJpbmRSZXNpemUiLCJjaGlsZHJlbiIsIml0ZW1FbGVtcyIsIl9nZXRJdGVtc0ZvckxheW91dCIsIml0ZW1TZWxlY3RvciIsImdldEl0ZW1FbGVtZW50cyIsIm1hcCIsIml0ZW0iLCJfcmVzZXRMYXlvdXQiLCJxdWV1ZSIsIl9pc0xheW91dEluaXRlZCIsIl9nZXRNZWFzdXJlbWVudCIsInVwZGF0ZVN0YWdnZXIiLCJnZXRNaWxsaXNlY29uZHMiLCJfcG9zdExheW91dCIsImZpbHRlciIsImlzSWdub3JlZCIsIl9sYXlvdXRJdGVtcyIsIl9lbWl0Q29tcGxldGVPbkl0ZW1zIiwiX3NldENvbnRhaW5lck1lYXN1cmUiLCJtZWFzdXJlIiwiaXNMYXlvdXRJbnN0YW50IiwiX3Byb2Nlc3NMYXlvdXRRdWV1ZSIsImlzV2lkdGgiLCJjb3VudCIsIm9uQ29tcGxldGUiLCJkb25lQ291bnQiLCJfcG9zaXRpb25JdGVtIiwiZW1pdEFyZ3MiLCIkZXZlbnQiLCJ0cmlnZ2VyIiwiX2dldENvbnRhaW5lclNpemUiLCJ1bmlnbm9yZSIsImVsZW1TaXplIiwiTWF0aCIsIm1heCIsInVuc3RhbXAiLCJkaXNwYXRjaEV2ZW50IiwidGljayIsIl9tYW5hZ2VTdGFtcHMiLCJfbWFuYWdlU3RhbXAiLCJFdmVudCIsIl9nZXRCb3VuZGluZ1JlY3QiLCJfYm91bmRpbmdSZWN0IiwiaWdub3JlIiwiZ2V0SXRlbSIsImJvdW5kaW5nUmVjdCIsInRoaXNSZWN0IiwiX2ZpbmQiLCJhZGRFdmVudExpc3RlbmVyIiwiaXNSZXNpemVCb3VuZCIsInJlbW92ZUZyb20iLCJuZWVkc1Jlc2l6ZUxheW91dCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIl9nZXRFbGVtZW50T2Zmc2V0IiwicHJlcGVuZGVkIiwicHJldmlvdXNJdGVtcyIsIm9ucmVzaXplIiwicmV2ZWFsSXRlbUVsZW1lbnRzIiwiYWRkSXRlbXMiLCJhcHBlbmRlZCIsInJlbW92ZUl0ZW1zIiwidW5iaW5kUmVzaXplIiwiZ2V0SXRlbXMiLCJoaWRlSXRlbUVsZW1lbnRzIiwiTGF5b3V0IiwibXMiLCJtdWx0IiwibXNVbml0cyIsInJlbW92ZURhdGEiLCJNYXNvbnJ5IiwiZml0V2lkdGgiLCJtZWFzdXJlQ29sdW1ucyIsImhvcml6b250YWxDb2xJbmRleCIsInMiLCJfZ2V0VG9wQ29sUG9zaXRpb24iLCJjb2xTcGFuIiwibWluaW11bVkiLCJjb2wiLCJfZ2V0VG9wQ29sR3JvdXAiLCJjb2xHcm91cCIsImdyb3VwQ29sWXMiLCJjb2xZcyIsIl9nZXRIb3Jpem9udGFsQ29sUG9zaXRpb24iLCJpc092ZXIiLCJfZ2V0Q29sR3JvdXBZIiwib2Zmc2V0IiwiZmlyc3RYIiwiZmlyc3RDb2wiLCJndXR0ZXIiLCJsYXN0Q29sIiwibGFzdFgiLCJtYXRoTWV0aG9kIiwiZXhjZXNzIiwiY29scyIsIm1heFkiLCJyZW1haW5kZXIiLCJfZ2V0Q29udGFpbmVyRml0V2lkdGgiLCJjb2xQb3NpdGlvbiIsImhvcml6b250YWxPcmRlciIsInVudXNlZENvbHMiLCJzZXRIZWlnaHQiLCJzZXRNYXgiLCJwcmV2aW91c1dpZHRoIiwibWluIiwiZ3JvdXBDb3VudCIsImhhc1NpemUiLCJzdGFtcFNpemUiLCJmbG9vciIsInN0YW1wTWF4WSJdLCJtYXBwaW5ncyI6Im9PQWdCQyxTQUFTQSxFQUFRQyxHQUFBQSxtQkFBUkQsUUFBaUJFLE9BQUFDLElBRXZCRCxPQUFBLGlDQUFBLFVBQUEsU0FBQUUsR0FDQSxPQUFBSCxFQUFBRCxFQUFBSSxLQUVJLFdBQUEsb0JBQUFDLE9BQUEsWUFBQUMsUUFBQUQsVUFBQUEsT0FBQUUsUUFFSUYsT0FBQUUsUUFBT04sRUFEWEQsRUFHR1EsUUFBSSxXQU9QUixFQUFBUyxjQUFBUixFQUNBRCxFQUlIQSxFQUFBSSxRQXJCSixDQTBCR0osT0FBQSxTQUFBQSxFQUFBSSxHQWtCSyxTQUFBSyxFQUFBQyxFQUFBQyxFQUFBQyxHQWdDR0MsU0FBQUEsRUFBWUEsRUFBQUMsRUFBa0JDLEdBQzFCLElBQUFDLEVBQ0FDLEVBQWlCQyxPQUFGUixFQUFmLEtBQUFJLEVBQUEsS0F3QkEsT0F0QklLLEVBQUFBLEtBQUFBLFNBQVNULEVBQUFBLEdBR1osSUFBQVUsRUFBQVIsRUFBQU0sS0FBQUcsRUFBQVgsR0FKRCxHQUFLVSxFQUFMLENBTUEsSUFBSUUsRUFBU0YsRUFBU04sR0FNdEIsR0FBQVEsR0FBQSxLQUFBUixFQUFBUyxPQUFBLEdBQUEsQ0FNSixJQUFPUCxFQUFBQSxFQUFnQlEsTUFBQUEsRUFBWVIsR0FIL0JBLE9BQThCUSxJQUFoQlIsRUFBNEJTLEVBQVFULE9BRjlDUyxFQUFRSCxFQUFhRiwrQkFQckJFLEVBQVNGLEVBQVNOLCtDQUNqQlEsVUFnQllKLElBQWpCRixFQUE0Qk4sRUFBNUJHLEVBR0lPLFNBQUFBLEVBQUFBLEVBQUFNLEdBQ0FOLEVBQUFBLEtBQUFBLFNBQVNPLEVBQVROLEdBQ0gsSUFKREQs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RCxHQUN2QixJQUFJRSxFQUFVeEQsS0FBSzBFLE1BQU1qQixFQUFReFksS0FBSzRSLGFBRXRDMkcsR0FBV0MsRUFBUXhZLEtBQUs0UixZQUFjLEVBQUksRUFDMUMyRyxFQUFVeEQsS0FBS3NFLElBQUlyWixLQUFLMlksS0FBTyxFQUFHSixHQU1sQyxJQUFLLElBRkRtQixHQURjMVosS0FBSzhMLFdBQVcsYUFDSHFNLEVBQU9uSSxJQUFNbUksRUFBT2pJLFFBQy9Dc0osRUFBVTdULFlBQ0x6RCxFQUFJbVcsRUFBVW5XLEdBQUtxVyxFQUFTclcsSUFDakNsQyxLQUFLK1gsTUFBTTdWLEdBQUs2UyxLQUFLQyxJQUFJMEUsRUFBVzFaLEtBQUsrWCxNQUFNN1YsS0FJdkRqQixFQUFNMlQsa0JBQW9CLFdBQ3RCNVUsS0FBSzRZLEtBQU83RCxLQUFLQyxJQUFJNVMsTUFBTTJTLEtBQU0vVSxLQUFLK1gsT0FDdEMsSUFBSWxWLEdBQ0FHLE9BQVFoRCxLQUFLNFksTUFPakIsT0FKSTVZLEtBQUs4TCxXQUFXLGNBQ2hCakosRUFBS0MsTUFBUTlDLEtBQUs4WSx5QkFHZmpXLEdBR1g1QixFQUFNNlgsc0JBQXdCLFdBSTFCLElBSEEsSUFBSUcsRUFBYSxFQUViL1csRUFBSWxDLEtBQUsyWSxPQUNKelcsR0FDaUIsSUFBbEJsQyxLQUFLK1gsTUFBTTdWLElBR2YrVyxJQUdKLE9BQVFqWixLQUFLMlksS0FBT00sR0FBY2paLEtBQUs0UixZQUFjNVIsS0FBS3NZLFFBRzlEclgsRUFBTWdWLGtCQUFvQixXQUN0QixJQUFJbUQsRUFBZ0JwWixLQUFLMlIsZUFFekIsT0FEQTNSLEtBQUs2UixvQkFDRXVILEdBQWlCcFosS0FBSzJSLGdCQUcxQndGIiwiZmlsZSI6ImxpYnJhcmllcy9tYXNvbnJ5LnBrZ2QuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIE1hc29ucnkgUEFDS0FHRUQgdjQuMi4wXG4gKiBDYXNjYWRpbmcgZ3JpZCBsYXlvdXQgbGlicmFyeVxuICogaHR0cDovL21hc29ucnkuZGVzYW5kcm8uY29tXG4gKiBNSVQgTGljZW5zZVxuICogYnkgRGF2aWQgRGVTYW5kcm9cbiAqL1xuXG4vKipcbiAqIEJyaWRnZXQgbWFrZXMgalF1ZXJ5IHdpZGdldHNcbiAqIHYyLjAuMVxuICogTUlUIGxpY2Vuc2VcbiAqL1xuXG4vKiBqc2hpbnQgYnJvd3NlcjogdHJ1ZSwgc3RyaWN0OiB0cnVlLCB1bmRlZjogdHJ1ZSwgdW51c2VkOiB0cnVlICovXG5cbihmdW5jdGlvbih3aW5kb3csIGZhY3RvcnkpIHtcbiAgICAvLyB1bml2ZXJzYWwgbW9kdWxlIGRlZmluaXRpb25cbiAgICAvKmpzaGludCBzdHJpY3Q6IGZhbHNlICovXG4gICAgLyogZ2xvYmFscyBkZWZpbmUsIG1vZHVsZSwgcmVxdWlyZSAqL1xuICAgIGlmICh0eXBlb2YgZGVmaW5lID09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICAvLyBBTURcbiAgICAgICAgZGVmaW5lKCdqcXVlcnktYnJpZGdldC9qcXVlcnktYnJpZGdldCcsIFsnanF1ZXJ5J10sIGZ1bmN0aW9uKGpRdWVyeSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhY3Rvcnkod2luZG93LCBqUXVlcnkpO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgPT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgICAgLy8gQ29tbW9uSlNcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KFxuICAgICAgICAgICAgd2luZG93LFxuICAgICAgICAgICAgcmVxdWlyZSgnanF1ZXJ5JylcbiAgICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBicm93c2VyIGdsb2JhbFxuICAgICAgICB3aW5kb3cualF1ZXJ5QnJpZGdldCA9IGZhY3RvcnkoXG4gICAgICAgICAgICB3aW5kb3csXG4gICAgICAgICAgICB3aW5kb3cualF1ZXJ5XG4gICAgICAgICk7XG4gICAgfVxuXG59KHdpbmRvdywgZnVuY3Rpb24gZmFjdG9yeSh3aW5kb3csIGpRdWVyeSkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vIC0tLS0tIHV0aWxzIC0tLS0tIC8vXG5cbiAgICB2YXIgYXJyYXlTbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcblxuICAgIC8vIGhlbHBlciBmdW5jdGlvbiBmb3IgbG9nZ2luZyBlcnJvcnNcbiAgICAvLyAkLmVycm9yIGJyZWFrcyBqUXVlcnkgY2hhaW5pbmdcbiAgICB2YXIgY29uc29sZSA9IHdpbmRvdy5jb25zb2xlO1xuICAgIHZhciBsb2dFcnJvciA9IHR5cGVvZiBjb25zb2xlID09ICd1bmRlZmluZWQnID8gZnVuY3Rpb24oKSB7fSA6XG4gICAgICAgIGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7XG4gICAgICAgIH07XG5cbiAgICAvLyAtLS0tLSBqUXVlcnlCcmlkZ2V0IC0tLS0tIC8vXG5cbiAgICBmdW5jdGlvbiBqUXVlcnlCcmlkZ2V0KG5hbWVzcGFjZSwgUGx1Z2luQ2xhc3MsICQpIHtcbiAgICAgICAgJCA9ICQgfHwgalF1ZXJ5IHx8IHdpbmRvdy5qUXVlcnk7XG4gICAgICAgIGlmICghJCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYWRkIG9wdGlvbiBtZXRob2QgLT4gJCgpLnBsdWdpbignb3B0aW9uJywgey4uLn0pXG4gICAgICAgIGlmICghUGx1Z2luQ2xhc3MucHJvdG90eXBlLm9wdGlvbikge1xuICAgICAgICAgICAgLy8gb3B0aW9uIHNldHRlclxuICAgICAgICAgICAgUGx1Z2luQ2xhc3MucHJvdG90eXBlLm9wdGlvbiA9IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICAgICAgICAgICAgICAvLyBiYWlsIG91dCBpZiBub3QgYW4gb2JqZWN0XG4gICAgICAgICAgICAgICAgaWYgKCEkLmlzUGxhaW5PYmplY3Qob3B0cykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh0cnVlLCB0aGlzLm9wdGlvbnMsIG9wdHMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG1ha2UgalF1ZXJ5IHBsdWdpblxuICAgICAgICAkLmZuW25hbWVzcGFjZV0gPSBmdW5jdGlvbihhcmcwIC8qLCBhcmcxICovICkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBhcmcwID09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgLy8gbWV0aG9kIGNhbGwgJCgpLnBsdWdpbiggJ21ldGhvZE5hbWUnLCB7IG9wdGlvbnMgfSApXG4gICAgICAgICAgICAgICAgLy8gc2hpZnQgYXJndW1lbnRzIGJ5IDFcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IGFycmF5U2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXRob2RDYWxsKHRoaXMsIGFyZzAsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8ganVzdCAkKCkucGx1Z2luKHsgb3B0aW9ucyB9KVxuICAgICAgICAgICAgcGxhaW5DYWxsKHRoaXMsIGFyZzApO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gJCgpLnBsdWdpbignbWV0aG9kTmFtZScpXG4gICAgICAgIGZ1bmN0aW9uIG1ldGhvZENhbGwoJGVsZW1zLCBtZXRob2ROYW1lLCBhcmdzKSB7XG4gICAgICAgICAgICB2YXIgcmV0dXJuVmFsdWU7XG4gICAgICAgICAgICB2YXIgcGx1Z2luTWV0aG9kU3RyID0gJyQoKS4nICsgbmFtZXNwYWNlICsgJyhcIicgKyBtZXRob2ROYW1lICsgJ1wiKSc7XG5cbiAgICAgICAgICAgICRlbGVtcy5lYWNoKGZ1bmN0aW9uKGksIGVsZW0pIHtcbiAgICAgICAgICAgICAgICAvLyBnZXQgaW5zdGFuY2VcbiAgICAgICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSAkLmRhdGEoZWxlbSwgbmFtZXNwYWNlKTtcbiAgICAgICAgICAgICAgICBpZiAoIWluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ0Vycm9yKG5hbWVzcGFjZSArICcgbm90IGluaXRpYWxpemVkLiBDYW5ub3QgY2FsbCBtZXRob2RzLCBpLmUuICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luTWV0aG9kU3RyKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBtZXRob2QgPSBpbnN0YW5jZVttZXRob2ROYW1lXTtcbiAgICAgICAgICAgICAgICBpZiAoIW1ldGhvZCB8fCBtZXRob2ROYW1lLmNoYXJBdCgwKSA9PSAnXycpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nRXJyb3IocGx1Z2luTWV0aG9kU3RyICsgJyBpcyBub3QgYSB2YWxpZCBtZXRob2QnKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGFwcGx5IG1ldGhvZCwgZ2V0IHJldHVybiB2YWx1ZVxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IG1ldGhvZC5hcHBseShpbnN0YW5jZSwgYXJncyk7XG4gICAgICAgICAgICAgICAgLy8gc2V0IHJldHVybiB2YWx1ZSBpZiB2YWx1ZSBpcyByZXR1cm5lZCwgdXNlIG9ubHkgZmlyc3QgdmFsdWVcbiAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHJldHVyblZhbHVlID09PSB1bmRlZmluZWQgPyB2YWx1ZSA6IHJldHVyblZhbHVlO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiByZXR1cm5WYWx1ZSAhPT0gdW5kZWZpbmVkID8gcmV0dXJuVmFsdWUgOiAkZWxlbXM7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBwbGFpbkNhbGwoJGVsZW1zLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAkZWxlbXMuZWFjaChmdW5jdGlvbihpLCBlbGVtKSB7XG4gICAgICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gJC5kYXRhKGVsZW0sIG5hbWVzcGFjZSk7XG4gICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHNldCBvcHRpb25zICYgaW5pdFxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5vcHRpb24ob3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLl9pbml0KCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6ZSBuZXcgaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBuZXcgUGx1Z2luQ2xhc3MoZWxlbSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgICQuZGF0YShlbGVtLCBuYW1lc3BhY2UsIGluc3RhbmNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHVwZGF0ZUpRdWVyeSgkKTtcblxuICAgIH1cblxuICAgIC8vIC0tLS0tIHVwZGF0ZUpRdWVyeSAtLS0tLSAvL1xuXG4gICAgLy8gc2V0ICQuYnJpZGdldCBmb3IgdjEgYmFja3dhcmRzIGNvbXBhdGliaWxpdHlcbiAgICBmdW5jdGlvbiB1cGRhdGVKUXVlcnkoJCkge1xuICAgICAgICBpZiAoISQgfHwgKCQgJiYgJC5icmlkZ2V0KSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgICQuYnJpZGdldCA9IGpRdWVyeUJyaWRnZXQ7XG4gICAgfVxuXG4gICAgdXBkYXRlSlF1ZXJ5KGpRdWVyeSB8fCB3aW5kb3cualF1ZXJ5KTtcblxuICAgIC8vIC0tLS0tICAtLS0tLSAvL1xuXG4gICAgcmV0dXJuIGpRdWVyeUJyaWRnZXQ7XG5cbn0pKTtcblxuLyoqXG4gKiBFdkVtaXR0ZXIgdjEuMC4zXG4gKiBMaWwnIGV2ZW50IGVtaXR0ZXJcbiAqIE1JVCBMaWNlbnNlXG4gKi9cblxuLyoganNoaW50IHVudXNlZDogdHJ1ZSwgdW5kZWY6IHRydWUsIHN0cmljdDogdHJ1ZSAqL1xuXG4oZnVuY3Rpb24oZ2xvYmFsLCBmYWN0b3J5KSB7XG4gICAgLy8gdW5pdmVyc2FsIG1vZHVsZSBkZWZpbml0aW9uXG4gICAgLyoganNoaW50IHN0cmljdDogZmFsc2UgKi9cbiAgICAvKiBnbG9iYWxzIGRlZmluZSwgbW9kdWxlLCB3aW5kb3cgKi9cbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgLy8gQU1EIC0gUmVxdWlyZUpTXG4gICAgICAgIGRlZmluZSgnZXYtZW1pdHRlci9ldi1lbWl0dGVyJywgZmFjdG9yeSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgICAgIC8vIENvbW1vbkpTIC0gQnJvd3NlcmlmeSwgV2VicGFja1xuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBCcm93c2VyIGdsb2JhbHNcbiAgICAgICAgZ2xvYmFsLkV2RW1pdHRlciA9IGZhY3RvcnkoKTtcbiAgICB9XG5cbn0odHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHRoaXMsIGZ1bmN0aW9uKCkge1xuXG5cblxuICAgIGZ1bmN0aW9uIEV2RW1pdHRlcigpIHt9XG5cbiAgICB2YXIgcHJvdG8gPSBFdkVtaXR0ZXIucHJvdG90eXBlO1xuXG4gICAgcHJvdG8ub24gPSBmdW5jdGlvbihldmVudE5hbWUsIGxpc3RlbmVyKSB7XG4gICAgICAgIGlmICghZXZlbnROYW1lIHx8ICFsaXN0ZW5lcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIHNldCBldmVudHMgaGFzaFxuICAgICAgICB2YXIgZXZlbnRzID0gdGhpcy5fZXZlbnRzID0gdGhpcy5fZXZlbnRzIHx8IHt9O1xuICAgICAgICAvLyBzZXQgbGlzdGVuZXJzIGFycmF5XG4gICAgICAgIHZhciBsaXN0ZW5lcnMgPSBldmVudHNbZXZlbnROYW1lXSA9IGV2ZW50c1tldmVudE5hbWVdIHx8IFtdO1xuICAgICAgICAvLyBvbmx5IGFkZCBvbmNlXG4gICAgICAgIGlmIChsaXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcikgPT0gLTEpIHtcbiAgICAgICAgICAgIGxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBwcm90by5vbmNlID0gZnVuY3Rpb24oZXZlbnROYW1lLCBsaXN0ZW5lcikge1xuICAgICAgICBpZiAoIWV2ZW50TmFtZSB8fCAhbGlzdGVuZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBhZGQgZXZlbnRcbiAgICAgICAgdGhpcy5vbihldmVudE5hbWUsIGxpc3RlbmVyKTtcbiAgICAgICAgLy8gc2V0IG9uY2UgZmxhZ1xuICAgICAgICAvLyBzZXQgb25jZUV2ZW50cyBoYXNoXG4gICAgICAgIHZhciBvbmNlRXZlbnRzID0gdGhpcy5fb25jZUV2ZW50cyA9IHRoaXMuX29uY2VFdmVudHMgfHwge307XG4gICAgICAgIC8vIHNldCBvbmNlTGlzdGVuZXJzIG9iamVjdFxuICAgICAgICB2YXIgb25jZUxpc3RlbmVycyA9IG9uY2VFdmVudHNbZXZlbnROYW1lXSA9IG9uY2VFdmVudHNbZXZlbnROYW1lXSB8fCB7fTtcbiAgICAgICAgLy8gc2V0IGZsYWdcbiAgICAgICAgb25jZUxpc3RlbmVyc1tsaXN0ZW5lcl0gPSB0cnVlO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBwcm90by5vZmYgPSBmdW5jdGlvbihldmVudE5hbWUsIGxpc3RlbmVyKSB7XG4gICAgICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHMgJiYgdGhpcy5fZXZlbnRzW2V2ZW50TmFtZV07XG4gICAgICAgIGlmICghbGlzdGVuZXJzIHx8ICFsaXN0ZW5lcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGluZGV4ID0gbGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpO1xuICAgICAgICBpZiAoaW5kZXggIT0gLTEpIHtcbiAgICAgICAgICAgIGxpc3RlbmVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIHByb3RvLmVtaXRFdmVudCA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgYXJncykge1xuICAgICAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzICYmIHRoaXMuX2V2ZW50c1tldmVudE5hbWVdO1xuICAgICAgICBpZiAoIWxpc3RlbmVycyB8fCAhbGlzdGVuZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgdmFyIGxpc3RlbmVyID0gbGlzdGVuZXJzW2ldO1xuICAgICAgICBhcmdzID0gYXJncyB8fCBbXTtcbiAgICAgICAgLy8gb25jZSBzdHVmZlxuICAgICAgICB2YXIgb25jZUxpc3RlbmVycyA9IHRoaXMuX29uY2VFdmVudHMgJiYgdGhpcy5fb25jZUV2ZW50c1tldmVudE5hbWVdO1xuXG4gICAgICAgIHdoaWxlIChsaXN0ZW5lcikge1xuICAgICAgICAgICAgdmFyIGlzT25jZSA9IG9uY2VMaXN0ZW5lcnMgJiYgb25jZUxpc3RlbmVyc1tsaXN0ZW5lcl07XG4gICAgICAgICAgICBpZiAoaXNPbmNlKSB7XG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGxpc3RlbmVyXG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGJlZm9yZSB0cmlnZ2VyIHRvIHByZXZlbnQgcmVjdXJzaW9uXG4gICAgICAgICAgICAgICAgdGhpcy5vZmYoZXZlbnROYW1lLCBsaXN0ZW5lcik7XG4gICAgICAgICAgICAgICAgLy8gdW5zZXQgb25jZSBmbGFnXG4gICAgICAgICAgICAgICAgZGVsZXRlIG9uY2VMaXN0ZW5lcnNbbGlzdGVuZXJdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdHJpZ2dlciBsaXN0ZW5lclxuICAgICAgICAgICAgbGlzdGVuZXIuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgICAgICAvLyBnZXQgbmV4dCBsaXN0ZW5lclxuICAgICAgICAgICAgaSArPSBpc09uY2UgPyAwIDogMTtcbiAgICAgICAgICAgIGxpc3RlbmVyID0gbGlzdGVuZXJzW2ldO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIHJldHVybiBFdkVtaXR0ZXI7XG5cbn0pKTtcblxuLyohXG4gKiBnZXRTaXplIHYyLjAuMlxuICogbWVhc3VyZSBzaXplIG9mIGVsZW1lbnRzXG4gKiBNSVQgbGljZW5zZVxuICovXG5cbi8qanNoaW50IGJyb3dzZXI6IHRydWUsIHN0cmljdDogdHJ1ZSwgdW5kZWY6IHRydWUsIHVudXNlZDogdHJ1ZSAqL1xuLypnbG9iYWwgZGVmaW5lOiBmYWxzZSwgbW9kdWxlOiBmYWxzZSwgY29uc29sZTogZmFsc2UgKi9cblxuKGZ1bmN0aW9uKHdpbmRvdywgZmFjdG9yeSkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGlmICh0eXBlb2YgZGVmaW5lID09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICAvLyBBTURcbiAgICAgICAgZGVmaW5lKCdnZXQtc2l6ZS9nZXQtc2l6ZScsIFtdLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWN0b3J5KCk7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgICAgICAvLyBDb21tb25KU1xuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBicm93c2VyIGdsb2JhbFxuICAgICAgICB3aW5kb3cuZ2V0U2l6ZSA9IGZhY3RvcnkoKTtcbiAgICB9XG5cbn0pKHdpbmRvdywgZnVuY3Rpb24gZmFjdG9yeSgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBoZWxwZXJzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbiAgICAvLyBnZXQgYSBudW1iZXIgZnJvbSBhIHN0cmluZywgbm90IGEgcGVyY2VudGFnZVxuICAgIGZ1bmN0aW9uIGdldFN0eWxlU2l6ZSh2YWx1ZSkge1xuICAgICAgICB2YXIgbnVtID0gcGFyc2VGbG9hdCh2YWx1ZSk7XG4gICAgICAgIC8vIG5vdCBhIHBlcmNlbnQgbGlrZSAnMTAwJScsIGFuZCBhIG51bWJlclxuICAgICAgICB2YXIgaXNWYWxpZCA9IHZhbHVlLmluZGV4T2YoJyUnKSA9PSAtMSAmJiAhaXNOYU4obnVtKTtcbiAgICAgICAgcmV0dXJuIGlzVmFsaWQgJiYgbnVtO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG5vb3AoKSB7fVxuXG4gICAgdmFyIGxvZ0Vycm9yID0gdHlwZW9mIGNvbnNvbGUgPT0gJ3VuZGVmaW5lZCcgPyBub29wIDpcbiAgICAgICAgZnVuY3Rpb24obWVzc2FnZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihtZXNzYWdlKTtcbiAgICAgICAgfTtcblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIG1lYXN1cmVtZW50cyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG4gICAgdmFyIG1lYXN1cmVtZW50cyA9IFtcbiAgICAgICAgJ3BhZGRpbmdMZWZ0JyxcbiAgICAgICAgJ3BhZGRpbmdSaWdodCcsXG4gICAgICAgICdwYWRkaW5nVG9wJyxcbiAgICAgICAgJ3BhZGRpbmdCb3R0b20nLFxuICAgICAgICAnbWFyZ2luTGVmdCcsXG4gICAgICAgICdtYXJnaW5SaWdodCcsXG4gICAgICAgICdtYXJnaW5Ub3AnLFxuICAgICAgICAnbWFyZ2luQm90dG9tJyxcbiAgICAgICAgJ2JvcmRlckxlZnRXaWR0aCcsXG4gICAgICAgICdib3JkZXJSaWdodFdpZHRoJyxcbiAgICAgICAgJ2JvcmRlclRvcFdpZHRoJyxcbiAgICAgICAgJ2JvcmRlckJvdHRvbVdpZHRoJ1xuICAgIF07XG5cbiAgICB2YXIgbWVhc3VyZW1lbnRzTGVuZ3RoID0gbWVhc3VyZW1lbnRzLmxlbmd0aDtcblxuICAgIGZ1bmN0aW9uIGdldFplcm9TaXplKCkge1xuICAgICAgICB2YXIgc2l6ZSA9IHtcbiAgICAgICAgICAgIHdpZHRoOiAwLFxuICAgICAgICAgICAgaGVpZ2h0OiAwLFxuICAgICAgICAgICAgaW5uZXJXaWR0aDogMCxcbiAgICAgICAgICAgIGlubmVySGVpZ2h0OiAwLFxuICAgICAgICAgICAgb3V0ZXJXaWR0aDogMCxcbiAgICAgICAgICAgIG91dGVySGVpZ2h0OiAwXG4gICAgICAgIH07XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVhc3VyZW1lbnRzTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBtZWFzdXJlbWVudCA9IG1lYXN1cmVtZW50c1tpXTtcbiAgICAgICAgICAgIHNpemVbbWVhc3VyZW1lbnRdID0gMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2l6ZTtcbiAgICB9XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBnZXRTdHlsZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG4gICAgLyoqXG4gICAgICogZ2V0U3R5bGUsIGdldCBzdHlsZSBvZiBlbGVtZW50LCBjaGVjayBmb3IgRmlyZWZveCBidWdcbiAgICAgKiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD01NDgzOTdcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRTdHlsZShlbGVtKSB7XG4gICAgICAgIHZhciBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWxlbSk7XG4gICAgICAgIGlmICghc3R5bGUpIHtcbiAgICAgICAgICAgIGxvZ0Vycm9yKCdTdHlsZSByZXR1cm5lZCAnICsgc3R5bGUgK1xuICAgICAgICAgICAgICAgICcuIEFyZSB5b3UgcnVubmluZyB0aGlzIGNvZGUgaW4gYSBoaWRkZW4gaWZyYW1lIG9uIEZpcmVmb3g/ICcgK1xuICAgICAgICAgICAgICAgICdTZWUgaHR0cDovL2JpdC5seS9nZXRzaXplYnVnMScpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHlsZTtcbiAgICB9XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBzZXR1cCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG4gICAgdmFyIGlzU2V0dXAgPSBmYWxzZTtcblxuICAgIHZhciBpc0JveFNpemVPdXRlcjtcblxuICAgIC8qKlxuICAgICAqIHNldHVwXG4gICAgICogY2hlY2sgaXNCb3hTaXplck91dGVyXG4gICAgICogZG8gb24gZmlyc3QgZ2V0U2l6ZSgpIHJhdGhlciB0aGFuIG9uIHBhZ2UgbG9hZCBmb3IgRmlyZWZveCBidWdcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzZXR1cCgpIHtcbiAgICAgICAgLy8gc2V0dXAgb25jZVxuICAgICAgICBpZiAoaXNTZXR1cCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlzU2V0dXAgPSB0cnVlO1xuXG4gICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGJveCBzaXppbmcgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuICAgICAgICAvKipcbiAgICAgICAgICogV2ViS2l0IG1lYXN1cmVzIHRoZSBvdXRlci13aWR0aCBvbiBzdHlsZS53aWR0aCBvbiBib3JkZXItYm94IGVsZW1zXG4gICAgICAgICAqIElFICYgRmlyZWZveDwyOSBtZWFzdXJlcyB0aGUgaW5uZXItd2lkdGhcbiAgICAgICAgICovXG4gICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgZGl2LnN0eWxlLndpZHRoID0gJzIwMHB4JztcbiAgICAgICAgZGl2LnN0eWxlLnBhZGRpbmcgPSAnMXB4IDJweCAzcHggNHB4JztcbiAgICAgICAgZGl2LnN0eWxlLmJvcmRlclN0eWxlID0gJ3NvbGlkJztcbiAgICAgICAgZGl2LnN0eWxlLmJvcmRlcldpZHRoID0gJzFweCAycHggM3B4IDRweCc7XG4gICAgICAgIGRpdi5zdHlsZS5ib3hTaXppbmcgPSAnYm9yZGVyLWJveCc7XG5cbiAgICAgICAgdmFyIGJvZHkgPSBkb2N1bWVudC5ib2R5IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgICAgICAgYm9keS5hcHBlbmRDaGlsZChkaXYpO1xuICAgICAgICB2YXIgc3R5bGUgPSBnZXRTdHlsZShkaXYpO1xuXG4gICAgICAgIGdldFNpemUuaXNCb3hTaXplT3V0ZXIgPSBpc0JveFNpemVPdXRlciA9IGdldFN0eWxlU2l6ZShzdHlsZS53aWR0aCkgPT0gMjAwO1xuICAgICAgICBib2R5LnJlbW92ZUNoaWxkKGRpdik7XG5cbiAgICB9XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBnZXRTaXplIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbiAgICBmdW5jdGlvbiBnZXRTaXplKGVsZW0pIHtcbiAgICAgICAgc2V0dXAoKTtcblxuICAgICAgICAvLyB1c2UgcXVlcnlTZWxldG9yIGlmIGVsZW0gaXMgc3RyaW5nXG4gICAgICAgIGlmICh0eXBlb2YgZWxlbSA9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgZWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWxlbSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBkbyBub3QgcHJvY2VlZCBvbiBub24tb2JqZWN0c1xuICAgICAgICBpZiAoIWVsZW0gfHwgdHlwZW9mIGVsZW0gIT0gJ29iamVjdCcgfHwgIWVsZW0ubm9kZVR5cGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzdHlsZSA9IGdldFN0eWxlKGVsZW0pO1xuXG4gICAgICAgIC8vIGlmIGhpZGRlbiwgZXZlcnl0aGluZyBpcyAwXG4gICAgICAgIGlmIChzdHlsZS5kaXNwbGF5ID09ICdub25lJykge1xuICAgICAgICAgICAgcmV0dXJuIGdldFplcm9TaXplKCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc2l6ZSA9IHt9O1xuICAgICAgICBzaXplLndpZHRoID0gZWxlbS5vZmZzZXRXaWR0aDtcbiAgICAgICAgc2l6ZS5oZWlnaHQgPSBlbGVtLm9mZnNldEhlaWdodDtcblxuICAgICAgICB2YXIgaXNCb3JkZXJCb3ggPSBzaXplLmlzQm9yZGVyQm94ID0gc3R5bGUuYm94U2l6aW5nID09ICdib3JkZXItYm94JztcblxuICAgICAgICAvLyBnZXQgYWxsIG1lYXN1cmVtZW50c1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lYXN1cmVtZW50c0xlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgbWVhc3VyZW1lbnQgPSBtZWFzdXJlbWVudHNbaV07XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBzdHlsZVttZWFzdXJlbWVudF07XG4gICAgICAgICAgICB2YXIgbnVtID0gcGFyc2VGbG9hdCh2YWx1ZSk7XG4gICAgICAgICAgICAvLyBhbnkgJ2F1dG8nLCAnbWVkaXVtJyB2YWx1ZSB3aWxsIGJlIDBcbiAgICAgICAgICAgIHNpemVbbWVhc3VyZW1lbnRdID0gIWlzTmFOKG51bSkgPyBudW0gOiAwO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHBhZGRpbmdXaWR0aCA9IHNpemUucGFkZGluZ0xlZnQgKyBzaXplLnBhZGRpbmdSaWdodDtcbiAgICAgICAgdmFyIHBhZGRpbmdIZWlnaHQgPSBzaXplLnBhZGRpbmdUb3AgKyBzaXplLnBhZGRpbmdCb3R0b207XG4gICAgICAgIHZhciBtYXJnaW5XaWR0aCA9IHNpemUubWFyZ2luTGVmdCArIHNpemUubWFyZ2luUmlnaHQ7XG4gICAgICAgIHZhciBtYXJnaW5IZWlnaHQgPSBzaXplLm1hcmdpblRvcCArIHNpemUubWFyZ2luQm90dG9tO1xuICAgICAgICB2YXIgYm9yZGVyV2lkdGggPSBzaXplLmJvcmRlckxlZnRXaWR0aCArIHNpemUuYm9yZGVyUmlnaHRXaWR0aDtcbiAgICAgICAgdmFyIGJvcmRlckhlaWdodCA9IHNpemUuYm9yZGVyVG9wV2lkdGggKyBzaXplLmJvcmRlckJvdHRvbVdpZHRoO1xuXG4gICAgICAgIHZhciBpc0JvcmRlckJveFNpemVPdXRlciA9IGlzQm9yZGVyQm94ICYmIGlzQm94U2l6ZU91dGVyO1xuXG4gICAgICAgIC8vIG92ZXJ3cml0ZSB3aWR0aCBhbmQgaGVpZ2h0IGlmIHdlIGNhbiBnZXQgaXQgZnJvbSBzdHlsZVxuICAgICAgICB2YXIgc3R5bGVXaWR0aCA9IGdldFN0eWxlU2l6ZShzdHlsZS53aWR0aCk7XG4gICAgICAgIGlmIChzdHlsZVdpZHRoICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgc2l6ZS53aWR0aCA9IHN0eWxlV2lkdGggK1xuICAgICAgICAgICAgICAgIC8vIGFkZCBwYWRkaW5nIGFuZCBib3JkZXIgdW5sZXNzIGl0J3MgYWxyZWFkeSBpbmNsdWRpbmcgaXRcbiAgICAgICAgICAgICAgICAoaXNCb3JkZXJCb3hTaXplT3V0ZXIgPyAwIDogcGFkZGluZ1dpZHRoICsgYm9yZGVyV2lkdGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHN0eWxlSGVpZ2h0ID0gZ2V0U3R5bGVTaXplKHN0eWxlLmhlaWdodCk7XG4gICAgICAgIGlmIChzdHlsZUhlaWdodCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHNpemUuaGVpZ2h0ID0gc3R5bGVIZWlnaHQgK1xuICAgICAgICAgICAgICAgIC8vIGFkZCBwYWRkaW5nIGFuZCBib3JkZXIgdW5sZXNzIGl0J3MgYWxyZWFkeSBpbmNsdWRpbmcgaXRcbiAgICAgICAgICAgICAgICAoaXNCb3JkZXJCb3hTaXplT3V0ZXIgPyAwIDogcGFkZGluZ0hlaWdodCArIGJvcmRlckhlaWdodCk7XG4gICAgICAgIH1cblxuICAgICAgICBzaXplLmlubmVyV2lkdGggPSBzaXplLndpZHRoIC0gKHBhZGRpbmdXaWR0aCArIGJvcmRlcldpZHRoKTtcbiAgICAgICAgc2l6ZS5pbm5lckhlaWdodCA9IHNpemUuaGVpZ2h0IC0gKHBhZGRpbmdIZWlnaHQgKyBib3JkZXJIZWlnaHQpO1xuXG4gICAgICAgIHNpemUub3V0ZXJXaWR0aCA9IHNpemUud2lkdGggKyBtYXJnaW5XaWR0aDtcbiAgICAgICAgc2l6ZS5vdXRlckhlaWdodCA9IHNpemUuaGVpZ2h0ICsgbWFyZ2luSGVpZ2h0O1xuXG4gICAgICAgIHJldHVybiBzaXplO1xuICAgIH1cblxuICAgIHJldHVybiBnZXRTaXplO1xuXG59KTtcblxuLyoqXG4gKiBtYXRjaGVzU2VsZWN0b3IgdjIuMC4yXG4gKiBtYXRjaGVzU2VsZWN0b3IoIGVsZW1lbnQsICcuc2VsZWN0b3InIClcbiAqIE1JVCBsaWNlbnNlXG4gKi9cblxuLypqc2hpbnQgYnJvd3NlcjogdHJ1ZSwgc3RyaWN0OiB0cnVlLCB1bmRlZjogdHJ1ZSwgdW51c2VkOiB0cnVlICovXG5cbihmdW5jdGlvbih3aW5kb3csIGZhY3RvcnkpIHtcbiAgICAvKmdsb2JhbCBkZWZpbmU6IGZhbHNlLCBtb2R1bGU6IGZhbHNlICovXG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIC8vIHVuaXZlcnNhbCBtb2R1bGUgZGVmaW5pdGlvblxuICAgIGlmICh0eXBlb2YgZGVmaW5lID09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICAvLyBBTURcbiAgICAgICAgZGVmaW5lKCdkZXNhbmRyby1tYXRjaGVzLXNlbGVjdG9yL21hdGNoZXMtc2VsZWN0b3InLCBmYWN0b3J5KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgPT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgICAgLy8gQ29tbW9uSlNcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gYnJvd3NlciBnbG9iYWxcbiAgICAgICAgd2luZG93Lm1hdGNoZXNTZWxlY3RvciA9IGZhY3RvcnkoKTtcbiAgICB9XG5cbn0od2luZG93LCBmdW5jdGlvbiBmYWN0b3J5KCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBtYXRjaGVzTWV0aG9kID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgRWxlbVByb3RvID0gd2luZG93LkVsZW1lbnQucHJvdG90eXBlO1xuICAgICAgICAvLyBjaGVjayBmb3IgdGhlIHN0YW5kYXJkIG1ldGhvZCBuYW1lIGZpcnN0XG4gICAgICAgIGlmIChFbGVtUHJvdG8ubWF0Y2hlcykge1xuICAgICAgICAgICAgcmV0dXJuICdtYXRjaGVzJztcbiAgICAgICAgfVxuICAgICAgICAvLyBjaGVjayB1bi1wcmVmaXhlZFxuICAgICAgICBpZiAoRWxlbVByb3RvLm1hdGNoZXNTZWxlY3Rvcikge1xuICAgICAgICAgICAgcmV0dXJuICdtYXRjaGVzU2VsZWN0b3InO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNoZWNrIHZlbmRvciBwcmVmaXhlc1xuICAgICAgICB2YXIgcHJlZml4ZXMgPSBbJ3dlYmtpdCcsICdtb3onLCAnbXMnLCAnbyddO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJlZml4ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBwcmVmaXggPSBwcmVmaXhlc1tpXTtcbiAgICAgICAgICAgIHZhciBtZXRob2QgPSBwcmVmaXggKyAnTWF0Y2hlc1NlbGVjdG9yJztcbiAgICAgICAgICAgIGlmIChFbGVtUHJvdG9bbWV0aG9kXSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXRob2Q7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KSgpO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIG1hdGNoZXNTZWxlY3RvcihlbGVtLCBzZWxlY3Rvcikge1xuICAgICAgICByZXR1cm4gZWxlbVttYXRjaGVzTWV0aG9kXShzZWxlY3Rvcik7XG4gICAgfTtcblxufSkpO1xuXG4vKipcbiAqIEZpenp5IFVJIHV0aWxzIHYyLjAuNFxuICogTUlUIGxpY2Vuc2VcbiAqL1xuXG4vKmpzaGludCBicm93c2VyOiB0cnVlLCB1bmRlZjogdHJ1ZSwgdW51c2VkOiB0cnVlLCBzdHJpY3Q6IHRydWUgKi9cblxuKGZ1bmN0aW9uKHdpbmRvdywgZmFjdG9yeSkge1xuICAgIC8vIHVuaXZlcnNhbCBtb2R1bGUgZGVmaW5pdGlvblxuICAgIC8qanNoaW50IHN0cmljdDogZmFsc2UgKi9cbiAgICAvKmdsb2JhbHMgZGVmaW5lLCBtb2R1bGUsIHJlcXVpcmUgKi9cblxuICAgIGlmICh0eXBlb2YgZGVmaW5lID09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICAvLyBBTURcbiAgICAgICAgZGVmaW5lKCdmaXp6eS11aS11dGlscy91dGlscycsIFtcbiAgICAgICAgICAgICdkZXNhbmRyby1tYXRjaGVzLXNlbGVjdG9yL21hdGNoZXMtc2VsZWN0b3InXG4gICAgICAgIF0sIGZ1bmN0aW9uKG1hdGNoZXNTZWxlY3Rvcikge1xuICAgICAgICAgICAgcmV0dXJuIGZhY3Rvcnkod2luZG93LCBtYXRjaGVzU2VsZWN0b3IpO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgPT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgICAgLy8gQ29tbW9uSlNcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KFxuICAgICAgICAgICAgd2luZG93LFxuICAgICAgICAgICAgcmVxdWlyZSgnZGVzYW5kcm8tbWF0Y2hlcy1zZWxlY3RvcicpXG4gICAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gYnJvd3NlciBnbG9iYWxcbiAgICAgICAgd2luZG93LmZpenp5VUlVdGlscyA9IGZhY3RvcnkoXG4gICAgICAgICAgICB3aW5kb3csXG4gICAgICAgICAgICB3aW5kb3cubWF0Y2hlc1NlbGVjdG9yXG4gICAgICAgICk7XG4gICAgfVxuXG59KHdpbmRvdywgZnVuY3Rpb24gZmFjdG9yeSh3aW5kb3csIG1hdGNoZXNTZWxlY3Rvcikge1xuXG5cblxuICAgIHZhciB1dGlscyA9IHt9O1xuXG4gICAgLy8gLS0tLS0gZXh0ZW5kIC0tLS0tIC8vXG5cbiAgICAvLyBleHRlbmRzIG9iamVjdHNcbiAgICB1dGlscy5leHRlbmQgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgICAgIGZvciAodmFyIHByb3AgaW4gYikge1xuICAgICAgICAgICAgYVtwcm9wXSA9IGJbcHJvcF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGE7XG4gICAgfTtcblxuICAgIC8vIC0tLS0tIG1vZHVsbyAtLS0tLSAvL1xuXG4gICAgdXRpbHMubW9kdWxvID0gZnVuY3Rpb24obnVtLCBkaXYpIHtcbiAgICAgICAgcmV0dXJuICgobnVtICUgZGl2KSArIGRpdikgJSBkaXY7XG4gICAgfTtcblxuICAgIC8vIC0tLS0tIG1ha2VBcnJheSAtLS0tLSAvL1xuXG4gICAgLy8gdHVybiBlbGVtZW50IG9yIG5vZGVMaXN0IGludG8gYW4gYXJyYXlcbiAgICB1dGlscy5tYWtlQXJyYXkgPSBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgdmFyIGFyeSA9IFtdO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgICAgICAgICAvLyB1c2Ugb2JqZWN0IGlmIGFscmVhZHkgYW4gYXJyYXlcbiAgICAgICAgICAgIGFyeSA9IG9iajtcbiAgICAgICAgfSBlbHNlIGlmIChvYmogJiYgdHlwZW9mIG9iaiA9PSAnb2JqZWN0JyAmJlxuICAgICAgICAgICAgdHlwZW9mIG9iai5sZW5ndGggPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIC8vIGNvbnZlcnQgbm9kZUxpc3QgdG8gYXJyYXlcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJ5LnB1c2gob2JqW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGFycmF5IG9mIHNpbmdsZSBpbmRleFxuICAgICAgICAgICAgYXJ5LnB1c2gob2JqKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXJ5O1xuICAgIH07XG5cbiAgICAvLyAtLS0tLSByZW1vdmVGcm9tIC0tLS0tIC8vXG5cbiAgICB1dGlscy5yZW1vdmVGcm9tID0gZnVuY3Rpb24oYXJ5LCBvYmopIHtcbiAgICAgICAgdmFyIGluZGV4ID0gYXJ5LmluZGV4T2Yob2JqKTtcbiAgICAgICAgaWYgKGluZGV4ICE9IC0xKSB7XG4gICAgICAgICAgICBhcnkuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyAtLS0tLSBnZXRQYXJlbnQgLS0tLS0gLy9cblxuICAgIHV0aWxzLmdldFBhcmVudCA9IGZ1bmN0aW9uKGVsZW0sIHNlbGVjdG9yKSB7XG4gICAgICAgIHdoaWxlIChlbGVtICE9IGRvY3VtZW50LmJvZHkpIHtcbiAgICAgICAgICAgIGVsZW0gPSBlbGVtLnBhcmVudE5vZGU7XG4gICAgICAgICAgICBpZiAobWF0Y2hlc1NlbGVjdG9yKGVsZW0sIHNlbGVjdG9yKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIC0tLS0tIGdldFF1ZXJ5RWxlbWVudCAtLS0tLSAvL1xuXG4gICAgLy8gdXNlIGVsZW1lbnQgYXMgc2VsZWN0b3Igc3RyaW5nXG4gICAgdXRpbHMuZ2V0UXVlcnlFbGVtZW50ID0gZnVuY3Rpb24oZWxlbSkge1xuICAgICAgICBpZiAodHlwZW9mIGVsZW0gPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsZW0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbGVtO1xuICAgIH07XG5cbiAgICAvLyAtLS0tLSBoYW5kbGVFdmVudCAtLS0tLSAvL1xuXG4gICAgLy8gZW5hYmxlIC5vbnR5cGUgdG8gdHJpZ2dlciBmcm9tIC5hZGRFdmVudExpc3RlbmVyKCBlbGVtLCAndHlwZScgKVxuICAgIHV0aWxzLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgdmFyIG1ldGhvZCA9ICdvbicgKyBldmVudC50eXBlO1xuICAgICAgICBpZiAodGhpc1ttZXRob2RdKSB7XG4gICAgICAgICAgICB0aGlzW21ldGhvZF0oZXZlbnQpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIC0tLS0tIGZpbHRlckZpbmRFbGVtZW50cyAtLS0tLSAvL1xuXG4gICAgdXRpbHMuZmlsdGVyRmluZEVsZW1lbnRzID0gZnVuY3Rpb24oZWxlbXMsIHNlbGVjdG9yKSB7XG4gICAgICAgIC8vIG1ha2UgYXJyYXkgb2YgZWxlbXNcbiAgICAgICAgZWxlbXMgPSB1dGlscy5tYWtlQXJyYXkoZWxlbXMpO1xuICAgICAgICB2YXIgZmZFbGVtcyA9IFtdO1xuXG4gICAgICAgIGVsZW1zLmZvckVhY2goZnVuY3Rpb24oZWxlbSkge1xuICAgICAgICAgICAgLy8gY2hlY2sgdGhhdCBlbGVtIGlzIGFuIGFjdHVhbCBlbGVtZW50XG4gICAgICAgICAgICBpZiAoIShlbGVtIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gYWRkIGVsZW0gaWYgbm8gc2VsZWN0b3JcbiAgICAgICAgICAgIGlmICghc2VsZWN0b3IpIHtcbiAgICAgICAgICAgICAgICBmZkVsZW1zLnB1c2goZWxlbSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZmlsdGVyICYgZmluZCBpdGVtcyBpZiB3ZSBoYXZlIGEgc2VsZWN0b3JcbiAgICAgICAgICAgIC8vIGZpbHRlclxuICAgICAgICAgICAgaWYgKG1hdGNoZXNTZWxlY3RvcihlbGVtLCBzZWxlY3RvcikpIHtcbiAgICAgICAgICAgICAgICBmZkVsZW1zLnB1c2goZWxlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBmaW5kIGNoaWxkcmVuXG4gICAgICAgICAgICB2YXIgY2hpbGRFbGVtcyA9IGVsZW0ucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gICAgICAgICAgICAvLyBjb25jYXQgY2hpbGRFbGVtcyB0byBmaWx0ZXJGb3VuZCBhcnJheVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZEVsZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZmZFbGVtcy5wdXNoKGNoaWxkRWxlbXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gZmZFbGVtcztcbiAgICB9O1xuXG4gICAgLy8gLS0tLS0gZGVib3VuY2VNZXRob2QgLS0tLS0gLy9cblxuICAgIHV0aWxzLmRlYm91bmNlTWV0aG9kID0gZnVuY3Rpb24oX2NsYXNzLCBtZXRob2ROYW1lLCB0aHJlc2hvbGQpIHtcbiAgICAgICAgLy8gb3JpZ2luYWwgbWV0aG9kXG4gICAgICAgIHZhciBtZXRob2QgPSBfY2xhc3MucHJvdG90eXBlW21ldGhvZE5hbWVdO1xuICAgICAgICB2YXIgdGltZW91dE5hbWUgPSBtZXRob2ROYW1lICsgJ1RpbWVvdXQnO1xuXG4gICAgICAgIF9jbGFzcy5wcm90b3R5cGVbbWV0aG9kTmFtZV0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aW1lb3V0ID0gdGhpc1t0aW1lb3V0TmFtZV07XG4gICAgICAgICAgICBpZiAodGltZW91dCkge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdGhpc1t0aW1lb3V0TmFtZV0gPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIG1ldGhvZC5hcHBseShfdGhpcywgYXJncyk7XG4gICAgICAgICAgICAgICAgZGVsZXRlIF90aGlzW3RpbWVvdXROYW1lXTtcbiAgICAgICAgICAgIH0sIHRocmVzaG9sZCB8fCAxMDApO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICAvLyAtLS0tLSBkb2NSZWFkeSAtLS0tLSAvL1xuXG4gICAgdXRpbHMuZG9jUmVhZHkgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICB2YXIgcmVhZHlTdGF0ZSA9IGRvY3VtZW50LnJlYWR5U3RhdGU7XG4gICAgICAgIGlmIChyZWFkeVN0YXRlID09ICdjb21wbGV0ZScgfHwgcmVhZHlTdGF0ZSA9PSAnaW50ZXJhY3RpdmUnKSB7XG4gICAgICAgICAgICAvLyBkbyBhc3luYyB0byBhbGxvdyBmb3Igb3RoZXIgc2NyaXB0cyB0byBydW4uIG1ldGFmaXp6eS9mbGlja2l0eSM0NDFcbiAgICAgICAgICAgIHNldFRpbWVvdXQoY2FsbGJhY2spO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGNhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyAtLS0tLSBodG1sSW5pdCAtLS0tLSAvL1xuXG4gICAgLy8gaHR0cDovL2phbWVzcm9iZXJ0cy5uYW1lL2Jsb2cvMjAxMC8wMi8yMi9zdHJpbmctZnVuY3Rpb25zLWZvci1qYXZhc2NyaXB0LXRyaW0tdG8tY2FtZWwtY2FzZS10by1kYXNoZWQtYW5kLXRvLXVuZGVyc2NvcmUvXG4gICAgdXRpbHMudG9EYXNoZWQgPSBmdW5jdGlvbihzdHIpIHtcbiAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC8oLikoW0EtWl0pL2csIGZ1bmN0aW9uKG1hdGNoLCAkMSwgJDIpIHtcbiAgICAgICAgICAgIHJldHVybiAkMSArICctJyArICQyO1xuICAgICAgICB9KS50b0xvd2VyQ2FzZSgpO1xuICAgIH07XG5cbiAgICB2YXIgY29uc29sZSA9IHdpbmRvdy5jb25zb2xlO1xuICAgIC8qKlxuICAgICAqIGFsbG93IHVzZXIgdG8gaW5pdGlhbGl6ZSBjbGFzc2VzIHZpYSBbZGF0YS1uYW1lc3BhY2VdIG9yIC5qcy1uYW1lc3BhY2UgY2xhc3NcbiAgICAgKiBodG1sSW5pdCggV2lkZ2V0LCAnd2lkZ2V0TmFtZScgKVxuICAgICAqIG9wdGlvbnMgYXJlIHBhcnNlZCBmcm9tIGRhdGEtbmFtZXNwYWNlLW9wdGlvbnNcbiAgICAgKi9cbiAgICB1dGlscy5odG1sSW5pdCA9IGZ1bmN0aW9uKFdpZGdldENsYXNzLCBuYW1lc3BhY2UpIHtcbiAgICAgICAgdXRpbHMuZG9jUmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgZGFzaGVkTmFtZXNwYWNlID0gdXRpbHMudG9EYXNoZWQobmFtZXNwYWNlKTtcbiAgICAgICAgICAgIHZhciBkYXRhQXR0ciA9ICdkYXRhLScgKyBkYXNoZWROYW1lc3BhY2U7XG4gICAgICAgICAgICB2YXIgZGF0YUF0dHJFbGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1snICsgZGF0YUF0dHIgKyAnXScpO1xuICAgICAgICAgICAgdmFyIGpzRGFzaEVsZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLScgKyBkYXNoZWROYW1lc3BhY2UpO1xuICAgICAgICAgICAgdmFyIGVsZW1zID0gdXRpbHMubWFrZUFycmF5KGRhdGFBdHRyRWxlbXMpXG4gICAgICAgICAgICAgICAgLmNvbmNhdCh1dGlscy5tYWtlQXJyYXkoanNEYXNoRWxlbXMpKTtcbiAgICAgICAgICAgIHZhciBkYXRhT3B0aW9uc0F0dHIgPSBkYXRhQXR0ciArICctb3B0aW9ucyc7XG4gICAgICAgICAgICB2YXIgalF1ZXJ5ID0gd2luZG93LmpRdWVyeTtcblxuICAgICAgICAgICAgZWxlbXMuZm9yRWFjaChmdW5jdGlvbihlbGVtKSB7XG4gICAgICAgICAgICAgICAgdmFyIGF0dHIgPSBlbGVtLmdldEF0dHJpYnV0ZShkYXRhQXR0cikgfHxcbiAgICAgICAgICAgICAgICAgICAgZWxlbS5nZXRBdHRyaWJ1dGUoZGF0YU9wdGlvbnNBdHRyKTtcbiAgICAgICAgICAgICAgICB2YXIgb3B0aW9ucztcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0gYXR0ciAmJiBKU09OLnBhcnNlKGF0dHIpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGxvZyBlcnJvciwgZG8gbm90IGluaXRpYWxpemVcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnNvbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgJyArIGRhdGFBdHRyICsgJyBvbiAnICsgZWxlbS5jbGFzc05hbWUgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc6ICcgKyBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBpbml0aWFsaXplXG4gICAgICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gbmV3IFdpZGdldENsYXNzKGVsZW0sIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIC8vIG1ha2UgYXZhaWxhYmxlIHZpYSAkKCkuZGF0YSgnbmFtZXNwYWNlJylcbiAgICAgICAgICAgICAgICBpZiAoalF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeS5kYXRhKGVsZW0sIG5hbWVzcGFjZSwgaW5zdGFuY2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvLyAtLS0tLSAgLS0tLS0gLy9cblxuICAgIHJldHVybiB1dGlscztcblxufSkpO1xuXG4vKipcbiAqIE91dGxheWVyIEl0ZW1cbiAqL1xuXG4oZnVuY3Rpb24od2luZG93LCBmYWN0b3J5KSB7XG4gICAgLy8gdW5pdmVyc2FsIG1vZHVsZSBkZWZpbml0aW9uXG4gICAgLyoganNoaW50IHN0cmljdDogZmFsc2UgKi9cbiAgICAvKiBnbG9iYWxzIGRlZmluZSwgbW9kdWxlLCByZXF1aXJlICovXG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIC8vIEFNRCAtIFJlcXVpcmVKU1xuICAgICAgICBkZWZpbmUoJ291dGxheWVyL2l0ZW0nLCBbXG4gICAgICAgICAgICAgICAgJ2V2LWVtaXR0ZXIvZXYtZW1pdHRlcicsXG4gICAgICAgICAgICAgICAgJ2dldC1zaXplL2dldC1zaXplJ1xuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGZhY3RvcnlcbiAgICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgPT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgICAgLy8gQ29tbW9uSlMgLSBCcm93c2VyaWZ5LCBXZWJwYWNrXG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShcbiAgICAgICAgICAgIHJlcXVpcmUoJ2V2LWVtaXR0ZXInKSxcbiAgICAgICAgICAgIHJlcXVpcmUoJ2dldC1zaXplJylcbiAgICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBicm93c2VyIGdsb2JhbFxuICAgICAgICB3aW5kb3cuT3V0bGF5ZXIgPSB7fTtcbiAgICAgICAgd2luZG93Lk91dGxheWVyLkl0ZW0gPSBmYWN0b3J5KFxuICAgICAgICAgICAgd2luZG93LkV2RW1pdHRlcixcbiAgICAgICAgICAgIHdpbmRvdy5nZXRTaXplXG4gICAgICAgICk7XG4gICAgfVxuXG59KHdpbmRvdywgZnVuY3Rpb24gZmFjdG9yeShFdkVtaXR0ZXIsIGdldFNpemUpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICAvLyAtLS0tLSBoZWxwZXJzIC0tLS0tIC8vXG5cbiAgICBmdW5jdGlvbiBpc0VtcHR5T2JqKG9iaikge1xuICAgICAgICBmb3IgKHZhciBwcm9wIGluIG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHByb3AgPSBudWxsO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBDU1MzIHN1cHBvcnQgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuXG4gICAgdmFyIGRvY0VsZW1TdHlsZSA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZTtcblxuICAgIHZhciB0cmFuc2l0aW9uUHJvcGVydHkgPSB0eXBlb2YgZG9jRWxlbVN0eWxlLnRyYW5zaXRpb24gPT0gJ3N0cmluZycgP1xuICAgICAgICAndHJhbnNpdGlvbicgOiAnV2Via2l0VHJhbnNpdGlvbic7XG4gICAgdmFyIHRyYW5zZm9ybVByb3BlcnR5ID0gdHlwZW9mIGRvY0VsZW1TdHlsZS50cmFuc2Zvcm0gPT0gJ3N0cmluZycgP1xuICAgICAgICAndHJhbnNmb3JtJyA6ICdXZWJraXRUcmFuc2Zvcm0nO1xuXG4gICAgdmFyIHRyYW5zaXRpb25FbmRFdmVudCA9IHtcbiAgICAgICAgV2Via2l0VHJhbnNpdGlvbjogJ3dlYmtpdFRyYW5zaXRpb25FbmQnLFxuICAgICAgICB0cmFuc2l0aW9uOiAndHJhbnNpdGlvbmVuZCdcbiAgICB9W3RyYW5zaXRpb25Qcm9wZXJ0eV07XG5cbiAgICAvLyBjYWNoZSBhbGwgdmVuZG9yIHByb3BlcnRpZXMgdGhhdCBjb3VsZCBoYXZlIHZlbmRvciBwcmVmaXhcbiAgICB2YXIgdmVuZG9yUHJvcGVydGllcyA9IHtcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2Zvcm1Qcm9wZXJ0eSxcbiAgICAgICAgdHJhbnNpdGlvbjogdHJhbnNpdGlvblByb3BlcnR5LFxuICAgICAgICB0cmFuc2l0aW9uRHVyYXRpb246IHRyYW5zaXRpb25Qcm9wZXJ0eSArICdEdXJhdGlvbicsXG4gICAgICAgIHRyYW5zaXRpb25Qcm9wZXJ0eTogdHJhbnNpdGlvblByb3BlcnR5ICsgJ1Byb3BlcnR5JyxcbiAgICAgICAgdHJhbnNpdGlvbkRlbGF5OiB0cmFuc2l0aW9uUHJvcGVydHkgKyAnRGVsYXknXG4gICAgfTtcblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEl0ZW0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuICAgIGZ1bmN0aW9uIEl0ZW0oZWxlbWVudCwgbGF5b3V0KSB7XG4gICAgICAgIGlmICghZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgLy8gcGFyZW50IGxheW91dCBjbGFzcywgaS5lLiBNYXNvbnJ5LCBJc290b3BlLCBvciBQYWNrZXJ5XG4gICAgICAgIHRoaXMubGF5b3V0ID0gbGF5b3V0O1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0ge1xuICAgICAgICAgICAgeDogMCxcbiAgICAgICAgICAgIHk6IDBcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl9jcmVhdGUoKTtcbiAgICB9XG5cbiAgICAvLyBpbmhlcml0IEV2RW1pdHRlclxuICAgIHZhciBwcm90byA9IEl0ZW0ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFdkVtaXR0ZXIucHJvdG90eXBlKTtcbiAgICBwcm90by5jb25zdHJ1Y3RvciA9IEl0ZW07XG5cbiAgICBwcm90by5fY3JlYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIHRyYW5zaXRpb24gb2JqZWN0c1xuICAgICAgICB0aGlzLl90cmFuc24gPSB7XG4gICAgICAgICAgICBpbmdQcm9wZXJ0aWVzOiB7fSxcbiAgICAgICAgICAgIGNsZWFuOiB7fSxcbiAgICAgICAgICAgIG9uRW5kOiB7fVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuY3NzKHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnXG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvLyB0cmlnZ2VyIHNwZWNpZmllZCBoYW5kbGVyIGZvciBldmVudCB0eXBlXG4gICAgcHJvdG8uaGFuZGxlRXZlbnQgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICB2YXIgbWV0aG9kID0gJ29uJyArIGV2ZW50LnR5cGU7XG4gICAgICAgIGlmICh0aGlzW21ldGhvZF0pIHtcbiAgICAgICAgICAgIHRoaXNbbWV0aG9kXShldmVudCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcHJvdG8uZ2V0U2l6ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnNpemUgPSBnZXRTaXplKHRoaXMuZWxlbWVudCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGFwcGx5IENTUyBzdHlsZXMgdG8gZWxlbWVudFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzdHlsZVxuICAgICAqL1xuICAgIHByb3RvLmNzcyA9IGZ1bmN0aW9uKHN0eWxlKSB7XG4gICAgICAgIHZhciBlbGVtU3R5bGUgPSB0aGlzLmVsZW1lbnQuc3R5bGU7XG5cbiAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBzdHlsZSkge1xuICAgICAgICAgICAgLy8gdXNlIHZlbmRvciBwcm9wZXJ0eSBpZiBhdmFpbGFibGVcbiAgICAgICAgICAgIHZhciBzdXBwb3J0ZWRQcm9wID0gdmVuZG9yUHJvcGVydGllc1twcm9wXSB8fCBwcm9wO1xuICAgICAgICAgICAgZWxlbVN0eWxlW3N1cHBvcnRlZFByb3BdID0gc3R5bGVbcHJvcF07XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gbWVhc3VyZSBwb3NpdGlvbiwgYW5kIHNldHMgaXRcbiAgICBwcm90by5nZXRQb3NpdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIHZhciBpc09yaWdpbkxlZnQgPSB0aGlzLmxheW91dC5fZ2V0T3B0aW9uKCdvcmlnaW5MZWZ0Jyk7XG4gICAgICAgIHZhciBpc09yaWdpblRvcCA9IHRoaXMubGF5b3V0Ll9nZXRPcHRpb24oJ29yaWdpblRvcCcpO1xuICAgICAgICB2YXIgeFZhbHVlID0gc3R5bGVbaXNPcmlnaW5MZWZ0ID8gJ2xlZnQnIDogJ3JpZ2h0J107XG4gICAgICAgIHZhciB5VmFsdWUgPSBzdHlsZVtpc09yaWdpblRvcCA/ICd0b3AnIDogJ2JvdHRvbSddO1xuICAgICAgICAvLyBjb252ZXJ0IHBlcmNlbnQgdG8gcGl4ZWxzXG4gICAgICAgIHZhciBsYXlvdXRTaXplID0gdGhpcy5sYXlvdXQuc2l6ZTtcbiAgICAgICAgdmFyIHggPSB4VmFsdWUuaW5kZXhPZignJScpICE9IC0xID9cbiAgICAgICAgICAgIChwYXJzZUZsb2F0KHhWYWx1ZSkgLyAxMDApICogbGF5b3V0U2l6ZS53aWR0aCA6IHBhcnNlSW50KHhWYWx1ZSwgMTApO1xuICAgICAgICB2YXIgeSA9IHlWYWx1ZS5pbmRleE9mKCclJykgIT0gLTEgP1xuICAgICAgICAgICAgKHBhcnNlRmxvYXQoeVZhbHVlKSAvIDEwMCkgKiBsYXlvdXRTaXplLmhlaWdodCA6IHBhcnNlSW50KHlWYWx1ZSwgMTApO1xuXG4gICAgICAgIC8vIGNsZWFuIHVwICdhdXRvJyBvciBvdGhlciBub24taW50ZWdlciB2YWx1ZXNcbiAgICAgICAgeCA9IGlzTmFOKHgpID8gMCA6IHg7XG4gICAgICAgIHkgPSBpc05hTih5KSA/IDAgOiB5O1xuICAgICAgICAvLyByZW1vdmUgcGFkZGluZyBmcm9tIG1lYXN1cmVtZW50XG4gICAgICAgIHggLT0gaXNPcmlnaW5MZWZ0ID8gbGF5b3V0U2l6ZS5wYWRkaW5nTGVmdCA6IGxheW91dFNpemUucGFkZGluZ1JpZ2h0O1xuICAgICAgICB5IC09IGlzT3JpZ2luVG9wID8gbGF5b3V0U2l6ZS5wYWRkaW5nVG9wIDogbGF5b3V0U2l6ZS5wYWRkaW5nQm90dG9tO1xuXG4gICAgICAgIHRoaXMucG9zaXRpb24ueCA9IHg7XG4gICAgICAgIHRoaXMucG9zaXRpb24ueSA9IHk7XG4gICAgfTtcblxuICAgIC8vIHNldCBzZXR0bGVkIHBvc2l0aW9uLCBhcHBseSBwYWRkaW5nXG4gICAgcHJvdG8ubGF5b3V0UG9zaXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGxheW91dFNpemUgPSB0aGlzLmxheW91dC5zaXplO1xuICAgICAgICB2YXIgc3R5bGUgPSB7fTtcbiAgICAgICAgdmFyIGlzT3JpZ2luTGVmdCA9IHRoaXMubGF5b3V0Ll9nZXRPcHRpb24oJ29yaWdpbkxlZnQnKTtcbiAgICAgICAgdmFyIGlzT3JpZ2luVG9wID0gdGhpcy5sYXlvdXQuX2dldE9wdGlvbignb3JpZ2luVG9wJyk7XG5cbiAgICAgICAgLy8geFxuICAgICAgICB2YXIgeFBhZGRpbmcgPSBpc09yaWdpbkxlZnQgPyAncGFkZGluZ0xlZnQnIDogJ3BhZGRpbmdSaWdodCc7XG4gICAgICAgIHZhciB4UHJvcGVydHkgPSBpc09yaWdpbkxlZnQgPyAnbGVmdCcgOiAncmlnaHQnO1xuICAgICAgICB2YXIgeFJlc2V0UHJvcGVydHkgPSBpc09yaWdpbkxlZnQgPyAncmlnaHQnIDogJ2xlZnQnO1xuXG4gICAgICAgIHZhciB4ID0gdGhpcy5wb3NpdGlvbi54ICsgbGF5b3V0U2l6ZVt4UGFkZGluZ107XG4gICAgICAgIC8vIHNldCBpbiBwZXJjZW50YWdlIG9yIHBpeGVsc1xuICAgICAgICBzdHlsZVt4UHJvcGVydHldID0gdGhpcy5nZXRYVmFsdWUoeCk7XG4gICAgICAgIC8vIHJlc2V0IG90aGVyIHByb3BlcnR5XG4gICAgICAgIHN0eWxlW3hSZXNldFByb3BlcnR5XSA9ICcnO1xuXG4gICAgICAgIC8vIHlcbiAgICAgICAgdmFyIHlQYWRkaW5nID0gaXNPcmlnaW5Ub3AgPyAncGFkZGluZ1RvcCcgOiAncGFkZGluZ0JvdHRvbSc7XG4gICAgICAgIHZhciB5UHJvcGVydHkgPSBpc09yaWdpblRvcCA/ICd0b3AnIDogJ2JvdHRvbSc7XG4gICAgICAgIHZhciB5UmVzZXRQcm9wZXJ0eSA9IGlzT3JpZ2luVG9wID8gJ2JvdHRvbScgOiAndG9wJztcblxuICAgICAgICB2YXIgeSA9IHRoaXMucG9zaXRpb24ueSArIGxheW91dFNpemVbeVBhZGRpbmddO1xuICAgICAgICAvLyBzZXQgaW4gcGVyY2VudGFnZSBvciBwaXhlbHNcbiAgICAgICAgc3R5bGVbeVByb3BlcnR5XSA9IHRoaXMuZ2V0WVZhbHVlKHkpO1xuICAgICAgICAvLyByZXNldCBvdGhlciBwcm9wZXJ0eVxuICAgICAgICBzdHlsZVt5UmVzZXRQcm9wZXJ0eV0gPSAnJztcblxuICAgICAgICB0aGlzLmNzcyhzdHlsZSk7XG4gICAgICAgIHRoaXMuZW1pdEV2ZW50KCdsYXlvdXQnLCBbdGhpc10pO1xuICAgIH07XG5cbiAgICBwcm90by5nZXRYVmFsdWUgPSBmdW5jdGlvbih4KSB7XG4gICAgICAgIHZhciBpc0hvcml6b250YWwgPSB0aGlzLmxheW91dC5fZ2V0T3B0aW9uKCdob3Jpem9udGFsJyk7XG4gICAgICAgIHJldHVybiB0aGlzLmxheW91dC5vcHRpb25zLnBlcmNlbnRQb3NpdGlvbiAmJiAhaXNIb3Jpem9udGFsID9cbiAgICAgICAgICAgICgoeCAvIHRoaXMubGF5b3V0LnNpemUud2lkdGgpICogMTAwKSArICclJyA6IHggKyAncHgnO1xuICAgIH07XG5cbiAgICBwcm90by5nZXRZVmFsdWUgPSBmdW5jdGlvbih5KSB7XG4gICAgICAgIHZhciBpc0hvcml6b250YWwgPSB0aGlzLmxheW91dC5fZ2V0T3B0aW9uKCdob3Jpem9udGFsJyk7XG4gICAgICAgIHJldHVybiB0aGlzLmxheW91dC5vcHRpb25zLnBlcmNlbnRQb3NpdGlvbiAmJiBpc0hvcml6b250YWwgP1xuICAgICAgICAgICAgKCh5IC8gdGhpcy5sYXlvdXQuc2l6ZS5oZWlnaHQpICogMTAwKSArICclJyA6IHkgKyAncHgnO1xuICAgIH07XG5cbiAgICBwcm90by5fdHJhbnNpdGlvblRvID0gZnVuY3Rpb24oeCwgeSkge1xuICAgICAgICB0aGlzLmdldFBvc2l0aW9uKCk7XG4gICAgICAgIC8vIGdldCBjdXJyZW50IHggJiB5IGZyb20gdG9wL2xlZnRcbiAgICAgICAgdmFyIGN1clggPSB0aGlzLnBvc2l0aW9uLng7XG4gICAgICAgIHZhciBjdXJZID0gdGhpcy5wb3NpdGlvbi55O1xuXG4gICAgICAgIHZhciBjb21wYXJlWCA9IHBhcnNlSW50KHgsIDEwKTtcbiAgICAgICAgdmFyIGNvbXBhcmVZID0gcGFyc2VJbnQoeSwgMTApO1xuICAgICAgICB2YXIgZGlkTm90TW92ZSA9IGNvbXBhcmVYID09PSB0aGlzLnBvc2l0aW9uLnggJiYgY29tcGFyZVkgPT09IHRoaXMucG9zaXRpb24ueTtcblxuICAgICAgICAvLyBzYXZlIGVuZCBwb3NpdGlvblxuICAgICAgICB0aGlzLnNldFBvc2l0aW9uKHgsIHkpO1xuXG4gICAgICAgIC8vIGlmIGRpZCBub3QgbW92ZSBhbmQgbm90IHRyYW5zaXRpb25pbmcsIGp1c3QgZ28gdG8gbGF5b3V0XG4gICAgICAgIGlmIChkaWROb3RNb3ZlICYmICF0aGlzLmlzVHJhbnNpdGlvbmluZykge1xuICAgICAgICAgICAgdGhpcy5sYXlvdXRQb3NpdGlvbigpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHRyYW5zWCA9IHggLSBjdXJYO1xuICAgICAgICB2YXIgdHJhbnNZID0geSAtIGN1clk7XG4gICAgICAgIHZhciB0cmFuc2l0aW9uU3R5bGUgPSB7fTtcbiAgICAgICAgdHJhbnNpdGlvblN0eWxlLnRyYW5zZm9ybSA9IHRoaXMuZ2V0VHJhbnNsYXRlKHRyYW5zWCwgdHJhbnNZKTtcblxuICAgICAgICB0aGlzLnRyYW5zaXRpb24oe1xuICAgICAgICAgICAgdG86IHRyYW5zaXRpb25TdHlsZSxcbiAgICAgICAgICAgIG9uVHJhbnNpdGlvbkVuZDoge1xuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdGhpcy5sYXlvdXRQb3NpdGlvblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzQ2xlYW5pbmc6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHByb3RvLmdldFRyYW5zbGF0ZSA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICAgICAgLy8gZmxpcCBjb29yaWRpbmF0ZXMgaWYgb3JpZ2luIG9uIHJpZ2h0IG9yIGJvdHRvbVxuICAgICAgICB2YXIgaXNPcmlnaW5MZWZ0ID0gdGhpcy5sYXlvdXQuX2dldE9wdGlvbignb3JpZ2luTGVmdCcpO1xuICAgICAgICB2YXIgaXNPcmlnaW5Ub3AgPSB0aGlzLmxheW91dC5fZ2V0T3B0aW9uKCdvcmlnaW5Ub3AnKTtcbiAgICAgICAgeCA9IGlzT3JpZ2luTGVmdCA/IHggOiAteDtcbiAgICAgICAgeSA9IGlzT3JpZ2luVG9wID8geSA6IC15O1xuICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZTNkKCcgKyB4ICsgJ3B4LCAnICsgeSArICdweCwgMCknO1xuICAgIH07XG5cbiAgICAvLyBub24gdHJhbnNpdGlvbiArIHRyYW5zZm9ybSBzdXBwb3J0XG4gICAgcHJvdG8uZ29UbyA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICAgICAgdGhpcy5zZXRQb3NpdGlvbih4LCB5KTtcbiAgICAgICAgdGhpcy5sYXlvdXRQb3NpdGlvbigpO1xuICAgIH07XG5cbiAgICBwcm90by5tb3ZlVG8gPSBwcm90by5fdHJhbnNpdGlvblRvO1xuXG4gICAgcHJvdG8uc2V0UG9zaXRpb24gPSBmdW5jdGlvbih4LCB5KSB7XG4gICAgICAgIHRoaXMucG9zaXRpb24ueCA9IHBhcnNlSW50KHgsIDEwKTtcbiAgICAgICAgdGhpcy5wb3NpdGlvbi55ID0gcGFyc2VJbnQoeSwgMTApO1xuICAgIH07XG5cbiAgICAvLyAtLS0tLSB0cmFuc2l0aW9uIC0tLS0tIC8vXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc3R5bGUgLSBDU1NcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvblRyYW5zaXRpb25FbmRcbiAgICAgKi9cblxuICAgIC8vIG5vbiB0cmFuc2l0aW9uLCBqdXN0IHRyaWdnZXIgY2FsbGJhY2tcbiAgICBwcm90by5fbm9uVHJhbnNpdGlvbiA9IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgdGhpcy5jc3MoYXJncy50byk7XG4gICAgICAgIGlmIChhcmdzLmlzQ2xlYW5pbmcpIHtcbiAgICAgICAgICAgIHRoaXMuX3JlbW92ZVN0eWxlcyhhcmdzLnRvKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBwcm9wIGluIGFyZ3Mub25UcmFuc2l0aW9uRW5kKSB7XG4gICAgICAgICAgICBhcmdzLm9uVHJhbnNpdGlvbkVuZFtwcm9wXS5jYWxsKHRoaXMpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIHByb3BlciB0cmFuc2l0aW9uXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGFyZ3MgLSBhcmd1bWVudHNcbiAgICAgKiAgIEBwYXJhbSB7T2JqZWN0fSB0byAtIHN0eWxlIHRvIHRyYW5zaXRpb24gdG9cbiAgICAgKiAgIEBwYXJhbSB7T2JqZWN0fSBmcm9tIC0gc3R5bGUgdG8gc3RhcnQgdHJhbnNpdGlvbiBmcm9tXG4gICAgICogICBAcGFyYW0ge0Jvb2xlYW59IGlzQ2xlYW5pbmcgLSByZW1vdmVzIHRyYW5zaXRpb24gc3R5bGVzIGFmdGVyIHRyYW5zaXRpb25cbiAgICAgKiAgIEBwYXJhbSB7RnVuY3Rpb259IG9uVHJhbnNpdGlvbkVuZCAtIGNhbGxiYWNrXG4gICAgICovXG4gICAgcHJvdG8udHJhbnNpdGlvbiA9IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgLy8gcmVkaXJlY3QgdG8gbm9uVHJhbnNpdGlvbiBpZiBubyB0cmFuc2l0aW9uIGR1cmF0aW9uXG4gICAgICAgIGlmICghcGFyc2VGbG9hdCh0aGlzLmxheW91dC5vcHRpb25zLnRyYW5zaXRpb25EdXJhdGlvbikpIHtcbiAgICAgICAgICAgIHRoaXMuX25vblRyYW5zaXRpb24oYXJncyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgX3RyYW5zaXRpb24gPSB0aGlzLl90cmFuc247XG4gICAgICAgIC8vIGtlZXAgdHJhY2sgb2Ygb25UcmFuc2l0aW9uRW5kIGNhbGxiYWNrIGJ5IGNzcyBwcm9wZXJ0eVxuICAgICAgICBmb3IgKHZhciBwcm9wIGluIGFyZ3Mub25UcmFuc2l0aW9uRW5kKSB7XG4gICAgICAgICAgICBfdHJhbnNpdGlvbi5vbkVuZFtwcm9wXSA9IGFyZ3Mub25UcmFuc2l0aW9uRW5kW3Byb3BdO1xuICAgICAgICB9XG4gICAgICAgIC8vIGtlZXAgdHJhY2sgb2YgcHJvcGVydGllcyB0aGF0IGFyZSB0cmFuc2l0aW9uaW5nXG4gICAgICAgIGZvciAocHJvcCBpbiBhcmdzLnRvKSB7XG4gICAgICAgICAgICBfdHJhbnNpdGlvbi5pbmdQcm9wZXJ0aWVzW3Byb3BdID0gdHJ1ZTtcbiAgICAgICAgICAgIC8vIGtlZXAgdHJhY2sgb2YgcHJvcGVydGllcyB0byBjbGVhbiB1cCB3aGVuIHRyYW5zaXRpb24gaXMgZG9uZVxuICAgICAgICAgICAgaWYgKGFyZ3MuaXNDbGVhbmluZykge1xuICAgICAgICAgICAgICAgIF90cmFuc2l0aW9uLmNsZWFuW3Byb3BdID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHNldCBmcm9tIHN0eWxlc1xuICAgICAgICBpZiAoYXJncy5mcm9tKSB7XG4gICAgICAgICAgICB0aGlzLmNzcyhhcmdzLmZyb20pO1xuICAgICAgICAgICAgLy8gZm9yY2UgcmVkcmF3LiBodHRwOi8vYmxvZy5hbGV4bWFjY2F3LmNvbS9jc3MtdHJhbnNpdGlvbnNcbiAgICAgICAgICAgIHZhciBoID0gdGhpcy5lbGVtZW50Lm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgIC8vIGhhY2sgZm9yIEpTSGludCB0byBodXNoIGFib3V0IHVudXNlZCB2YXJcbiAgICAgICAgICAgIGggPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIC8vIGVuYWJsZSB0cmFuc2l0aW9uXG4gICAgICAgIHRoaXMuZW5hYmxlVHJhbnNpdGlvbihhcmdzLnRvKTtcbiAgICAgICAgLy8gc2V0IHN0eWxlcyB0aGF0IGFyZSB0cmFuc2l0aW9uaW5nXG4gICAgICAgIHRoaXMuY3NzKGFyZ3MudG8pO1xuXG4gICAgICAgIHRoaXMuaXNUcmFuc2l0aW9uaW5nID0gdHJ1ZTtcblxuICAgIH07XG5cbiAgICAvLyBkYXNoIGJlZm9yZSBhbGwgY2FwIGxldHRlcnMsIGluY2x1ZGluZyBmaXJzdCBmb3JcbiAgICAvLyBXZWJraXRUcmFuc2Zvcm0gPT4gLXdlYmtpdC10cmFuc2Zvcm1cbiAgICBmdW5jdGlvbiB0b0Rhc2hlZEFsbChzdHIpIHtcbiAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC8oW0EtWl0pL2csIGZ1bmN0aW9uKCQxKSB7XG4gICAgICAgICAgICByZXR1cm4gJy0nICsgJDEudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgdmFyIHRyYW5zaXRpb25Qcm9wcyA9ICdvcGFjaXR5LCcgKyB0b0Rhc2hlZEFsbCh0cmFuc2Zvcm1Qcm9wZXJ0eSk7XG5cbiAgICBwcm90by5lbmFibGVUcmFuc2l0aW9uID0gZnVuY3Rpb24oIC8qIHN0eWxlICovICkge1xuICAgICAgICAvLyBIQUNLIGNoYW5naW5nIHRyYW5zaXRpb25Qcm9wZXJ0eSBkdXJpbmcgYSB0cmFuc2l0aW9uXG4gICAgICAgIC8vIHdpbGwgY2F1c2UgdHJhbnNpdGlvbiB0byBqdW1wXG4gICAgICAgIGlmICh0aGlzLmlzVHJhbnNpdGlvbmluZykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gbWFrZSBgdHJhbnNpdGlvbjogZm9vLCBiYXIsIGJhemAgZnJvbSBzdHlsZSBvYmplY3RcbiAgICAgICAgLy8gSEFDSyB1bi1jb21tZW50IHRoaXMgd2hlbiBlbmFibGVUcmFuc2l0aW9uIGNhbiB3b3JrXG4gICAgICAgIC8vIHdoaWxlIGEgdHJhbnNpdGlvbiBpcyBoYXBwZW5pbmdcbiAgICAgICAgLy8gdmFyIHRyYW5zaXRpb25WYWx1ZXMgPSBbXTtcbiAgICAgICAgLy8gZm9yICggdmFyIHByb3AgaW4gc3R5bGUgKSB7XG4gICAgICAgIC8vICAgLy8gZGFzaC1pZnkgY2FtZWxDYXNlZCBwcm9wZXJ0aWVzIGxpa2UgV2Via2l0VHJhbnNpdGlvblxuICAgICAgICAvLyAgIHByb3AgPSB2ZW5kb3JQcm9wZXJ0aWVzWyBwcm9wIF0gfHwgcHJvcDtcbiAgICAgICAgLy8gICB0cmFuc2l0aW9uVmFsdWVzLnB1c2goIHRvRGFzaGVkQWxsKCBwcm9wICkgKTtcbiAgICAgICAgLy8gfVxuICAgICAgICAvLyBtdW5nZSBudW1iZXIgdG8gbWlsbGlzZWNvbmQsIHRvIG1hdGNoIHN0YWdnZXJcbiAgICAgICAgdmFyIGR1cmF0aW9uID0gdGhpcy5sYXlvdXQub3B0aW9ucy50cmFuc2l0aW9uRHVyYXRpb247XG4gICAgICAgIGR1cmF0aW9uID0gdHlwZW9mIGR1cmF0aW9uID09ICdudW1iZXInID8gZHVyYXRpb24gKyAnbXMnIDogZHVyYXRpb247XG4gICAgICAgIC8vIGVuYWJsZSB0cmFuc2l0aW9uIHN0eWxlc1xuICAgICAgICB0aGlzLmNzcyh7XG4gICAgICAgICAgICB0cmFuc2l0aW9uUHJvcGVydHk6IHRyYW5zaXRpb25Qcm9wcyxcbiAgICAgICAgICAgIHRyYW5zaXRpb25EdXJhdGlvbjogZHVyYXRpb24sXG4gICAgICAgICAgICB0cmFuc2l0aW9uRGVsYXk6IHRoaXMuc3RhZ2dlckRlbGF5IHx8IDBcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGxpc3RlbiBmb3IgdHJhbnNpdGlvbiBlbmQgZXZlbnRcbiAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIodHJhbnNpdGlvbkVuZEV2ZW50LCB0aGlzLCBmYWxzZSk7XG4gICAgfTtcblxuICAgIC8vIC0tLS0tIGV2ZW50cyAtLS0tLSAvL1xuXG4gICAgcHJvdG8ub253ZWJraXRUcmFuc2l0aW9uRW5kID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgdGhpcy5vbnRyYW5zaXRpb25lbmQoZXZlbnQpO1xuICAgIH07XG5cbiAgICBwcm90by5vbm90cmFuc2l0aW9uZW5kID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgdGhpcy5vbnRyYW5zaXRpb25lbmQoZXZlbnQpO1xuICAgIH07XG5cbiAgICAvLyBwcm9wZXJ0aWVzIHRoYXQgSSBtdW5nZSB0byBtYWtlIG15IGxpZmUgZWFzaWVyXG4gICAgdmFyIGRhc2hlZFZlbmRvclByb3BlcnRpZXMgPSB7XG4gICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6ICd0cmFuc2Zvcm0nXG4gICAgfTtcblxuICAgIHByb3RvLm9udHJhbnNpdGlvbmVuZCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIC8vIGRpc3JlZ2FyZCBidWJibGVkIGV2ZW50cyBmcm9tIGNoaWxkcmVuXG4gICAgICAgIGlmIChldmVudC50YXJnZXQgIT09IHRoaXMuZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBfdHJhbnNpdGlvbiA9IHRoaXMuX3RyYW5zbjtcbiAgICAgICAgLy8gZ2V0IHByb3BlcnR5IG5hbWUgb2YgdHJhbnNpdGlvbmVkIHByb3BlcnR5LCBjb252ZXJ0IHRvIHByZWZpeC1mcmVlXG4gICAgICAgIHZhciBwcm9wZXJ0eU5hbWUgPSBkYXNoZWRWZW5kb3JQcm9wZXJ0aWVzW2V2ZW50LnByb3BlcnR5TmFtZV0gfHwgZXZlbnQucHJvcGVydHlOYW1lO1xuXG4gICAgICAgIC8vIHJlbW92ZSBwcm9wZXJ0eSB0aGF0IGhhcyBjb21wbGV0ZWQgdHJhbnNpdGlvbmluZ1xuICAgICAgICBkZWxldGUgX3RyYW5zaXRpb24uaW5nUHJvcGVydGllc1twcm9wZXJ0eU5hbWVdO1xuICAgICAgICAvLyBjaGVjayBpZiBhbnkgcHJvcGVydGllcyBhcmUgc3RpbGwgdHJhbnNpdGlvbmluZ1xuICAgICAgICBpZiAoaXNFbXB0eU9iaihfdHJhbnNpdGlvbi5pbmdQcm9wZXJ0aWVzKSkge1xuICAgICAgICAgICAgLy8gYWxsIHByb3BlcnRpZXMgaGF2ZSBjb21wbGV0ZWQgdHJhbnNpdGlvbmluZ1xuICAgICAgICAgICAgdGhpcy5kaXNhYmxlVHJhbnNpdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNsZWFuIHN0eWxlXG4gICAgICAgIGlmIChwcm9wZXJ0eU5hbWUgaW4gX3RyYW5zaXRpb24uY2xlYW4pIHtcbiAgICAgICAgICAgIC8vIGNsZWFuIHVwIHN0eWxlXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGVbZXZlbnQucHJvcGVydHlOYW1lXSA9ICcnO1xuICAgICAgICAgICAgZGVsZXRlIF90cmFuc2l0aW9uLmNsZWFuW3Byb3BlcnR5TmFtZV07XG4gICAgICAgIH1cbiAgICAgICAgLy8gdHJpZ2dlciBvblRyYW5zaXRpb25FbmQgY2FsbGJhY2tcbiAgICAgICAgaWYgKHByb3BlcnR5TmFtZSBpbiBfdHJhbnNpdGlvbi5vbkVuZCkge1xuICAgICAgICAgICAgdmFyIG9uVHJhbnNpdGlvbkVuZCA9IF90cmFuc2l0aW9uLm9uRW5kW3Byb3BlcnR5TmFtZV07XG4gICAgICAgICAgICBvblRyYW5zaXRpb25FbmQuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIGRlbGV0ZSBfdHJhbnNpdGlvbi5vbkVuZFtwcm9wZXJ0eU5hbWVdO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5lbWl0RXZlbnQoJ3RyYW5zaXRpb25FbmQnLCBbdGhpc10pO1xuICAgIH07XG5cbiAgICBwcm90by5kaXNhYmxlVHJhbnNpdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnJlbW92ZVRyYW5zaXRpb25TdHlsZXMoKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIodHJhbnNpdGlvbkVuZEV2ZW50LCB0aGlzLCBmYWxzZSk7XG4gICAgICAgIHRoaXMuaXNUcmFuc2l0aW9uaW5nID0gZmFsc2U7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIHJlbW92ZXMgc3R5bGUgcHJvcGVydHkgZnJvbSBlbGVtZW50XG4gICAgICogQHBhcmFtIHtPYmplY3R9IHN0eWxlXG4gICAgICoqL1xuICAgIHByb3RvLl9yZW1vdmVTdHlsZXMgPSBmdW5jdGlvbihzdHlsZSkge1xuICAgICAgICAvLyBjbGVhbiB1cCB0cmFuc2l0aW9uIHN0eWxlc1xuICAgICAgICB2YXIgY2xlYW5TdHlsZSA9IHt9O1xuICAgICAgICBmb3IgKHZhciBwcm9wIGluIHN0eWxlKSB7XG4gICAgICAgICAgICBjbGVhblN0eWxlW3Byb3BdID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jc3MoY2xlYW5TdHlsZSk7XG4gICAgfTtcblxuICAgIHZhciBjbGVhblRyYW5zaXRpb25TdHlsZSA9IHtcbiAgICAgICAgdHJhbnNpdGlvblByb3BlcnR5OiAnJyxcbiAgICAgICAgdHJhbnNpdGlvbkR1cmF0aW9uOiAnJyxcbiAgICAgICAgdHJhbnNpdGlvbkRlbGF5OiAnJ1xuICAgIH07XG5cbiAgICBwcm90by5yZW1vdmVUcmFuc2l0aW9uU3R5bGVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIHJlbW92ZSB0cmFuc2l0aW9uXG4gICAgICAgIHRoaXMuY3NzKGNsZWFuVHJhbnNpdGlvblN0eWxlKTtcbiAgICB9O1xuXG4gICAgLy8gLS0tLS0gc3RhZ2dlciAtLS0tLSAvL1xuXG4gICAgcHJvdG8uc3RhZ2dlciA9IGZ1bmN0aW9uKGRlbGF5KSB7XG4gICAgICAgIGRlbGF5ID0gaXNOYU4oZGVsYXkpID8gMCA6IGRlbGF5O1xuICAgICAgICB0aGlzLnN0YWdnZXJEZWxheSA9IGRlbGF5ICsgJ21zJztcbiAgICB9O1xuXG4gICAgLy8gLS0tLS0gc2hvdy9oaWRlL3JlbW92ZSAtLS0tLSAvL1xuXG4gICAgLy8gcmVtb3ZlIGVsZW1lbnQgZnJvbSBET01cbiAgICBwcm90by5yZW1vdmVFbGVtID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIC8vIHJlbW92ZSBkaXNwbGF5OiBub25lXG4gICAgICAgIHRoaXMuY3NzKHsgZGlzcGxheTogJycgfSk7XG4gICAgICAgIHRoaXMuZW1pdEV2ZW50KCdyZW1vdmUnLCBbdGhpc10pO1xuICAgIH07XG5cbiAgICBwcm90by5yZW1vdmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8ganVzdCByZW1vdmUgZWxlbWVudCBpZiBubyB0cmFuc2l0aW9uIHN1cHBvcnQgb3Igbm8gdHJhbnNpdGlvblxuICAgICAgICBpZiAoIXRyYW5zaXRpb25Qcm9wZXJ0eSB8fCAhcGFyc2VGbG9hdCh0aGlzLmxheW91dC5vcHRpb25zLnRyYW5zaXRpb25EdXJhdGlvbikpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRWxlbSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc3RhcnQgdHJhbnNpdGlvblxuICAgICAgICB0aGlzLm9uY2UoJ3RyYW5zaXRpb25FbmQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRWxlbSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgfTtcblxuICAgIHByb3RvLnJldmVhbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBkZWxldGUgdGhpcy5pc0hpZGRlbjtcbiAgICAgICAgLy8gcmVtb3ZlIGRpc3BsYXk6IG5vbmVcbiAgICAgICAgdGhpcy5jc3MoeyBkaXNwbGF5OiAnJyB9KTtcblxuICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMubGF5b3V0Lm9wdGlvbnM7XG5cbiAgICAgICAgdmFyIG9uVHJhbnNpdGlvbkVuZCA9IHt9O1xuICAgICAgICB2YXIgdHJhbnNpdGlvbkVuZFByb3BlcnR5ID0gdGhpcy5nZXRIaWRlUmV2ZWFsVHJhbnNpdGlvbkVuZFByb3BlcnR5KCd2aXNpYmxlU3R5bGUnKTtcbiAgICAgICAgb25UcmFuc2l0aW9uRW5kW3RyYW5zaXRpb25FbmRQcm9wZXJ0eV0gPSB0aGlzLm9uUmV2ZWFsVHJhbnNpdGlvbkVuZDtcblxuICAgICAgICB0aGlzLnRyYW5zaXRpb24oe1xuICAgICAgICAgICAgZnJvbTogb3B0aW9ucy5oaWRkZW5TdHlsZSxcbiAgICAgICAgICAgIHRvOiBvcHRpb25zLnZpc2libGVTdHlsZSxcbiAgICAgICAgICAgIGlzQ2xlYW5pbmc6IHRydWUsXG4gICAgICAgICAgICBvblRyYW5zaXRpb25FbmQ6IG9uVHJhbnNpdGlvbkVuZFxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgcHJvdG8ub25SZXZlYWxUcmFuc2l0aW9uRW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIGNoZWNrIGlmIHN0aWxsIHZpc2libGVcbiAgICAgICAgLy8gZHVyaW5nIHRyYW5zaXRpb24sIGl0ZW0gbWF5IGhhdmUgYmVlbiBoaWRkZW5cbiAgICAgICAgaWYgKCF0aGlzLmlzSGlkZGVuKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXRFdmVudCgncmV2ZWFsJyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogZ2V0IHN0eWxlIHByb3BlcnR5IHVzZSBmb3IgaGlkZS9yZXZlYWwgdHJhbnNpdGlvbiBlbmRcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gc3R5bGVQcm9wZXJ0eSAtIGhpZGRlblN0eWxlL3Zpc2libGVTdHlsZVxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9XG4gICAgICovXG4gICAgcHJvdG8uZ2V0SGlkZVJldmVhbFRyYW5zaXRpb25FbmRQcm9wZXJ0eSA9IGZ1bmN0aW9uKHN0eWxlUHJvcGVydHkpIHtcbiAgICAgICAgdmFyIG9wdGlvblN0eWxlID0gdGhpcy5sYXlvdXQub3B0aW9uc1tzdHlsZVByb3BlcnR5XTtcbiAgICAgICAgLy8gdXNlIG9wYWNpdHlcbiAgICAgICAgaWYgKG9wdGlvblN0eWxlLm9wYWNpdHkpIHtcbiAgICAgICAgICAgIHJldHVybiAnb3BhY2l0eSc7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZ2V0IGZpcnN0IHByb3BlcnR5XG4gICAgICAgIGZvciAodmFyIHByb3AgaW4gb3B0aW9uU3R5bGUpIHtcbiAgICAgICAgICAgIHJldHVybiBwcm9wO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHByb3RvLmhpZGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gc2V0IGZsYWdcbiAgICAgICAgdGhpcy5pc0hpZGRlbiA9IHRydWU7XG4gICAgICAgIC8vIHJlbW92ZSBkaXNwbGF5OiBub25lXG4gICAgICAgIHRoaXMuY3NzKHsgZGlzcGxheTogJycgfSk7XG5cbiAgICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLmxheW91dC5vcHRpb25zO1xuXG4gICAgICAgIHZhciBvblRyYW5zaXRpb25FbmQgPSB7fTtcbiAgICAgICAgdmFyIHRyYW5zaXRpb25FbmRQcm9wZXJ0eSA9IHRoaXMuZ2V0SGlkZVJldmVhbFRyYW5zaXRpb25FbmRQcm9wZXJ0eSgnaGlkZGVuU3R5bGUnKTtcbiAgICAgICAgb25UcmFuc2l0aW9uRW5kW3RyYW5zaXRpb25FbmRQcm9wZXJ0eV0gPSB0aGlzLm9uSGlkZVRyYW5zaXRpb25FbmQ7XG5cbiAgICAgICAgdGhpcy50cmFuc2l0aW9uKHtcbiAgICAgICAgICAgIGZyb206IG9wdGlvbnMudmlzaWJsZVN0eWxlLFxuICAgICAgICAgICAgdG86IG9wdGlvbnMuaGlkZGVuU3R5bGUsXG4gICAgICAgICAgICAvLyBrZWVwIGhpZGRlbiBzdHVmZiBoaWRkZW5cbiAgICAgICAgICAgIGlzQ2xlYW5pbmc6IHRydWUsXG4gICAgICAgICAgICBvblRyYW5zaXRpb25FbmQ6IG9uVHJhbnNpdGlvbkVuZFxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgcHJvdG8ub25IaWRlVHJhbnNpdGlvbkVuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBjaGVjayBpZiBzdGlsbCBoaWRkZW5cbiAgICAgICAgLy8gZHVyaW5nIHRyYW5zaXRpb24sIGl0ZW0gbWF5IGhhdmUgYmVlbiB1bi1oaWRkZW5cbiAgICAgICAgaWYgKHRoaXMuaXNIaWRkZW4pIHtcbiAgICAgICAgICAgIHRoaXMuY3NzKHsgZGlzcGxheTogJ25vbmUnIH0pO1xuICAgICAgICAgICAgdGhpcy5lbWl0RXZlbnQoJ2hpZGUnKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBwcm90by5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuY3NzKHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiAnJyxcbiAgICAgICAgICAgIGxlZnQ6ICcnLFxuICAgICAgICAgICAgcmlnaHQ6ICcnLFxuICAgICAgICAgICAgdG9wOiAnJyxcbiAgICAgICAgICAgIGJvdHRvbTogJycsXG4gICAgICAgICAgICB0cmFuc2l0aW9uOiAnJyxcbiAgICAgICAgICAgIHRyYW5zZm9ybTogJydcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHJldHVybiBJdGVtO1xuXG59KSk7XG5cbi8qIVxuICogT3V0bGF5ZXIgdjIuMS4wXG4gKiB0aGUgYnJhaW5zIGFuZCBndXRzIG9mIGEgbGF5b3V0IGxpYnJhcnlcbiAqIE1JVCBsaWNlbnNlXG4gKi9cblxuKGZ1bmN0aW9uKHdpbmRvdywgZmFjdG9yeSkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICAvLyB1bml2ZXJzYWwgbW9kdWxlIGRlZmluaXRpb25cbiAgICAvKiBqc2hpbnQgc3RyaWN0OiBmYWxzZSAqL1xuICAgIC8qIGdsb2JhbHMgZGVmaW5lLCBtb2R1bGUsIHJlcXVpcmUgKi9cbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgLy8gQU1EIC0gUmVxdWlyZUpTXG4gICAgICAgIGRlZmluZSgnb3V0bGF5ZXIvb3V0bGF5ZXInLCBbXG4gICAgICAgICAgICAgICAgJ2V2LWVtaXR0ZXIvZXYtZW1pdHRlcicsXG4gICAgICAgICAgICAgICAgJ2dldC1zaXplL2dldC1zaXplJyxcbiAgICAgICAgICAgICAgICAnZml6enktdWktdXRpbHMvdXRpbHMnLFxuICAgICAgICAgICAgICAgICcuL2l0ZW0nXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgZnVuY3Rpb24oRXZFbWl0dGVyLCBnZXRTaXplLCB1dGlscywgSXRlbSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWN0b3J5KHdpbmRvdywgRXZFbWl0dGVyLCBnZXRTaXplLCB1dGlscywgSXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgICAgIC8vIENvbW1vbkpTIC0gQnJvd3NlcmlmeSwgV2VicGFja1xuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoXG4gICAgICAgICAgICB3aW5kb3csXG4gICAgICAgICAgICByZXF1aXJlKCdldi1lbWl0dGVyJyksXG4gICAgICAgICAgICByZXF1aXJlKCdnZXQtc2l6ZScpLFxuICAgICAgICAgICAgcmVxdWlyZSgnZml6enktdWktdXRpbHMnKSxcbiAgICAgICAgICAgIHJlcXVpcmUoJy4vaXRlbScpXG4gICAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gYnJvd3NlciBnbG9iYWxcbiAgICAgICAgd2luZG93Lk91dGxheWVyID0gZmFjdG9yeShcbiAgICAgICAgICAgIHdpbmRvdyxcbiAgICAgICAgICAgIHdpbmRvdy5FdkVtaXR0ZXIsXG4gICAgICAgICAgICB3aW5kb3cuZ2V0U2l6ZSxcbiAgICAgICAgICAgIHdpbmRvdy5maXp6eVVJVXRpbHMsXG4gICAgICAgICAgICB3aW5kb3cuT3V0bGF5ZXIuSXRlbVxuICAgICAgICApO1xuICAgIH1cblxufSh3aW5kb3csIGZ1bmN0aW9uIGZhY3Rvcnkod2luZG93LCBFdkVtaXR0ZXIsIGdldFNpemUsIHV0aWxzLCBJdGVtKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgLy8gLS0tLS0gdmFycyAtLS0tLSAvL1xuXG4gICAgdmFyIGNvbnNvbGUgPSB3aW5kb3cuY29uc29sZTtcbiAgICB2YXIgalF1ZXJ5ID0gd2luZG93LmpRdWVyeTtcbiAgICB2YXIgbm9vcCA9IGZ1bmN0aW9uKCkge307XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBPdXRsYXllciAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG4gICAgLy8gZ2xvYmFsbHkgdW5pcXVlIGlkZW50aWZpZXJzXG4gICAgdmFyIEdVSUQgPSAwO1xuICAgIC8vIGludGVybmFsIHN0b3JlIG9mIGFsbCBPdXRsYXllciBpbnRhbmNlc1xuICAgIHZhciBpbnN0YW5jZXMgPSB7fTtcblxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtFbGVtZW50LCBTdHJpbmd9IGVsZW1lbnRcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE91dGxheWVyKGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIHF1ZXJ5RWxlbWVudCA9IHV0aWxzLmdldFF1ZXJ5RWxlbWVudChlbGVtZW50KTtcbiAgICAgICAgaWYgKCFxdWVyeUVsZW1lbnQpIHtcbiAgICAgICAgICAgIGlmIChjb25zb2xlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignQmFkIGVsZW1lbnQgZm9yICcgKyB0aGlzLmNvbnN0cnVjdG9yLm5hbWVzcGFjZSArXG4gICAgICAgICAgICAgICAgICAgICc6ICcgKyAocXVlcnlFbGVtZW50IHx8IGVsZW1lbnQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVsZW1lbnQgPSBxdWVyeUVsZW1lbnQ7XG4gICAgICAgIC8vIGFkZCBqUXVlcnlcbiAgICAgICAgaWYgKGpRdWVyeSkge1xuICAgICAgICAgICAgdGhpcy4kZWxlbWVudCA9IGpRdWVyeSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gb3B0aW9uc1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSB1dGlscy5leHRlbmQoe30sIHRoaXMuY29uc3RydWN0b3IuZGVmYXVsdHMpO1xuICAgICAgICB0aGlzLm9wdGlvbihvcHRpb25zKTtcblxuICAgICAgICAvLyBhZGQgaWQgZm9yIE91dGxheWVyLmdldEZyb21FbGVtZW50XG4gICAgICAgIHZhciBpZCA9ICsrR1VJRDtcbiAgICAgICAgdGhpcy5lbGVtZW50Lm91dGxheWVyR1VJRCA9IGlkOyAvLyBleHBhbmRvXG4gICAgICAgIGluc3RhbmNlc1tpZF0gPSB0aGlzOyAvLyBhc3NvY2lhdGUgdmlhIGlkXG5cbiAgICAgICAgLy8ga2ljayBpdCBvZmZcbiAgICAgICAgdGhpcy5fY3JlYXRlKCk7XG5cbiAgICAgICAgdmFyIGlzSW5pdExheW91dCA9IHRoaXMuX2dldE9wdGlvbignaW5pdExheW91dCcpO1xuICAgICAgICBpZiAoaXNJbml0TGF5b3V0KSB7XG4gICAgICAgICAgICB0aGlzLmxheW91dCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gc2V0dGluZ3MgYXJlIGZvciBpbnRlcm5hbCB1c2Ugb25seVxuICAgIE91dGxheWVyLm5hbWVzcGFjZSA9ICdvdXRsYXllcic7XG4gICAgT3V0bGF5ZXIuSXRlbSA9IEl0ZW07XG5cbiAgICAvLyBkZWZhdWx0IG9wdGlvbnNcbiAgICBPdXRsYXllci5kZWZhdWx0cyA9IHtcbiAgICAgICAgY29udGFpbmVyU3R5bGU6IHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnXG4gICAgICAgIH0sXG4gICAgICAgIGluaXRMYXlvdXQ6IHRydWUsXG4gICAgICAgIG9yaWdpbkxlZnQ6IHRydWUsXG4gICAgICAgIG9yaWdpblRvcDogdHJ1ZSxcbiAgICAgICAgcmVzaXplOiB0cnVlLFxuICAgICAgICByZXNpemVDb250YWluZXI6IHRydWUsXG4gICAgICAgIC8vIGl0ZW0gb3B0aW9uc1xuICAgICAgICB0cmFuc2l0aW9uRHVyYXRpb246ICcwLjRzJyxcbiAgICAgICAgaGlkZGVuU3R5bGU6IHtcbiAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICB0cmFuc2Zvcm06ICdzY2FsZSgwLjAwMSknXG4gICAgICAgIH0sXG4gICAgICAgIHZpc2libGVTdHlsZToge1xuICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgIHRyYW5zZm9ybTogJ3NjYWxlKDEpJ1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBwcm90byA9IE91dGxheWVyLnByb3RvdHlwZTtcbiAgICAvLyBpbmhlcml0IEV2RW1pdHRlclxuICAgIHV0aWxzLmV4dGVuZChwcm90bywgRXZFbWl0dGVyLnByb3RvdHlwZSk7XG5cbiAgICAvKipcbiAgICAgKiBzZXQgb3B0aW9uc1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzXG4gICAgICovXG4gICAgcHJvdG8ub3B0aW9uID0gZnVuY3Rpb24ob3B0cykge1xuICAgICAgICB1dGlscy5leHRlbmQodGhpcy5vcHRpb25zLCBvcHRzKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogZ2V0IGJhY2t3YXJkcyBjb21wYXRpYmxlIG9wdGlvbiB2YWx1ZSwgY2hlY2sgb2xkIG5hbWVcbiAgICAgKi9cbiAgICBwcm90by5fZ2V0T3B0aW9uID0gZnVuY3Rpb24ob3B0aW9uKSB7XG4gICAgICAgIHZhciBvbGRPcHRpb24gPSB0aGlzLmNvbnN0cnVjdG9yLmNvbXBhdE9wdGlvbnNbb3B0aW9uXTtcbiAgICAgICAgcmV0dXJuIG9sZE9wdGlvbiAmJiB0aGlzLm9wdGlvbnNbb2xkT3B0aW9uXSAhPT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAgIHRoaXMub3B0aW9uc1tvbGRPcHRpb25dIDogdGhpcy5vcHRpb25zW29wdGlvbl07XG4gICAgfTtcblxuICAgIE91dGxheWVyLmNvbXBhdE9wdGlvbnMgPSB7XG4gICAgICAgIC8vIGN1cnJlbnROYW1lOiBvbGROYW1lXG4gICAgICAgIGluaXRMYXlvdXQ6ICdpc0luaXRMYXlvdXQnLFxuICAgICAgICBob3Jpem9udGFsOiAnaXNIb3Jpem9udGFsJyxcbiAgICAgICAgbGF5b3V0SW5zdGFudDogJ2lzTGF5b3V0SW5zdGFudCcsXG4gICAgICAgIG9yaWdpbkxlZnQ6ICdpc09yaWdpbkxlZnQnLFxuICAgICAgICBvcmlnaW5Ub3A6ICdpc09yaWdpblRvcCcsXG4gICAgICAgIHJlc2l6ZTogJ2lzUmVzaXplQm91bmQnLFxuICAgICAgICByZXNpemVDb250YWluZXI6ICdpc1Jlc2l6aW5nQ29udGFpbmVyJ1xuICAgIH07XG5cbiAgICBwcm90by5fY3JlYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIGdldCBpdGVtcyBmcm9tIGNoaWxkcmVuXG4gICAgICAgIHRoaXMucmVsb2FkSXRlbXMoKTtcbiAgICAgICAgLy8gZWxlbWVudHMgdGhhdCBhZmZlY3QgbGF5b3V0LCBidXQgYXJlIG5vdCBsYWlkIG91dFxuICAgICAgICB0aGlzLnN0YW1wcyA9IFtdO1xuICAgICAgICB0aGlzLnN0YW1wKHRoaXMub3B0aW9ucy5zdGFtcCk7XG4gICAgICAgIC8vIHNldCBjb250YWluZXIgc3R5bGVcbiAgICAgICAgdXRpbHMuZXh0ZW5kKHRoaXMuZWxlbWVudC5zdHlsZSwgdGhpcy5vcHRpb25zLmNvbnRhaW5lclN0eWxlKTtcblxuICAgICAgICAvLyBiaW5kIHJlc2l6ZSBtZXRob2RcbiAgICAgICAgdmFyIGNhbkJpbmRSZXNpemUgPSB0aGlzLl9nZXRPcHRpb24oJ3Jlc2l6ZScpO1xuICAgICAgICBpZiAoY2FuQmluZFJlc2l6ZSkge1xuICAgICAgICAgICAgdGhpcy5iaW5kUmVzaXplKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gZ29lcyB0aHJvdWdoIGFsbCBjaGlsZHJlbiBhZ2FpbiBhbmQgZ2V0cyBicmlja3MgaW4gcHJvcGVyIG9yZGVyXG4gICAgcHJvdG8ucmVsb2FkSXRlbXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gY29sbGVjdGlvbiBvZiBpdGVtIGVsZW1lbnRzXG4gICAgICAgIHRoaXMuaXRlbXMgPSB0aGlzLl9pdGVtaXplKHRoaXMuZWxlbWVudC5jaGlsZHJlbik7XG4gICAgfTtcblxuXG4gICAgLyoqXG4gICAgICogdHVybiBlbGVtZW50cyBpbnRvIE91dGxheWVyLkl0ZW1zIHRvIGJlIHVzZWQgaW4gbGF5b3V0XG4gICAgICogQHBhcmFtIHtBcnJheSBvciBOb2RlTGlzdCBvciBIVE1MRWxlbWVudH0gZWxlbXNcbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IGl0ZW1zIC0gY29sbGVjdGlvbiBvZiBuZXcgT3V0bGF5ZXIgSXRlbXNcbiAgICAgKi9cbiAgICBwcm90by5faXRlbWl6ZSA9IGZ1bmN0aW9uKGVsZW1zKSB7XG5cbiAgICAgICAgdmFyIGl0ZW1FbGVtcyA9IHRoaXMuX2ZpbHRlckZpbmRJdGVtRWxlbWVudHMoZWxlbXMpO1xuICAgICAgICB2YXIgSXRlbSA9IHRoaXMuY29uc3RydWN0b3IuSXRlbTtcblxuICAgICAgICAvLyBjcmVhdGUgbmV3IE91dGxheWVyIEl0ZW1zIGZvciBjb2xsZWN0aW9uXG4gICAgICAgIHZhciBpdGVtcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1FbGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGVsZW0gPSBpdGVtRWxlbXNbaV07XG4gICAgICAgICAgICB2YXIgaXRlbSA9IG5ldyBJdGVtKGVsZW0sIHRoaXMpO1xuICAgICAgICAgICAgaXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBpdGVtcztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogZ2V0IGl0ZW0gZWxlbWVudHMgdG8gYmUgdXNlZCBpbiBsYXlvdXRcbiAgICAgKiBAcGFyYW0ge0FycmF5IG9yIE5vZGVMaXN0IG9yIEhUTUxFbGVtZW50fSBlbGVtc1xuICAgICAqIEByZXR1cm5zIHtBcnJheX0gaXRlbXMgLSBpdGVtIGVsZW1lbnRzXG4gICAgICovXG4gICAgcHJvdG8uX2ZpbHRlckZpbmRJdGVtRWxlbWVudHMgPSBmdW5jdGlvbihlbGVtcykge1xuICAgICAgICByZXR1cm4gdXRpbHMuZmlsdGVyRmluZEVsZW1lbnRzKGVsZW1zLCB0aGlzLm9wdGlvbnMuaXRlbVNlbGVjdG9yKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogZ2V0dGVyIG1ldGhvZCBmb3IgZ2V0dGluZyBpdGVtIGVsZW1lbnRzXG4gICAgICogQHJldHVybnMge0FycmF5fSBlbGVtcyAtIGNvbGxlY3Rpb24gb2YgaXRlbSBlbGVtZW50c1xuICAgICAqL1xuICAgIHByb3RvLmdldEl0ZW1FbGVtZW50cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVtcy5tYXAoZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuIGl0ZW0uZWxlbWVudDtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIC0tLS0tIGluaXQgJiBsYXlvdXQgLS0tLS0gLy9cblxuICAgIC8qKlxuICAgICAqIGxheXMgb3V0IGFsbCBpdGVtc1xuICAgICAqL1xuICAgIHByb3RvLmxheW91dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLl9yZXNldExheW91dCgpO1xuICAgICAgICB0aGlzLl9tYW5hZ2VTdGFtcHMoKTtcblxuICAgICAgICAvLyBkb24ndCBhbmltYXRlIGZpcnN0IGxheW91dFxuICAgICAgICB2YXIgbGF5b3V0SW5zdGFudCA9IHRoaXMuX2dldE9wdGlvbignbGF5b3V0SW5zdGFudCcpO1xuICAgICAgICB2YXIgaXNJbnN0YW50ID0gbGF5b3V0SW5zdGFudCAhPT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAgIGxheW91dEluc3RhbnQgOiAhdGhpcy5faXNMYXlvdXRJbml0ZWQ7XG4gICAgICAgIHRoaXMubGF5b3V0SXRlbXModGhpcy5pdGVtcywgaXNJbnN0YW50KTtcblxuICAgICAgICAvLyBmbGFnIGZvciBpbml0YWxpemVkXG4gICAgICAgIHRoaXMuX2lzTGF5b3V0SW5pdGVkID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgLy8gX2luaXQgaXMgYWxpYXMgZm9yIGxheW91dFxuICAgIHByb3RvLl9pbml0ID0gcHJvdG8ubGF5b3V0O1xuXG4gICAgLyoqXG4gICAgICogbG9naWMgYmVmb3JlIGFueSBuZXcgbGF5b3V0XG4gICAgICovXG4gICAgcHJvdG8uX3Jlc2V0TGF5b3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuZ2V0U2l6ZSgpO1xuICAgIH07XG5cblxuICAgIHByb3RvLmdldFNpemUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5zaXplID0gZ2V0U2l6ZSh0aGlzLmVsZW1lbnQpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBnZXQgbWVhc3VyZW1lbnQgZnJvbSBvcHRpb24sIGZvciBjb2x1bW5XaWR0aCwgcm93SGVpZ2h0LCBndXR0ZXJcbiAgICAgKiBpZiBvcHRpb24gaXMgU3RyaW5nIC0+IGdldCBlbGVtZW50IGZyb20gc2VsZWN0b3Igc3RyaW5nLCAmIGdldCBzaXplIG9mIGVsZW1lbnRcbiAgICAgKiBpZiBvcHRpb24gaXMgRWxlbWVudCAtPiBnZXQgc2l6ZSBvZiBlbGVtZW50XG4gICAgICogZWxzZSB1c2Ugb3B0aW9uIGFzIGEgbnVtYmVyXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWVhc3VyZW1lbnRcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gc2l6ZSAtIHdpZHRoIG9yIGhlaWdodFxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgcHJvdG8uX2dldE1lYXN1cmVtZW50ID0gZnVuY3Rpb24obWVhc3VyZW1lbnQsIHNpemUpIHtcbiAgICAgICAgdmFyIG9wdGlvbiA9IHRoaXMub3B0aW9uc1ttZWFzdXJlbWVudF07XG4gICAgICAgIHZhciBlbGVtO1xuICAgICAgICBpZiAoIW9wdGlvbikge1xuICAgICAgICAgICAgLy8gZGVmYXVsdCB0byAwXG4gICAgICAgICAgICB0aGlzW21lYXN1cmVtZW50XSA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyB1c2Ugb3B0aW9uIGFzIGFuIGVsZW1lbnRcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uID09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgZWxlbSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKG9wdGlvbik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbiBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgZWxlbSA9IG9wdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHVzZSBzaXplIG9mIGVsZW1lbnQsIGlmIGVsZW1lbnRcbiAgICAgICAgICAgIHRoaXNbbWVhc3VyZW1lbnRdID0gZWxlbSA/IGdldFNpemUoZWxlbSlbc2l6ZV0gOiBvcHRpb247XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogbGF5b3V0IGEgY29sbGVjdGlvbiBvZiBpdGVtIGVsZW1lbnRzXG4gICAgICogQGFwaSBwdWJsaWNcbiAgICAgKi9cbiAgICBwcm90by5sYXlvdXRJdGVtcyA9IGZ1bmN0aW9uKGl0ZW1zLCBpc0luc3RhbnQpIHtcbiAgICAgICAgaXRlbXMgPSB0aGlzLl9nZXRJdGVtc0ZvckxheW91dChpdGVtcyk7XG5cbiAgICAgICAgdGhpcy5fbGF5b3V0SXRlbXMoaXRlbXMsIGlzSW5zdGFudCk7XG5cbiAgICAgICAgdGhpcy5fcG9zdExheW91dCgpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBnZXQgdGhlIGl0ZW1zIHRvIGJlIGxhaWQgb3V0XG4gICAgICogeW91IG1heSB3YW50IHRvIHNraXAgb3ZlciBzb21lIGl0ZW1zXG4gICAgICogQHBhcmFtIHtBcnJheX0gaXRlbXNcbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IGl0ZW1zXG4gICAgICovXG4gICAgcHJvdG8uX2dldEl0ZW1zRm9yTGF5b3V0ID0gZnVuY3Rpb24oaXRlbXMpIHtcbiAgICAgICAgcmV0dXJuIGl0ZW1zLmZpbHRlcihmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gIWl0ZW0uaXNJZ25vcmVkO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogbGF5b3V0IGl0ZW1zXG4gICAgICogQHBhcmFtIHtBcnJheX0gaXRlbXNcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGlzSW5zdGFudFxuICAgICAqL1xuICAgIHByb3RvLl9sYXlvdXRJdGVtcyA9IGZ1bmN0aW9uKGl0ZW1zLCBpc0luc3RhbnQpIHtcbiAgICAgICAgdGhpcy5fZW1pdENvbXBsZXRlT25JdGVtcygnbGF5b3V0JywgaXRlbXMpO1xuXG4gICAgICAgIGlmICghaXRlbXMgfHwgIWl0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgLy8gbm8gaXRlbXMsIGVtaXQgZXZlbnQgd2l0aCBlbXB0eSBhcnJheVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHF1ZXVlID0gW107XG5cbiAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICAvLyBnZXQgeC95IG9iamVjdCBmcm9tIG1ldGhvZFxuICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gdGhpcy5fZ2V0SXRlbUxheW91dFBvc2l0aW9uKGl0ZW0pO1xuICAgICAgICAgICAgLy8gZW5xdWV1ZVxuICAgICAgICAgICAgcG9zaXRpb24uaXRlbSA9IGl0ZW07XG4gICAgICAgICAgICBwb3NpdGlvbi5pc0luc3RhbnQgPSBpc0luc3RhbnQgfHwgaXRlbS5pc0xheW91dEluc3RhbnQ7XG4gICAgICAgICAgICBxdWV1ZS5wdXNoKHBvc2l0aW9uKTtcbiAgICAgICAgfSwgdGhpcyk7XG5cbiAgICAgICAgdGhpcy5fcHJvY2Vzc0xheW91dFF1ZXVlKHF1ZXVlKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogZ2V0IGl0ZW0gbGF5b3V0IHBvc2l0aW9uXG4gICAgICogQHBhcmFtIHtPdXRsYXllci5JdGVtfSBpdGVtXG4gICAgICogQHJldHVybnMge09iamVjdH0geCBhbmQgeSBwb3NpdGlvblxuICAgICAqL1xuICAgIHByb3RvLl9nZXRJdGVtTGF5b3V0UG9zaXRpb24gPSBmdW5jdGlvbiggLyogaXRlbSAqLyApIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHg6IDAsXG4gICAgICAgICAgICB5OiAwXG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGl0ZXJhdGUgb3ZlciBhcnJheSBhbmQgcG9zaXRpb24gZWFjaCBpdGVtXG4gICAgICogUmVhc29uIGJlaW5nIC0gc2VwYXJhdGluZyB0aGlzIGxvZ2ljIHByZXZlbnRzICdsYXlvdXQgaW52YWxpZGF0aW9uJ1xuICAgICAqIHRoeCBAcGF1bF9pcmlzaFxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHF1ZXVlXG4gICAgICovXG4gICAgcHJvdG8uX3Byb2Nlc3NMYXlvdXRRdWV1ZSA9IGZ1bmN0aW9uKHF1ZXVlKSB7XG4gICAgICAgIHRoaXMudXBkYXRlU3RhZ2dlcigpO1xuICAgICAgICBxdWV1ZS5mb3JFYWNoKGZ1bmN0aW9uKG9iaiwgaSkge1xuICAgICAgICAgICAgdGhpcy5fcG9zaXRpb25JdGVtKG9iai5pdGVtLCBvYmoueCwgb2JqLnksIG9iai5pc0luc3RhbnQsIGkpO1xuICAgICAgICB9LCB0aGlzKTtcbiAgICB9O1xuXG4gICAgLy8gc2V0IHN0YWdnZXIgZnJvbSBvcHRpb24gaW4gbWlsbGlzZWNvbmRzIG51bWJlclxuICAgIHByb3RvLnVwZGF0ZVN0YWdnZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHN0YWdnZXIgPSB0aGlzLm9wdGlvbnMuc3RhZ2dlcjtcbiAgICAgICAgaWYgKHN0YWdnZXIgPT09IG51bGwgfHwgc3RhZ2dlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnN0YWdnZXIgPSAwO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhZ2dlciA9IGdldE1pbGxpc2Vjb25kcyhzdGFnZ2VyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhZ2dlcjtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU2V0cyBwb3NpdGlvbiBvZiBpdGVtIGluIERPTVxuICAgICAqIEBwYXJhbSB7T3V0bGF5ZXIuSXRlbX0gaXRlbVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB4IC0gaG9yaXpvbnRhbCBwb3NpdGlvblxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB5IC0gdmVydGljYWwgcG9zaXRpb25cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGlzSW5zdGFudCAtIGRpc2FibGVzIHRyYW5zaXRpb25zXG4gICAgICovXG4gICAgcHJvdG8uX3Bvc2l0aW9uSXRlbSA9IGZ1bmN0aW9uKGl0ZW0sIHgsIHksIGlzSW5zdGFudCwgaSkge1xuICAgICAgICBpZiAoaXNJbnN0YW50KSB7XG4gICAgICAgICAgICAvLyBpZiBub3QgdHJhbnNpdGlvbiwganVzdCBzZXQgQ1NTXG4gICAgICAgICAgICBpdGVtLmdvVG8oeCwgeSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpdGVtLnN0YWdnZXIoaSAqIHRoaXMuc3RhZ2dlcik7XG4gICAgICAgICAgICBpdGVtLm1vdmVUbyh4LCB5KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBbnkgbG9naWMgeW91IHdhbnQgdG8gZG8gYWZ0ZXIgZWFjaCBsYXlvdXQsXG4gICAgICogaS5lLiBzaXplIHRoZSBjb250YWluZXJcbiAgICAgKi9cbiAgICBwcm90by5fcG9zdExheW91dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnJlc2l6ZUNvbnRhaW5lcigpO1xuICAgIH07XG5cbiAgICBwcm90by5yZXNpemVDb250YWluZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGlzUmVzaXppbmdDb250YWluZXIgPSB0aGlzLl9nZXRPcHRpb24oJ3Jlc2l6ZUNvbnRhaW5lcicpO1xuICAgICAgICBpZiAoIWlzUmVzaXppbmdDb250YWluZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc2l6ZSA9IHRoaXMuX2dldENvbnRhaW5lclNpemUoKTtcbiAgICAgICAgaWYgKHNpemUpIHtcbiAgICAgICAgICAgIHRoaXMuX3NldENvbnRhaW5lck1lYXN1cmUoc2l6ZS53aWR0aCwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLl9zZXRDb250YWluZXJNZWFzdXJlKHNpemUuaGVpZ2h0LCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU2V0cyB3aWR0aCBvciBoZWlnaHQgb2YgY29udGFpbmVyIGlmIHJldHVybmVkXG4gICAgICogQHJldHVybnMge09iamVjdH0gc2l6ZVxuICAgICAqICAgQHBhcmFtIHtOdW1iZXJ9IHdpZHRoXG4gICAgICogICBAcGFyYW0ge051bWJlcn0gaGVpZ2h0XG4gICAgICovXG4gICAgcHJvdG8uX2dldENvbnRhaW5lclNpemUgPSBub29wO1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IG1lYXN1cmUgLSBzaXplIG9mIHdpZHRoIG9yIGhlaWdodFxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNXaWR0aFxuICAgICAqL1xuICAgIHByb3RvLl9zZXRDb250YWluZXJNZWFzdXJlID0gZnVuY3Rpb24obWVhc3VyZSwgaXNXaWR0aCkge1xuICAgICAgICBpZiAobWVhc3VyZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZWxlbVNpemUgPSB0aGlzLnNpemU7XG4gICAgICAgIC8vIGFkZCBwYWRkaW5nIGFuZCBib3JkZXIgd2lkdGggaWYgYm9yZGVyIGJveFxuICAgICAgICBpZiAoZWxlbVNpemUuaXNCb3JkZXJCb3gpIHtcbiAgICAgICAgICAgIG1lYXN1cmUgKz0gaXNXaWR0aCA/IGVsZW1TaXplLnBhZGRpbmdMZWZ0ICsgZWxlbVNpemUucGFkZGluZ1JpZ2h0ICtcbiAgICAgICAgICAgICAgICBlbGVtU2l6ZS5ib3JkZXJMZWZ0V2lkdGggKyBlbGVtU2l6ZS5ib3JkZXJSaWdodFdpZHRoIDpcbiAgICAgICAgICAgICAgICBlbGVtU2l6ZS5wYWRkaW5nQm90dG9tICsgZWxlbVNpemUucGFkZGluZ1RvcCArXG4gICAgICAgICAgICAgICAgZWxlbVNpemUuYm9yZGVyVG9wV2lkdGggKyBlbGVtU2l6ZS5ib3JkZXJCb3R0b21XaWR0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIG1lYXN1cmUgPSBNYXRoLm1heChtZWFzdXJlLCAwKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlW2lzV2lkdGggPyAnd2lkdGgnIDogJ2hlaWdodCddID0gbWVhc3VyZSArICdweCc7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGVtaXQgZXZlbnRDb21wbGV0ZSBvbiBhIGNvbGxlY3Rpb24gb2YgaXRlbXMgZXZlbnRzXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGl0ZW1zIC0gT3V0bGF5ZXIuSXRlbXNcbiAgICAgKi9cbiAgICBwcm90by5fZW1pdENvbXBsZXRlT25JdGVtcyA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgaXRlbXMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICBmdW5jdGlvbiBvbkNvbXBsZXRlKCkge1xuICAgICAgICAgICAgX3RoaXMuZGlzcGF0Y2hFdmVudChldmVudE5hbWUgKyAnQ29tcGxldGUnLCBudWxsLCBbaXRlbXNdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjb3VudCA9IGl0ZW1zLmxlbmd0aDtcbiAgICAgICAgaWYgKCFpdGVtcyB8fCAhY291bnQpIHtcbiAgICAgICAgICAgIG9uQ29tcGxldGUoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkb25lQ291bnQgPSAwO1xuXG4gICAgICAgIGZ1bmN0aW9uIHRpY2soKSB7XG4gICAgICAgICAgICBkb25lQ291bnQrKztcbiAgICAgICAgICAgIGlmIChkb25lQ291bnQgPT0gY291bnQpIHtcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBiaW5kIGNhbGxiYWNrXG4gICAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgaXRlbS5vbmNlKGV2ZW50TmFtZSwgdGljayk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBlbWl0cyBldmVudHMgdmlhIEV2RW1pdHRlciBhbmQgalF1ZXJ5IGV2ZW50c1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIC0gbmFtZSBvZiBldmVudFxuICAgICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IC0gb3JpZ2luYWwgZXZlbnRcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcmdzIC0gZXh0cmEgYXJndW1lbnRzXG4gICAgICovXG4gICAgcHJvdG8uZGlzcGF0Y2hFdmVudCA9IGZ1bmN0aW9uKHR5cGUsIGV2ZW50LCBhcmdzKSB7XG4gICAgICAgIC8vIGFkZCBvcmlnaW5hbCBldmVudCB0byBhcmd1bWVudHNcbiAgICAgICAgdmFyIGVtaXRBcmdzID0gZXZlbnQgPyBbZXZlbnRdLmNvbmNhdChhcmdzKSA6IGFyZ3M7XG4gICAgICAgIHRoaXMuZW1pdEV2ZW50KHR5cGUsIGVtaXRBcmdzKTtcblxuICAgICAgICBpZiAoalF1ZXJ5KSB7XG4gICAgICAgICAgICAvLyBzZXQgdGhpcy4kZWxlbWVudFxuICAgICAgICAgICAgdGhpcy4kZWxlbWVudCA9IHRoaXMuJGVsZW1lbnQgfHwgalF1ZXJ5KHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICBpZiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAvLyBjcmVhdGUgalF1ZXJ5IGV2ZW50XG4gICAgICAgICAgICAgICAgdmFyICRldmVudCA9IGpRdWVyeS5FdmVudChldmVudCk7XG4gICAgICAgICAgICAgICAgJGV2ZW50LnR5cGUgPSB0eXBlO1xuICAgICAgICAgICAgICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcigkZXZlbnQsIGFyZ3MpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBqdXN0IHRyaWdnZXIgd2l0aCB0eXBlIGlmIG5vIGV2ZW50IGF2YWlsYWJsZVxuICAgICAgICAgICAgICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcih0eXBlLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBpZ25vcmUgJiBzdGFtcHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblxuXG4gICAgLyoqXG4gICAgICoga2VlcCBpdGVtIGluIGNvbGxlY3Rpb24sIGJ1dCBkbyBub3QgbGF5IGl0IG91dFxuICAgICAqIGlnbm9yZWQgaXRlbXMgZG8gbm90IGdldCBza2lwcGVkIGluIGxheW91dFxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbVxuICAgICAqL1xuICAgIHByb3RvLmlnbm9yZSA9IGZ1bmN0aW9uKGVsZW0pIHtcbiAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLmdldEl0ZW0oZWxlbSk7XG4gICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICBpdGVtLmlzSWdub3JlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogcmV0dXJuIGl0ZW0gdG8gbGF5b3V0IGNvbGxlY3Rpb25cbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1cbiAgICAgKi9cbiAgICBwcm90by51bmlnbm9yZSA9IGZ1bmN0aW9uKGVsZW0pIHtcbiAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLmdldEl0ZW0oZWxlbSk7XG4gICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICBkZWxldGUgaXRlbS5pc0lnbm9yZWQ7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogYWRkcyBlbGVtZW50cyB0byBzdGFtcHNcbiAgICAgKiBAcGFyYW0ge05vZGVMaXN0LCBBcnJheSwgRWxlbWVudCwgb3IgU3RyaW5nfSBlbGVtc1xuICAgICAqL1xuICAgIHByb3RvLnN0YW1wID0gZnVuY3Rpb24oZWxlbXMpIHtcbiAgICAgICAgZWxlbXMgPSB0aGlzLl9maW5kKGVsZW1zKTtcbiAgICAgICAgaWYgKCFlbGVtcykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zdGFtcHMgPSB0aGlzLnN0YW1wcy5jb25jYXQoZWxlbXMpO1xuICAgICAgICAvLyBpZ25vcmVcbiAgICAgICAgZWxlbXMuZm9yRWFjaCh0aGlzLmlnbm9yZSwgdGhpcyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIHJlbW92ZXMgZWxlbWVudHMgdG8gc3RhbXBzXG4gICAgICogQHBhcmFtIHtOb2RlTGlzdCwgQXJyYXksIG9yIEVsZW1lbnR9IGVsZW1zXG4gICAgICovXG4gICAgcHJvdG8udW5zdGFtcCA9IGZ1bmN0aW9uKGVsZW1zKSB7XG4gICAgICAgIGVsZW1zID0gdGhpcy5fZmluZChlbGVtcyk7XG4gICAgICAgIGlmICghZWxlbXMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGVsZW1zLmZvckVhY2goZnVuY3Rpb24oZWxlbSkge1xuICAgICAgICAgICAgLy8gZmlsdGVyIG91dCByZW1vdmVkIHN0YW1wIGVsZW1lbnRzXG4gICAgICAgICAgICB1dGlscy5yZW1vdmVGcm9tKHRoaXMuc3RhbXBzLCBlbGVtKTtcbiAgICAgICAgICAgIHRoaXMudW5pZ25vcmUoZWxlbSk7XG4gICAgICAgIH0sIHRoaXMpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBmaW5kcyBjaGlsZCBlbGVtZW50c1xuICAgICAqIEBwYXJhbSB7Tm9kZUxpc3QsIEFycmF5LCBFbGVtZW50LCBvciBTdHJpbmd9IGVsZW1zXG4gICAgICogQHJldHVybnMge0FycmF5fSBlbGVtc1xuICAgICAqL1xuICAgIHByb3RvLl9maW5kID0gZnVuY3Rpb24oZWxlbXMpIHtcbiAgICAgICAgaWYgKCFlbGVtcykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGlmIHN0cmluZywgdXNlIGFyZ3VtZW50IGFzIHNlbGVjdG9yIHN0cmluZ1xuICAgICAgICBpZiAodHlwZW9mIGVsZW1zID09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBlbGVtcyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGVsZW1zKTtcbiAgICAgICAgfVxuICAgICAgICBlbGVtcyA9IHV0aWxzLm1ha2VBcnJheShlbGVtcyk7XG4gICAgICAgIHJldHVybiBlbGVtcztcbiAgICB9O1xuXG4gICAgcHJvdG8uX21hbmFnZVN0YW1wcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIXRoaXMuc3RhbXBzIHx8ICF0aGlzLnN0YW1wcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2dldEJvdW5kaW5nUmVjdCgpO1xuXG4gICAgICAgIHRoaXMuc3RhbXBzLmZvckVhY2godGhpcy5fbWFuYWdlU3RhbXAsIHRoaXMpO1xuICAgIH07XG5cbiAgICAvLyB1cGRhdGUgYm91bmRpbmdMZWZ0IC8gVG9wXG4gICAgcHJvdG8uX2dldEJvdW5kaW5nUmVjdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBnZXQgYm91bmRpbmcgcmVjdCBmb3IgY29udGFpbmVyIGVsZW1lbnRcbiAgICAgICAgdmFyIGJvdW5kaW5nUmVjdCA9IHRoaXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdmFyIHNpemUgPSB0aGlzLnNpemU7XG4gICAgICAgIHRoaXMuX2JvdW5kaW5nUmVjdCA9IHtcbiAgICAgICAgICAgIGxlZnQ6IGJvdW5kaW5nUmVjdC5sZWZ0ICsgc2l6ZS5wYWRkaW5nTGVmdCArIHNpemUuYm9yZGVyTGVmdFdpZHRoLFxuICAgICAgICAgICAgdG9wOiBib3VuZGluZ1JlY3QudG9wICsgc2l6ZS5wYWRkaW5nVG9wICsgc2l6ZS5ib3JkZXJUb3BXaWR0aCxcbiAgICAgICAgICAgIHJpZ2h0OiBib3VuZGluZ1JlY3QucmlnaHQgLSAoc2l6ZS5wYWRkaW5nUmlnaHQgKyBzaXplLmJvcmRlclJpZ2h0V2lkdGgpLFxuICAgICAgICAgICAgYm90dG9tOiBib3VuZGluZ1JlY3QuYm90dG9tIC0gKHNpemUucGFkZGluZ0JvdHRvbSArIHNpemUuYm9yZGVyQm90dG9tV2lkdGgpXG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gc3RhbXBcbiAgICAgKiovXG4gICAgcHJvdG8uX21hbmFnZVN0YW1wID0gbm9vcDtcblxuICAgIC8qKlxuICAgICAqIGdldCB4L3kgcG9zaXRpb24gb2YgZWxlbWVudCByZWxhdGl2ZSB0byBjb250YWluZXIgZWxlbWVudFxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbVxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IG9mZnNldCAtIGhhcyBsZWZ0LCB0b3AsIHJpZ2h0LCBib3R0b21cbiAgICAgKi9cbiAgICBwcm90by5fZ2V0RWxlbWVudE9mZnNldCA9IGZ1bmN0aW9uKGVsZW0pIHtcbiAgICAgICAgdmFyIGJvdW5kaW5nUmVjdCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHZhciB0aGlzUmVjdCA9IHRoaXMuX2JvdW5kaW5nUmVjdDtcbiAgICAgICAgdmFyIHNpemUgPSBnZXRTaXplKGVsZW0pO1xuICAgICAgICB2YXIgb2Zmc2V0ID0ge1xuICAgICAgICAgICAgbGVmdDogYm91bmRpbmdSZWN0LmxlZnQgLSB0aGlzUmVjdC5sZWZ0IC0gc2l6ZS5tYXJnaW5MZWZ0LFxuICAgICAgICAgICAgdG9wOiBib3VuZGluZ1JlY3QudG9wIC0gdGhpc1JlY3QudG9wIC0gc2l6ZS5tYXJnaW5Ub3AsXG4gICAgICAgICAgICByaWdodDogdGhpc1JlY3QucmlnaHQgLSBib3VuZGluZ1JlY3QucmlnaHQgLSBzaXplLm1hcmdpblJpZ2h0LFxuICAgICAgICAgICAgYm90dG9tOiB0aGlzUmVjdC5ib3R0b20gLSBib3VuZGluZ1JlY3QuYm90dG9tIC0gc2l6ZS5tYXJnaW5Cb3R0b21cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIG9mZnNldDtcbiAgICB9O1xuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gcmVzaXplIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbiAgICAvLyBlbmFibGUgZXZlbnQgaGFuZGxlcnMgZm9yIGxpc3RlbmVyc1xuICAgIC8vIGkuZS4gcmVzaXplIC0+IG9ucmVzaXplXG4gICAgcHJvdG8uaGFuZGxlRXZlbnQgPSB1dGlscy5oYW5kbGVFdmVudDtcblxuICAgIC8qKlxuICAgICAqIEJpbmQgbGF5b3V0IHRvIHdpbmRvdyByZXNpemluZ1xuICAgICAqL1xuICAgIHByb3RvLmJpbmRSZXNpemUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMpO1xuICAgICAgICB0aGlzLmlzUmVzaXplQm91bmQgPSB0cnVlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBVbmJpbmQgbGF5b3V0IHRvIHdpbmRvdyByZXNpemluZ1xuICAgICAqL1xuICAgIHByb3RvLnVuYmluZFJlc2l6ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcyk7XG4gICAgICAgIHRoaXMuaXNSZXNpemVCb3VuZCA9IGZhbHNlO1xuICAgIH07XG5cbiAgICBwcm90by5vbnJlc2l6ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnJlc2l6ZSgpO1xuICAgIH07XG5cbiAgICB1dGlscy5kZWJvdW5jZU1ldGhvZChPdXRsYXllciwgJ29ucmVzaXplJywgMTAwKTtcblxuICAgIHByb3RvLnJlc2l6ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBkb24ndCB0cmlnZ2VyIGlmIHNpemUgZGlkIG5vdCBjaGFuZ2VcbiAgICAgICAgLy8gb3IgaWYgcmVzaXplIHdhcyB1bmJvdW5kLiBTZWUgIzlcbiAgICAgICAgaWYgKCF0aGlzLmlzUmVzaXplQm91bmQgfHwgIXRoaXMubmVlZHNSZXNpemVMYXlvdXQoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5sYXlvdXQoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogY2hlY2sgaWYgbGF5b3V0IGlzIG5lZWRlZCBwb3N0IGxheW91dFxuICAgICAqIEByZXR1cm5zIEJvb2xlYW5cbiAgICAgKi9cbiAgICBwcm90by5uZWVkc1Jlc2l6ZUxheW91dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc2l6ZSA9IGdldFNpemUodGhpcy5lbGVtZW50KTtcbiAgICAgICAgLy8gY2hlY2sgdGhhdCB0aGlzLnNpemUgYW5kIHNpemUgYXJlIHRoZXJlXG4gICAgICAgIC8vIElFOCB0cmlnZ2VycyByZXNpemUgb24gYm9keSBzaXplIGNoYW5nZSwgc28gdGhleSBtaWdodCBub3QgYmVcbiAgICAgICAgdmFyIGhhc1NpemVzID0gdGhpcy5zaXplICYmIHNpemU7XG4gICAgICAgIHJldHVybiBoYXNTaXplcyAmJiBzaXplLmlubmVyV2lkdGggIT09IHRoaXMuc2l6ZS5pbm5lcldpZHRoO1xuICAgIH07XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBtZXRob2RzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbiAgICAvKipcbiAgICAgKiBhZGQgaXRlbXMgdG8gT3V0bGF5ZXIgaW5zdGFuY2VcbiAgICAgKiBAcGFyYW0ge0FycmF5IG9yIE5vZGVMaXN0IG9yIEVsZW1lbnR9IGVsZW1zXG4gICAgICogQHJldHVybnMge0FycmF5fSBpdGVtcyAtIE91dGxheWVyLkl0ZW1zXG4gICAgICoqL1xuICAgIHByb3RvLmFkZEl0ZW1zID0gZnVuY3Rpb24oZWxlbXMpIHtcbiAgICAgICAgdmFyIGl0ZW1zID0gdGhpcy5faXRlbWl6ZShlbGVtcyk7XG4gICAgICAgIC8vIGFkZCBpdGVtcyB0byBjb2xsZWN0aW9uXG4gICAgICAgIGlmIChpdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuaXRlbXMgPSB0aGlzLml0ZW1zLmNvbmNhdChpdGVtcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGl0ZW1zO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBMYXlvdXQgbmV3bHktYXBwZW5kZWQgaXRlbSBlbGVtZW50c1xuICAgICAqIEBwYXJhbSB7QXJyYXkgb3IgTm9kZUxpc3Qgb3IgRWxlbWVudH0gZWxlbXNcbiAgICAgKi9cbiAgICBwcm90by5hcHBlbmRlZCA9IGZ1bmN0aW9uKGVsZW1zKSB7XG4gICAgICAgIHZhciBpdGVtcyA9IHRoaXMuYWRkSXRlbXMoZWxlbXMpO1xuICAgICAgICBpZiAoIWl0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGxheW91dCBhbmQgcmV2ZWFsIGp1c3QgdGhlIG5ldyBpdGVtc1xuICAgICAgICB0aGlzLmxheW91dEl0ZW1zKGl0ZW1zLCB0cnVlKTtcbiAgICAgICAgdGhpcy5yZXZlYWwoaXRlbXMpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBMYXlvdXQgcHJlcGVuZGVkIGVsZW1lbnRzXG4gICAgICogQHBhcmFtIHtBcnJheSBvciBOb2RlTGlzdCBvciBFbGVtZW50fSBlbGVtc1xuICAgICAqL1xuICAgIHByb3RvLnByZXBlbmRlZCA9IGZ1bmN0aW9uKGVsZW1zKSB7XG4gICAgICAgIHZhciBpdGVtcyA9IHRoaXMuX2l0ZW1pemUoZWxlbXMpO1xuICAgICAgICBpZiAoIWl0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGFkZCBpdGVtcyB0byBiZWdpbm5pbmcgb2YgY29sbGVjdGlvblxuICAgICAgICB2YXIgcHJldmlvdXNJdGVtcyA9IHRoaXMuaXRlbXMuc2xpY2UoMCk7XG4gICAgICAgIHRoaXMuaXRlbXMgPSBpdGVtcy5jb25jYXQocHJldmlvdXNJdGVtcyk7XG4gICAgICAgIC8vIHN0YXJ0IG5ldyBsYXlvdXRcbiAgICAgICAgdGhpcy5fcmVzZXRMYXlvdXQoKTtcbiAgICAgICAgdGhpcy5fbWFuYWdlU3RhbXBzKCk7XG4gICAgICAgIC8vIGxheW91dCBuZXcgc3R1ZmYgd2l0aG91dCB0cmFuc2l0aW9uXG4gICAgICAgIHRoaXMubGF5b3V0SXRlbXMoaXRlbXMsIHRydWUpO1xuICAgICAgICB0aGlzLnJldmVhbChpdGVtcyk7XG4gICAgICAgIC8vIGxheW91dCBwcmV2aW91cyBpdGVtc1xuICAgICAgICB0aGlzLmxheW91dEl0ZW1zKHByZXZpb3VzSXRlbXMpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiByZXZlYWwgYSBjb2xsZWN0aW9uIG9mIGl0ZW1zXG4gICAgICogQHBhcmFtIHtBcnJheSBvZiBPdXRsYXllci5JdGVtc30gaXRlbXNcbiAgICAgKi9cbiAgICBwcm90by5yZXZlYWwgPSBmdW5jdGlvbihpdGVtcykge1xuICAgICAgICB0aGlzLl9lbWl0Q29tcGxldGVPbkl0ZW1zKCdyZXZlYWwnLCBpdGVtcyk7XG4gICAgICAgIGlmICghaXRlbXMgfHwgIWl0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdGFnZ2VyID0gdGhpcy51cGRhdGVTdGFnZ2VyKCk7XG4gICAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaSkge1xuICAgICAgICAgICAgaXRlbS5zdGFnZ2VyKGkgKiBzdGFnZ2VyKTtcbiAgICAgICAgICAgIGl0ZW0ucmV2ZWFsKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBoaWRlIGEgY29sbGVjdGlvbiBvZiBpdGVtc1xuICAgICAqIEBwYXJhbSB7QXJyYXkgb2YgT3V0bGF5ZXIuSXRlbXN9IGl0ZW1zXG4gICAgICovXG4gICAgcHJvdG8uaGlkZSA9IGZ1bmN0aW9uKGl0ZW1zKSB7XG4gICAgICAgIHRoaXMuX2VtaXRDb21wbGV0ZU9uSXRlbXMoJ2hpZGUnLCBpdGVtcyk7XG4gICAgICAgIGlmICghaXRlbXMgfHwgIWl0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdGFnZ2VyID0gdGhpcy51cGRhdGVTdGFnZ2VyKCk7XG4gICAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaSkge1xuICAgICAgICAgICAgaXRlbS5zdGFnZ2VyKGkgKiBzdGFnZ2VyKTtcbiAgICAgICAgICAgIGl0ZW0uaGlkZSgpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogcmV2ZWFsIGl0ZW0gZWxlbWVudHNcbiAgICAgKiBAcGFyYW0ge0FycmF5fSwge0VsZW1lbnR9LCB7Tm9kZUxpc3R9IGl0ZW1zXG4gICAgICovXG4gICAgcHJvdG8ucmV2ZWFsSXRlbUVsZW1lbnRzID0gZnVuY3Rpb24oZWxlbXMpIHtcbiAgICAgICAgdmFyIGl0ZW1zID0gdGhpcy5nZXRJdGVtcyhlbGVtcyk7XG4gICAgICAgIHRoaXMucmV2ZWFsKGl0ZW1zKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogaGlkZSBpdGVtIGVsZW1lbnRzXG4gICAgICogQHBhcmFtIHtBcnJheX0sIHtFbGVtZW50fSwge05vZGVMaXN0fSBpdGVtc1xuICAgICAqL1xuICAgIHByb3RvLmhpZGVJdGVtRWxlbWVudHMgPSBmdW5jdGlvbihlbGVtcykge1xuICAgICAgICB2YXIgaXRlbXMgPSB0aGlzLmdldEl0ZW1zKGVsZW1zKTtcbiAgICAgICAgdGhpcy5oaWRlKGl0ZW1zKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogZ2V0IE91dGxheWVyLkl0ZW0sIGdpdmVuIGFuIEVsZW1lbnRcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgICAqIEByZXR1cm5zIHtPdXRsYXllci5JdGVtfSBpdGVtXG4gICAgICovXG4gICAgcHJvdG8uZ2V0SXRlbSA9IGZ1bmN0aW9uKGVsZW0pIHtcbiAgICAgICAgLy8gbG9vcCB0aHJvdWdoIGl0ZW1zIHRvIGdldCB0aGUgb25lIHRoYXQgbWF0Y2hlc1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBpdGVtID0gdGhpcy5pdGVtc1tpXTtcbiAgICAgICAgICAgIGlmIChpdGVtLmVsZW1lbnQgPT0gZWxlbSkge1xuICAgICAgICAgICAgICAgIC8vIHJldHVybiBpdGVtXG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogZ2V0IGNvbGxlY3Rpb24gb2YgT3V0bGF5ZXIuSXRlbXMsIGdpdmVuIEVsZW1lbnRzXG4gICAgICogQHBhcmFtIHtBcnJheX0gZWxlbXNcbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IGl0ZW1zIC0gT3V0bGF5ZXIuSXRlbXNcbiAgICAgKi9cbiAgICBwcm90by5nZXRJdGVtcyA9IGZ1bmN0aW9uKGVsZW1zKSB7XG4gICAgICAgIGVsZW1zID0gdXRpbHMubWFrZUFycmF5KGVsZW1zKTtcbiAgICAgICAgdmFyIGl0ZW1zID0gW107XG4gICAgICAgIGVsZW1zLmZvckVhY2goZnVuY3Rpb24oZWxlbSkge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLmdldEl0ZW0oZWxlbSk7XG4gICAgICAgICAgICBpZiAoaXRlbSkge1xuICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHRoaXMpO1xuXG4gICAgICAgIHJldHVybiBpdGVtcztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogcmVtb3ZlIGVsZW1lbnQocykgZnJvbSBpbnN0YW5jZSBhbmQgRE9NXG4gICAgICogQHBhcmFtIHtBcnJheSBvciBOb2RlTGlzdCBvciBFbGVtZW50fSBlbGVtc1xuICAgICAqL1xuICAgIHByb3RvLnJlbW92ZSA9IGZ1bmN0aW9uKGVsZW1zKSB7XG4gICAgICAgIHZhciByZW1vdmVJdGVtcyA9IHRoaXMuZ2V0SXRlbXMoZWxlbXMpO1xuXG4gICAgICAgIHRoaXMuX2VtaXRDb21wbGV0ZU9uSXRlbXMoJ3JlbW92ZScsIHJlbW92ZUl0ZW1zKTtcblxuICAgICAgICAvLyBiYWlsIGlmIG5vIGl0ZW1zIHRvIHJlbW92ZVxuICAgICAgICBpZiAoIXJlbW92ZUl0ZW1zIHx8ICFyZW1vdmVJdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlbW92ZUl0ZW1zLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgaXRlbS5yZW1vdmUoKTtcbiAgICAgICAgICAgIC8vIHJlbW92ZSBpdGVtIGZyb20gY29sbGVjdGlvblxuICAgICAgICAgICAgdXRpbHMucmVtb3ZlRnJvbSh0aGlzLml0ZW1zLCBpdGVtKTtcbiAgICAgICAgfSwgdGhpcyk7XG4gICAgfTtcblxuICAgIC8vIC0tLS0tIGRlc3Ryb3kgLS0tLS0gLy9cblxuICAgIC8vIHJlbW92ZSBhbmQgZGlzYWJsZSBPdXRsYXllciBpbnN0YW5jZVxuICAgIHByb3RvLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gY2xlYW4gdXAgZHluYW1pYyBzdHlsZXNcbiAgICAgICAgdmFyIHN0eWxlID0gdGhpcy5lbGVtZW50LnN0eWxlO1xuICAgICAgICBzdHlsZS5oZWlnaHQgPSAnJztcbiAgICAgICAgc3R5bGUucG9zaXRpb24gPSAnJztcbiAgICAgICAgc3R5bGUud2lkdGggPSAnJztcbiAgICAgICAgLy8gZGVzdHJveSBpdGVtc1xuICAgICAgICB0aGlzLml0ZW1zLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgaXRlbS5kZXN0cm95KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMudW5iaW5kUmVzaXplKCk7XG5cbiAgICAgICAgdmFyIGlkID0gdGhpcy5lbGVtZW50Lm91dGxheWVyR1VJRDtcbiAgICAgICAgZGVsZXRlIGluc3RhbmNlc1tpZF07IC8vIHJlbW92ZSByZWZlcmVuY2UgdG8gaW5zdGFuY2UgYnkgaWRcbiAgICAgICAgZGVsZXRlIHRoaXMuZWxlbWVudC5vdXRsYXllckdVSUQ7XG4gICAgICAgIC8vIHJlbW92ZSBkYXRhIGZvciBqUXVlcnlcbiAgICAgICAgaWYgKGpRdWVyeSkge1xuICAgICAgICAgICAgalF1ZXJ5LnJlbW92ZURhdGEodGhpcy5lbGVtZW50LCB0aGlzLmNvbnN0cnVjdG9yLm5hbWVzcGFjZSk7XG4gICAgICAgIH1cblxuICAgIH07XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBkYXRhIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbiAgICAvKipcbiAgICAgKiBnZXQgT3V0bGF5ZXIgaW5zdGFuY2UgZnJvbSBlbGVtZW50XG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbGVtXG4gICAgICogQHJldHVybnMge091dGxheWVyfVxuICAgICAqL1xuICAgIE91dGxheWVyLmRhdGEgPSBmdW5jdGlvbihlbGVtKSB7XG4gICAgICAgIGVsZW0gPSB1dGlscy5nZXRRdWVyeUVsZW1lbnQoZWxlbSk7XG4gICAgICAgIHZhciBpZCA9IGVsZW0gJiYgZWxlbS5vdXRsYXllckdVSUQ7XG4gICAgICAgIHJldHVybiBpZCAmJiBpbnN0YW5jZXNbaWRdO1xuICAgIH07XG5cblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGNyZWF0ZSBPdXRsYXllciBjbGFzcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG4gICAgLyoqXG4gICAgICogY3JlYXRlIGEgbGF5b3V0IGNsYXNzXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZVxuICAgICAqL1xuICAgIE91dGxheWVyLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWVzcGFjZSwgb3B0aW9ucykge1xuICAgICAgICAvLyBzdWItY2xhc3MgT3V0bGF5ZXJcbiAgICAgICAgdmFyIExheW91dCA9IHN1YmNsYXNzKE91dGxheWVyKTtcbiAgICAgICAgLy8gYXBwbHkgbmV3IG9wdGlvbnMgYW5kIGNvbXBhdE9wdGlvbnNcbiAgICAgICAgTGF5b3V0LmRlZmF1bHRzID0gdXRpbHMuZXh0ZW5kKHt9LCBPdXRsYXllci5kZWZhdWx0cyk7XG4gICAgICAgIHV0aWxzLmV4dGVuZChMYXlvdXQuZGVmYXVsdHMsIG9wdGlvbnMpO1xuICAgICAgICBMYXlvdXQuY29tcGF0T3B0aW9ucyA9IHV0aWxzLmV4dGVuZCh7fSwgT3V0bGF5ZXIuY29tcGF0T3B0aW9ucyk7XG5cbiAgICAgICAgTGF5b3V0Lm5hbWVzcGFjZSA9IG5hbWVzcGFjZTtcblxuICAgICAgICBMYXlvdXQuZGF0YSA9IE91dGxheWVyLmRhdGE7XG5cbiAgICAgICAgLy8gc3ViLWNsYXNzIEl0ZW1cbiAgICAgICAgTGF5b3V0Lkl0ZW0gPSBzdWJjbGFzcyhJdGVtKTtcblxuICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBkZWNsYXJhdGl2ZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG4gICAgICAgIHV0aWxzLmh0bWxJbml0KExheW91dCwgbmFtZXNwYWNlKTtcblxuICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBqUXVlcnkgYnJpZGdlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbiAgICAgICAgLy8gbWFrZSBpbnRvIGpRdWVyeSBwbHVnaW5cbiAgICAgICAgaWYgKGpRdWVyeSAmJiBqUXVlcnkuYnJpZGdldCkge1xuICAgICAgICAgICAgalF1ZXJ5LmJyaWRnZXQobmFtZXNwYWNlLCBMYXlvdXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIExheW91dDtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gc3ViY2xhc3MoUGFyZW50KSB7XG4gICAgICAgIGZ1bmN0aW9uIFN1YkNsYXNzKCkge1xuICAgICAgICAgICAgUGFyZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cblxuICAgICAgICBTdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBhcmVudC5wcm90b3R5cGUpO1xuICAgICAgICBTdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTdWJDbGFzcztcblxuICAgICAgICByZXR1cm4gU3ViQ2xhc3M7XG4gICAgfVxuXG4gICAgLy8gLS0tLS0gaGVscGVycyAtLS0tLSAvL1xuXG4gICAgLy8gaG93IG1hbnkgbWlsbGlzZWNvbmRzIGFyZSBpbiBlYWNoIHVuaXRcbiAgICB2YXIgbXNVbml0cyA9IHtcbiAgICAgICAgbXM6IDEsXG4gICAgICAgIHM6IDEwMDBcbiAgICB9O1xuXG4gICAgLy8gbXVuZ2UgdGltZS1saWtlIHBhcmFtZXRlciBpbnRvIG1pbGxpc2Vjb25kIG51bWJlclxuICAgIC8vICcwLjRzJyAtPiA0MFxuICAgIGZ1bmN0aW9uIGdldE1pbGxpc2Vjb25kcyh0aW1lKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGltZSA9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgcmV0dXJuIHRpbWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG1hdGNoZXMgPSB0aW1lLm1hdGNoKC8oXlxcZCpcXC4/XFxkKikoXFx3KikvKTtcbiAgICAgICAgdmFyIG51bSA9IG1hdGNoZXMgJiYgbWF0Y2hlc1sxXTtcbiAgICAgICAgdmFyIHVuaXQgPSBtYXRjaGVzICYmIG1hdGNoZXNbMl07XG4gICAgICAgIGlmICghbnVtLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICAgICAgbnVtID0gcGFyc2VGbG9hdChudW0pO1xuICAgICAgICB2YXIgbXVsdCA9IG1zVW5pdHNbdW5pdF0gfHwgMTtcbiAgICAgICAgcmV0dXJuIG51bSAqIG11bHQ7XG4gICAgfVxuXG4gICAgLy8gLS0tLS0gZmluIC0tLS0tIC8vXG5cbiAgICAvLyBiYWNrIGluIGdsb2JhbFxuICAgIE91dGxheWVyLkl0ZW0gPSBJdGVtO1xuXG4gICAgcmV0dXJuIE91dGxheWVyO1xuXG59KSk7XG5cbi8qIVxuICogTWFzb25yeSB2NC4yLjBcbiAqIENhc2NhZGluZyBncmlkIGxheW91dCBsaWJyYXJ5XG4gKiBodHRwOi8vbWFzb25yeS5kZXNhbmRyby5jb21cbiAqIE1JVCBMaWNlbnNlXG4gKiBieSBEYXZpZCBEZVNhbmRyb1xuICovXG5cbihmdW5jdGlvbih3aW5kb3csIGZhY3RvcnkpIHtcbiAgICAvLyB1bml2ZXJzYWwgbW9kdWxlIGRlZmluaXRpb25cbiAgICAvKiBqc2hpbnQgc3RyaWN0OiBmYWxzZSAqL1xuICAgIC8qZ2xvYmFscyBkZWZpbmUsIG1vZHVsZSwgcmVxdWlyZSAqL1xuICAgIGlmICh0eXBlb2YgZGVmaW5lID09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICAvLyBBTURcbiAgICAgICAgZGVmaW5lKFtcbiAgICAgICAgICAgICAgICAnb3V0bGF5ZXIvb3V0bGF5ZXInLFxuICAgICAgICAgICAgICAgICdnZXQtc2l6ZS9nZXQtc2l6ZSdcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBmYWN0b3J5KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgPT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgICAgLy8gQ29tbW9uSlNcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KFxuICAgICAgICAgICAgcmVxdWlyZSgnb3V0bGF5ZXInKSxcbiAgICAgICAgICAgIHJlcXVpcmUoJ2dldC1zaXplJylcbiAgICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBicm93c2VyIGdsb2JhbFxuICAgICAgICB3aW5kb3cuTWFzb25yeSA9IGZhY3RvcnkoXG4gICAgICAgICAgICB3aW5kb3cuT3V0bGF5ZXIsXG4gICAgICAgICAgICB3aW5kb3cuZ2V0U2l6ZVxuICAgICAgICApO1xuICAgIH1cblxufSh3aW5kb3csIGZ1bmN0aW9uIGZhY3RvcnkoT3V0bGF5ZXIsIGdldFNpemUpIHtcblxuXG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBtYXNvbnJ5RGVmaW5pdGlvbiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuXG4gICAgLy8gY3JlYXRlIGFuIE91dGxheWVyIGxheW91dCBjbGFzc1xuICAgIHZhciBNYXNvbnJ5ID0gT3V0bGF5ZXIuY3JlYXRlKCdtYXNvbnJ5Jyk7XG4gICAgLy8gaXNGaXRXaWR0aCAtPiBmaXRXaWR0aFxuICAgIE1hc29ucnkuY29tcGF0T3B0aW9ucy5maXRXaWR0aCA9ICdpc0ZpdFdpZHRoJztcblxuICAgIHZhciBwcm90byA9IE1hc29ucnkucHJvdG90eXBlO1xuXG4gICAgcHJvdG8uX3Jlc2V0TGF5b3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuZ2V0U2l6ZSgpO1xuICAgICAgICB0aGlzLl9nZXRNZWFzdXJlbWVudCgnY29sdW1uV2lkdGgnLCAnb3V0ZXJXaWR0aCcpO1xuICAgICAgICB0aGlzLl9nZXRNZWFzdXJlbWVudCgnZ3V0dGVyJywgJ291dGVyV2lkdGgnKTtcbiAgICAgICAgdGhpcy5tZWFzdXJlQ29sdW1ucygpO1xuXG4gICAgICAgIC8vIHJlc2V0IGNvbHVtbiBZXG4gICAgICAgIHRoaXMuY29sWXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNvbHM7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5jb2xZcy5wdXNoKDApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5tYXhZID0gMDtcbiAgICAgICAgdGhpcy5ob3Jpem9udGFsQ29sSW5kZXggPSAwO1xuICAgIH07XG5cbiAgICBwcm90by5tZWFzdXJlQ29sdW1ucyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmdldENvbnRhaW5lcldpZHRoKCk7XG4gICAgICAgIC8vIGlmIGNvbHVtbldpZHRoIGlzIDAsIGRlZmF1bHQgdG8gb3V0ZXJXaWR0aCBvZiBmaXJzdCBpdGVtXG4gICAgICAgIGlmICghdGhpcy5jb2x1bW5XaWR0aCkge1xuICAgICAgICAgICAgdmFyIGZpcnN0SXRlbSA9IHRoaXMuaXRlbXNbMF07XG4gICAgICAgICAgICB2YXIgZmlyc3RJdGVtRWxlbSA9IGZpcnN0SXRlbSAmJiBmaXJzdEl0ZW0uZWxlbWVudDtcbiAgICAgICAgICAgIC8vIGNvbHVtbldpZHRoIGZhbGwgYmFjayB0byBpdGVtIG9mIGZpcnN0IGVsZW1lbnRcbiAgICAgICAgICAgIHRoaXMuY29sdW1uV2lkdGggPSBmaXJzdEl0ZW1FbGVtICYmIGdldFNpemUoZmlyc3RJdGVtRWxlbSkub3V0ZXJXaWR0aCB8fFxuICAgICAgICAgICAgICAgIC8vIGlmIGZpcnN0IGVsZW0gaGFzIG5vIHdpZHRoLCBkZWZhdWx0IHRvIHNpemUgb2YgY29udGFpbmVyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXJXaWR0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjb2x1bW5XaWR0aCA9IHRoaXMuY29sdW1uV2lkdGggKz0gdGhpcy5ndXR0ZXI7XG5cbiAgICAgICAgLy8gY2FsY3VsYXRlIGNvbHVtbnNcbiAgICAgICAgdmFyIGNvbnRhaW5lcldpZHRoID0gdGhpcy5jb250YWluZXJXaWR0aCArIHRoaXMuZ3V0dGVyO1xuICAgICAgICB2YXIgY29scyA9IGNvbnRhaW5lcldpZHRoIC8gY29sdW1uV2lkdGg7XG4gICAgICAgIC8vIGZpeCByb3VuZGluZyBlcnJvcnMsIHR5cGljYWxseSB3aXRoIGd1dHRlcnNcbiAgICAgICAgdmFyIGV4Y2VzcyA9IGNvbHVtbldpZHRoIC0gY29udGFpbmVyV2lkdGggJSBjb2x1bW5XaWR0aDtcbiAgICAgICAgLy8gaWYgb3ZlcnNob290IGlzIGxlc3MgdGhhbiBhIHBpeGVsLCByb3VuZCB1cCwgb3RoZXJ3aXNlIGZsb29yIGl0XG4gICAgICAgIHZhciBtYXRoTWV0aG9kID0gZXhjZXNzICYmIGV4Y2VzcyA8IDEgPyAncm91bmQnIDogJ2Zsb29yJztcbiAgICAgICAgY29scyA9IE1hdGhbbWF0aE1ldGhvZF0oY29scyk7XG4gICAgICAgIHRoaXMuY29scyA9IE1hdGgubWF4KGNvbHMsIDEpO1xuICAgIH07XG5cbiAgICBwcm90by5nZXRDb250YWluZXJXaWR0aCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBjb250YWluZXIgaXMgcGFyZW50IGlmIGZpdCB3aWR0aFxuICAgICAgICB2YXIgaXNGaXRXaWR0aCA9IHRoaXMuX2dldE9wdGlvbignZml0V2lkdGgnKTtcbiAgICAgICAgdmFyIGNvbnRhaW5lciA9IGlzRml0V2lkdGggPyB0aGlzLmVsZW1lbnQucGFyZW50Tm9kZSA6IHRoaXMuZWxlbWVudDtcbiAgICAgICAgLy8gY2hlY2sgdGhhdCB0aGlzLnNpemUgYW5kIHNpemUgYXJlIHRoZXJlXG4gICAgICAgIC8vIElFOCB0cmlnZ2VycyByZXNpemUgb24gYm9keSBzaXplIGNoYW5nZSwgc28gdGhleSBtaWdodCBub3QgYmVcbiAgICAgICAgdmFyIHNpemUgPSBnZXRTaXplKGNvbnRhaW5lcik7XG4gICAgICAgIHRoaXMuY29udGFpbmVyV2lkdGggPSBzaXplICYmIHNpemUuaW5uZXJXaWR0aDtcbiAgICB9O1xuXG4gICAgcHJvdG8uX2dldEl0ZW1MYXlvdXRQb3NpdGlvbiA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgaXRlbS5nZXRTaXplKCk7XG4gICAgICAgIC8vIGhvdyBtYW55IGNvbHVtbnMgZG9lcyB0aGlzIGJyaWNrIHNwYW5cbiAgICAgICAgdmFyIHJlbWFpbmRlciA9IGl0ZW0uc2l6ZS5vdXRlcldpZHRoICUgdGhpcy5jb2x1bW5XaWR0aDtcbiAgICAgICAgdmFyIG1hdGhNZXRob2QgPSByZW1haW5kZXIgJiYgcmVtYWluZGVyIDwgMSA/ICdyb3VuZCcgOiAnY2VpbCc7XG4gICAgICAgIC8vIHJvdW5kIGlmIG9mZiBieSAxIHBpeGVsLCBvdGhlcndpc2UgdXNlIGNlaWxcbiAgICAgICAgdmFyIGNvbFNwYW4gPSBNYXRoW21hdGhNZXRob2RdKGl0ZW0uc2l6ZS5vdXRlcldpZHRoIC8gdGhpcy5jb2x1bW5XaWR0aCk7XG4gICAgICAgIGNvbFNwYW4gPSBNYXRoLm1pbihjb2xTcGFuLCB0aGlzLmNvbHMpO1xuICAgICAgICAvLyB1c2UgaG9yaXpvbnRhbCBvciB0b3AgY29sdW1uIHBvc2l0aW9uXG4gICAgICAgIHZhciBjb2xQb3NNZXRob2QgPSB0aGlzLm9wdGlvbnMuaG9yaXpvbnRhbE9yZGVyID9cbiAgICAgICAgICAgICdfZ2V0SG9yaXpvbnRhbENvbFBvc2l0aW9uJyA6ICdfZ2V0VG9wQ29sUG9zaXRpb24nO1xuICAgICAgICB2YXIgY29sUG9zaXRpb24gPSB0aGlzW2NvbFBvc01ldGhvZF0oY29sU3BhbiwgaXRlbSk7XG4gICAgICAgIC8vIHBvc2l0aW9uIHRoZSBicmlja1xuICAgICAgICB2YXIgcG9zaXRpb24gPSB7XG4gICAgICAgICAgICB4OiB0aGlzLmNvbHVtbldpZHRoICogY29sUG9zaXRpb24uY29sLFxuICAgICAgICAgICAgeTogY29sUG9zaXRpb24ueVxuICAgICAgICB9O1xuICAgICAgICAvLyBhcHBseSBzZXRIZWlnaHQgdG8gbmVjZXNzYXJ5IGNvbHVtbnNcbiAgICAgICAgdmFyIHNldEhlaWdodCA9IGNvbFBvc2l0aW9uLnkgKyBpdGVtLnNpemUub3V0ZXJIZWlnaHQ7XG4gICAgICAgIHZhciBzZXRNYXggPSBjb2xTcGFuICsgY29sUG9zaXRpb24uY29sO1xuICAgICAgICBmb3IgKHZhciBpID0gY29sUG9zaXRpb24uY29sOyBpIDwgc2V0TWF4OyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuY29sWXNbaV0gPSBzZXRIZWlnaHQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcG9zaXRpb247XG4gICAgfTtcblxuICAgIHByb3RvLl9nZXRUb3BDb2xQb3NpdGlvbiA9IGZ1bmN0aW9uKGNvbFNwYW4pIHtcbiAgICAgICAgdmFyIGNvbEdyb3VwID0gdGhpcy5fZ2V0VG9wQ29sR3JvdXAoY29sU3Bhbik7XG4gICAgICAgIC8vIGdldCB0aGUgbWluaW11bSBZIHZhbHVlIGZyb20gdGhlIGNvbHVtbnNcbiAgICAgICAgdmFyIG1pbmltdW1ZID0gTWF0aC5taW4uYXBwbHkoTWF0aCwgY29sR3JvdXApO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb2w6IGNvbEdyb3VwLmluZGV4T2YobWluaW11bVkpLFxuICAgICAgICAgICAgeTogbWluaW11bVksXG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBjb2xTcGFuIC0gbnVtYmVyIG9mIGNvbHVtbnMgdGhlIGVsZW1lbnQgc3BhbnNcbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IGNvbEdyb3VwXG4gICAgICovXG4gICAgcHJvdG8uX2dldFRvcENvbEdyb3VwID0gZnVuY3Rpb24oY29sU3Bhbikge1xuICAgICAgICBpZiAoY29sU3BhbiA8IDIpIHtcbiAgICAgICAgICAgIC8vIGlmIGJyaWNrIHNwYW5zIG9ubHkgb25lIGNvbHVtbiwgdXNlIGFsbCB0aGUgY29sdW1uIFlzXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb2xZcztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjb2xHcm91cCA9IFtdO1xuICAgICAgICAvLyBob3cgbWFueSBkaWZmZXJlbnQgcGxhY2VzIGNvdWxkIHRoaXMgYnJpY2sgZml0IGhvcml6b250YWxseVxuICAgICAgICB2YXIgZ3JvdXBDb3VudCA9IHRoaXMuY29scyArIDEgLSBjb2xTcGFuO1xuICAgICAgICAvLyBmb3IgZWFjaCBncm91cCBwb3RlbnRpYWwgaG9yaXpvbnRhbCBwb3NpdGlvblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdyb3VwQ291bnQ7IGkrKykge1xuICAgICAgICAgICAgY29sR3JvdXBbaV0gPSB0aGlzLl9nZXRDb2xHcm91cFkoaSwgY29sU3Bhbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbEdyb3VwO1xuICAgIH07XG5cbiAgICBwcm90by5fZ2V0Q29sR3JvdXBZID0gZnVuY3Rpb24oY29sLCBjb2xTcGFuKSB7XG4gICAgICAgIGlmIChjb2xTcGFuIDwgMikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29sWXNbY29sXTtcbiAgICAgICAgfVxuICAgICAgICAvLyBtYWtlIGFuIGFycmF5IG9mIGNvbFkgdmFsdWVzIGZvciB0aGF0IG9uZSBncm91cFxuICAgICAgICB2YXIgZ3JvdXBDb2xZcyA9IHRoaXMuY29sWXMuc2xpY2UoY29sLCBjb2wgKyBjb2xTcGFuKTtcbiAgICAgICAgLy8gYW5kIGdldCB0aGUgbWF4IHZhbHVlIG9mIHRoZSBhcnJheVxuICAgICAgICByZXR1cm4gTWF0aC5tYXguYXBwbHkoTWF0aCwgZ3JvdXBDb2xZcyk7XG4gICAgfTtcblxuICAgIC8vIGdldCBjb2x1bW4gcG9zaXRpb24gYmFzZWQgb24gaG9yaXpvbnRhbCBpbmRleC4gIzg3M1xuICAgIHByb3RvLl9nZXRIb3Jpem9udGFsQ29sUG9zaXRpb24gPSBmdW5jdGlvbihjb2xTcGFuLCBpdGVtKSB7XG4gICAgICAgIHZhciBjb2wgPSB0aGlzLmhvcml6b250YWxDb2xJbmRleCAlIHRoaXMuY29scztcbiAgICAgICAgdmFyIGlzT3ZlciA9IGNvbFNwYW4gPiAxICYmIGNvbCArIGNvbFNwYW4gPiB0aGlzLmNvbHM7XG4gICAgICAgIC8vIHNoaWZ0IHRvIG5leHQgcm93IGlmIGl0ZW0gY2FuJ3QgZml0IG9uIGN1cnJlbnQgcm93XG4gICAgICAgIGNvbCA9IGlzT3ZlciA/IDAgOiBjb2w7XG4gICAgICAgIC8vIGRvbid0IGxldCB6ZXJvLXNpemUgaXRlbXMgdGFrZSB1cCBzcGFjZVxuICAgICAgICB2YXIgaGFzU2l6ZSA9IGl0ZW0uc2l6ZS5vdXRlcldpZHRoICYmIGl0ZW0uc2l6ZS5vdXRlckhlaWdodDtcbiAgICAgICAgdGhpcy5ob3Jpem9udGFsQ29sSW5kZXggPSBoYXNTaXplID8gY29sICsgY29sU3BhbiA6IHRoaXMuaG9yaXpvbnRhbENvbEluZGV4O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb2w6IGNvbCxcbiAgICAgICAgICAgIHk6IHRoaXMuX2dldENvbEdyb3VwWShjb2wsIGNvbFNwYW4pLFxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBwcm90by5fbWFuYWdlU3RhbXAgPSBmdW5jdGlvbihzdGFtcCkge1xuICAgICAgICB2YXIgc3RhbXBTaXplID0gZ2V0U2l6ZShzdGFtcCk7XG4gICAgICAgIHZhciBvZmZzZXQgPSB0aGlzLl9nZXRFbGVtZW50T2Zmc2V0KHN0YW1wKTtcbiAgICAgICAgLy8gZ2V0IHRoZSBjb2x1bW5zIHRoYXQgdGhpcyBzdGFtcCBhZmZlY3RzXG4gICAgICAgIHZhciBpc09yaWdpbkxlZnQgPSB0aGlzLl9nZXRPcHRpb24oJ29yaWdpbkxlZnQnKTtcbiAgICAgICAgdmFyIGZpcnN0WCA9IGlzT3JpZ2luTGVmdCA/IG9mZnNldC5sZWZ0IDogb2Zmc2V0LnJpZ2h0O1xuICAgICAgICB2YXIgbGFzdFggPSBmaXJzdFggKyBzdGFtcFNpemUub3V0ZXJXaWR0aDtcbiAgICAgICAgdmFyIGZpcnN0Q29sID0gTWF0aC5mbG9vcihmaXJzdFggLyB0aGlzLmNvbHVtbldpZHRoKTtcbiAgICAgICAgZmlyc3RDb2wgPSBNYXRoLm1heCgwLCBmaXJzdENvbCk7XG4gICAgICAgIHZhciBsYXN0Q29sID0gTWF0aC5mbG9vcihsYXN0WCAvIHRoaXMuY29sdW1uV2lkdGgpO1xuICAgICAgICAvLyBsYXN0Q29sIHNob3VsZCBub3QgZ28gb3ZlciBpZiBtdWx0aXBsZSBvZiBjb2x1bW5XaWR0aCAjNDI1XG4gICAgICAgIGxhc3RDb2wgLT0gbGFzdFggJSB0aGlzLmNvbHVtbldpZHRoID8gMCA6IDE7XG4gICAgICAgIGxhc3RDb2wgPSBNYXRoLm1pbih0aGlzLmNvbHMgLSAxLCBsYXN0Q29sKTtcbiAgICAgICAgLy8gc2V0IGNvbFlzIHRvIGJvdHRvbSBvZiB0aGUgc3RhbXBcblxuICAgICAgICB2YXIgaXNPcmlnaW5Ub3AgPSB0aGlzLl9nZXRPcHRpb24oJ29yaWdpblRvcCcpO1xuICAgICAgICB2YXIgc3RhbXBNYXhZID0gKGlzT3JpZ2luVG9wID8gb2Zmc2V0LnRvcCA6IG9mZnNldC5ib3R0b20pICtcbiAgICAgICAgICAgIHN0YW1wU2l6ZS5vdXRlckhlaWdodDtcbiAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0Q29sOyBpIDw9IGxhc3RDb2w7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5jb2xZc1tpXSA9IE1hdGgubWF4KHN0YW1wTWF4WSwgdGhpcy5jb2xZc1tpXSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcHJvdG8uX2dldENvbnRhaW5lclNpemUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5tYXhZID0gTWF0aC5tYXguYXBwbHkoTWF0aCwgdGhpcy5jb2xZcyk7XG4gICAgICAgIHZhciBzaXplID0ge1xuICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLm1heFlcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAodGhpcy5fZ2V0T3B0aW9uKCdmaXRXaWR0aCcpKSB7XG4gICAgICAgICAgICBzaXplLndpZHRoID0gdGhpcy5fZ2V0Q29udGFpbmVyRml0V2lkdGgoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzaXplO1xuICAgIH07XG5cbiAgICBwcm90by5fZ2V0Q29udGFpbmVyRml0V2lkdGggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHVudXNlZENvbHMgPSAwO1xuICAgICAgICAvLyBjb3VudCB1bnVzZWQgY29sdW1uc1xuICAgICAgICB2YXIgaSA9IHRoaXMuY29scztcbiAgICAgICAgd2hpbGUgKC0taSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY29sWXNbaV0gIT09IDApIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVudXNlZENvbHMrKztcbiAgICAgICAgfVxuICAgICAgICAvLyBmaXQgY29udGFpbmVyIHRvIGNvbHVtbnMgdGhhdCBoYXZlIGJlZW4gdXNlZFxuICAgICAgICByZXR1cm4gKHRoaXMuY29scyAtIHVudXNlZENvbHMpICogdGhpcy5jb2x1bW5XaWR0aCAtIHRoaXMuZ3V0dGVyO1xuICAgIH07XG5cbiAgICBwcm90by5uZWVkc1Jlc2l6ZUxheW91dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcHJldmlvdXNXaWR0aCA9IHRoaXMuY29udGFpbmVyV2lkdGg7XG4gICAgICAgIHRoaXMuZ2V0Q29udGFpbmVyV2lkdGgoKTtcbiAgICAgICAgcmV0dXJuIHByZXZpb3VzV2lkdGggIT0gdGhpcy5jb250YWluZXJXaWR0aDtcbiAgICB9O1xuXG4gICAgcmV0dXJuIE1hc29ucnk7XG5cbn0pKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
